  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "events"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (238.6ms)[0m  [1m[35mCREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "starts_at" datetime, "ends_at" datetime, "kind" varchar, "weekly_recurring" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (226.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (138.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180113131122)[0m
  [1m[35m (226.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-13 19:19:55.797922"], ["updated_at", "2018-01-13 19:19:55.797922"]]
  [1m[35m (186.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:19:56.317709', '2018-01-13 19:19:56.317709', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:19:56.317709', '2018-01-13 19:19:56.317709', 298486374)[0m
  [1m[35m (119.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:19:56.461877"], ["updated_at", "2018-01-13 19:19:56.461877"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:19:56.467358"], ["updated_at", "2018-01-13 19:19:56.467358"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:20:30.862969', '2018-01-13 19:20:30.862969', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:20:30.862969', '2018-01-13 19:20:30.862969', 298486374)[0m
  [1m[35m (65.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:20:30.951088"], ["updated_at", "2018-01-13 19:20:30.951088"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:20:30.955860"], ["updated_at", "2018-01-13 19:20:30.955860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:22:08.678135', '2018-01-13 19:22:08.678135', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:22:08.678135', '2018-01-13 19:22:08.678135', 298486374)[0m
  [1m[35m (78.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
EventTest: test_appointment_events_method
-----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:22:08.774599"], ["updated_at", "2018-01-13 19:22:08.774599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:22:08.778751"], ["updated_at", "2018-01-13 19:22:08.778751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:22:08.780993"], ["updated_at", "2018-01-13 19:22:08.780993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:23:33.211878', '2018-01-13 19:23:33.211878', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:23:33.211878', '2018-01-13 19:23:33.211878', 298486374)[0m
  [1m[35m (82.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
EventTest: test_opening_events_method
-------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:23:33.312314"], ["updated_at", "2018-01-13 19:23:33.312314"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-06-20 14:30:00"], ["ends_at", "2014-06-20 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:23:33.316633"], ["updated_at", "2018-01-13 19:23:33.316633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:23:33.319151"], ["updated_at", "2018-01-13 19:23:33.319151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-07-21 14:30:00"], ["ends_at", "2014-07-21 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:23:33.321215"], ["updated_at", "2018-01-13 19:23:33.321215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:10.002123', '2018-01-13 19:24:10.002123', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:10.002123', '2018-01-13 19:24:10.002123', 298486374)[0m
  [1m[35m (162.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:10.189895"], ["updated_at", "2018-01-13 19:24:10.189895"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:10.195641"], ["updated_at", "2018-01-13 19:24:10.195641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:10.211476"], ["updated_at", "2018-01-13 19:24:10.211476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.215298"], ["updated_at", "2018-01-13 19:24:10.215298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.223899"], ["updated_at", "2018-01-13 19:24:10.223899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.225957"], ["updated_at", "2018-01-13 19:24:10.225957"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.227951"], ["updated_at", "2018-01-13 19:24:10.227951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:10.235497"], ["updated_at", "2018-01-13 19:24:10.235497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:10.239301"], ["updated_at", "2018-01-13 19:24:10.239301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:10.241935"], ["updated_at", "2018-01-13 19:24:10.241935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.244433"], ["updated_at", "2018-01-13 19:24:10.244433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.246473"], ["updated_at", "2018-01-13 19:24:10.246473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:10.248427"], ["updated_at", "2018-01-13 19:24:10.248427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
EventTest: test_opening_events_method
-------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:10.256409"], ["updated_at", "2018-01-13 19:24:10.256409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-06-20 14:30:00"], ["ends_at", "2014-06-20 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:10.259546"], ["updated_at", "2018-01-13 19:24:10.259546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:10.261471"], ["updated_at", "2018-01-13 19:24:10.261471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-07-21 14:30:00"], ["ends_at", "2014-07-21 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:10.265465"], ["updated_at", "2018-01-13 19:24:10.265465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:27.356298', '2018-01-13 19:24:27.356298', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:27.356298', '2018-01-13 19:24:27.356298', 298486374)[0m
  [1m[35m (85.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
EventTest: test_opening_events_method
-------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:27.465920"], ["updated_at", "2018-01-13 19:24:27.465920"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-06-20 14:30:00"], ["ends_at", "2014-06-20 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:27.470501"], ["updated_at", "2018-01-13 19:24:27.470501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:27.475967"], ["updated_at", "2018-01-13 19:24:27.475967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-07-21 14:30:00"], ["ends_at", "2014-07-21 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:27.478835"], ["updated_at", "2018-01-13 19:24:27.478835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:32.127917', '2018-01-13 19:24:32.127917', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 19:24:32.127917', '2018-01-13 19:24:32.127917', 298486374)[0m
  [1m[35m (67.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.219771"], ["updated_at", "2018-01-13 19:24:32.219771"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.224465"], ["updated_at", "2018-01-13 19:24:32.224465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:32.227186"], ["updated_at", "2018-01-13 19:24:32.227186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.229595"], ["updated_at", "2018-01-13 19:24:32.229595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:32.239924"], ["updated_at", "2018-01-13 19:24:32.239924"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.243816"], ["updated_at", "2018-01-13 19:24:32.243816"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.246943"], ["updated_at", "2018-01-13 19:24:32.246943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.249210"], ["updated_at", "2018-01-13 19:24:32.249210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.252425"], ["updated_at", "2018-01-13 19:24:32.252425"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.261596"], ["updated_at", "2018-01-13 19:24:32.261596"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.265727"], ["updated_at", "2018-01-13 19:24:32.265727"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.278601"], ["updated_at", "2018-01-13 19:24:32.278601"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.281974"], ["updated_at", "2018-01-13 19:24:32.281974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:32.284536"], ["updated_at", "2018-01-13 19:24:32.284536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.286843"], ["updated_at", "2018-01-13 19:24:32.286843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.288770"], ["updated_at", "2018-01-13 19:24:32.288770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.291014"], ["updated_at", "2018-01-13 19:24:32.291014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 19:24:32.299395"], ["updated_at", "2018-01-13 19:24:32.299395"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 19:24:32.302619"], ["updated_at", "2018-01-13 19:24:32.302619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.318340"], ["updated_at", "2018-01-13 19:24:32.318340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.321719"], ["updated_at", "2018-01-13 19:24:32.321719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 19:24:32.323812"], ["updated_at", "2018-01-13 19:24:32.323812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:02:55.767976', '2018-01-13 20:02:55.767976', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:02:55.767976', '2018-01-13 20:02:55.767976', 298486374)[0m
  [1m[35m (81.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.867418"], ["updated_at", "2018-01-13 20:02:55.867418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.872053"], ["updated_at", "2018-01-13 20:02:55.872053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.875039"], ["updated_at", "2018-01-13 20:02:55.875039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.884813"], ["updated_at", "2018-01-13 20:02:55.884813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.887838"], ["updated_at", "2018-01-13 20:02:55.887838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:02:55.890635"], ["updated_at", "2018-01-13 20:02:55.890635"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.893103"], ["updated_at", "2018-01-13 20:02:55.893103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.895577"], ["updated_at", "2018-01-13 20:02:55.895577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.898046"], ["updated_at", "2018-01-13 20:02:55.898046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.907547"], ["updated_at", "2018-01-13 20:02:55.907547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:02:55.911059"], ["updated_at", "2018-01-13 20:02:55.911059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.920312"], ["updated_at", "2018-01-13 20:02:55.920312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.923455"], ["updated_at", "2018-01-13 20:02:55.923455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:02:55.925912"], ["updated_at", "2018-01-13 20:02:55.925912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.928207"], ["updated_at", "2018-01-13 20:02:55.928207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:02:55.935566"], ["updated_at", "2018-01-13 20:02:55.935566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.937639"], ["updated_at", "2018-01-13 20:02:55.937639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.939327"], ["updated_at", "2018-01-13 20:02:55.939327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.941180"], ["updated_at", "2018-01-13 20:02:55.941180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.943486"], ["updated_at", "2018-01-13 20:02:55.943486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:02:55.949599"], ["updated_at", "2018-01-13 20:02:55.949599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:02:55.952178"], ["updated_at", "2018-01-13 20:02:55.952178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:16:46.944710', '2018-01-13 20:16:46.944710', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:16:46.944710', '2018-01-13 20:16:46.944710', 298486374)[0m
  [1m[35m (70.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
EventTest: test_separated_opening
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:16:47.035082"], ["updated_at", "2018-01-13 20:16:47.035082"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:16:47.039762"], ["updated_at", "2018-01-13 20:16:47.039762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:00:00"], ["ends_at", "2014-08-05 11:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:16:47.041942"], ["updated_at", "2018-01-13 20:16:47.041942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:18:17.131215', '2018-01-13 20:18:17.131215', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:18:17.131215', '2018-01-13 20:18:17.131215', 298486374)[0m
  [1m[35m (165.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.314814"], ["updated_at", "2018-01-13 20:18:17.314814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.318202"], ["updated_at", "2018-01-13 20:18:17.318202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.320277"], ["updated_at", "2018-01-13 20:18:17.320277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.322067"], ["updated_at", "2018-01-13 20:18:17.322067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.323849"], ["updated_at", "2018-01-13 20:18:17.323849"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.325541"], ["updated_at", "2018-01-13 20:18:17.325541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.336610"], ["updated_at", "2018-01-13 20:18:17.336610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.340686"], ["updated_at", "2018-01-13 20:18:17.340686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.349694"], ["updated_at", "2018-01-13 20:18:17.349694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.354042"], ["updated_at", "2018-01-13 20:18:17.354042"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.356384"], ["updated_at", "2018-01-13 20:18:17.356384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (3.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.368391"], ["updated_at", "2018-01-13 20:18:17.368391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.372431"], ["updated_at", "2018-01-13 20:18:17.372431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.375253"], ["updated_at", "2018-01-13 20:18:17.375253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.377936"], ["updated_at", "2018-01-13 20:18:17.377936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.380784"], ["updated_at", "2018-01-13 20:18:17.380784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.390215"], ["updated_at", "2018-01-13 20:18:17.390215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.393021"], ["updated_at", "2018-01-13 20:18:17.393021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.402185"], ["updated_at", "2018-01-13 20:18:17.402185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:18:17.404942"], ["updated_at", "2018-01-13 20:18:17.404942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.407809"], ["updated_at", "2018-01-13 20:18:17.407809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.410565"], ["updated_at", "2018-01-13 20:18:17.410565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
EventTest: test_separated_opening
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.419055"], ["updated_at", "2018-01-13 20:18:17.419055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:18:17.421851"], ["updated_at", "2018-01-13 20:18:17.421851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:00:00"], ["ends_at", "2014-08-05 11:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:18:17.424672"], ["updated_at", "2018-01-13 20:18:17.424672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:21:22.695463', '2018-01-13 20:21:22.695463', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:21:22.695463', '2018-01-13 20:21:22.695463', 298486374)[0m
  [1m[35m (85.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:21:22.801300"], ["updated_at", "2018-01-13 20:21:22.801300"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:21:22.806943"], ["updated_at", "2018-01-13 20:21:22.806943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:21:22.809835"], ["updated_at", "2018-01-13 20:21:22.809835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:21:22.812882"], ["updated_at", "2018-01-13 20:21:22.812882"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:21:22.815742"], ["updated_at", "2018-01-13 20:21:22.815742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:21:22.818600"], ["updated_at", "2018-01-13 20:21:22.818600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
EventTest: test_separated_opening
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:21:22.831565"], ["updated_at", "2018-01-13 20:21:22.831565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:21:22.834518"], ["updated_at", "2018-01-13 20:21:22.834518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:00:00"], ["ends_at", "2014-08-05 11:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:21:22.837394"], ["updated_at", "2018-01-13 20:21:22.837394"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:22:06.909259', '2018-01-13 20:22:06.909259', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:22:06.909259', '2018-01-13 20:22:06.909259', 298486374)[0m
  [1m[35m (94.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.020818"], ["updated_at", "2018-01-13 20:22:07.020818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.023912"], ["updated_at", "2018-01-13 20:22:07.023912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.034770"], ["updated_at", "2018-01-13 20:22:07.034770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.037962"], ["updated_at", "2018-01-13 20:22:07.037962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.041123"], ["updated_at", "2018-01-13 20:22:07.041123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.043926"], ["updated_at", "2018-01-13 20:22:07.043926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.055678"], ["updated_at", "2018-01-13 20:22:07.055678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.058342"], ["updated_at", "2018-01-13 20:22:07.058342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.060936"], ["updated_at", "2018-01-13 20:22:07.060936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.063470"], ["updated_at", "2018-01-13 20:22:07.063470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.066109"], ["updated_at", "2018-01-13 20:22:07.066109"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.073862"], ["updated_at", "2018-01-13 20:22:07.073862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.076623"], ["updated_at", "2018-01-13 20:22:07.076623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.084225"], ["updated_at", "2018-01-13 20:22:07.084225"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:22:07.086955"], ["updated_at", "2018-01-13 20:22:07.086955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.089291"], ["updated_at", "2018-01-13 20:22:07.089291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.091330"], ["updated_at", "2018-01-13 20:22:07.091330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.092863"], ["updated_at", "2018-01-13 20:22:07.092863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.094656"], ["updated_at", "2018-01-13 20:22:07.094656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.100994"], ["updated_at", "2018-01-13 20:22:07.100994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.103246"], ["updated_at", "2018-01-13 20:22:07.103246"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.104951"], ["updated_at", "2018-01-13 20:22:07.104951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
EventTest: test_separated_opening
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.110384"], ["updated_at", "2018-01-13 20:22:07.110384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:22:07.112466"], ["updated_at", "2018-01-13 20:22:07.112466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:00:00"], ["ends_at", "2014-08-05 11:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:22:07.114399"], ["updated_at", "2018-01-13 20:22:07.114399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:23:45.392210', '2018-01-13 20:23:45.392210', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:23:45.392210', '2018-01-13 20:23:45.392210', 298486374)[0m
  [1m[35m (81.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:23:45.487851"], ["updated_at", "2018-01-13 20:23:45.487851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:23:45.490874"], ["updated_at", "2018-01-13 20:23:45.490874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.492563"], ["updated_at", "2018-01-13 20:23:45.492563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.494123"], ["updated_at", "2018-01-13 20:23:45.494123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.503164"], ["updated_at", "2018-01-13 20:23:45.503164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.506414"], ["updated_at", "2018-01-13 20:23:45.506414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.508266"], ["updated_at", "2018-01-13 20:23:45.508266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.509852"], ["updated_at", "2018-01-13 20:23:45.509852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.511504"], ["updated_at", "2018-01-13 20:23:45.511504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:23:45.519192"], ["updated_at", "2018-01-13 20:23:45.519192"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:23:45.521613"], ["updated_at", "2018-01-13 20:23:45.521613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.523563"], ["updated_at", "2018-01-13 20:23:45.523563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.525170"], ["updated_at", "2018-01-13 20:23:45.525170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.526807"], ["updated_at", "2018-01-13 20:23:45.526807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.528455"], ["updated_at", "2018-01-13 20:23:45.528455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.537085"], ["updated_at", "2018-01-13 20:23:45.537085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.539401"], ["updated_at", "2018-01-13 20:23:45.539401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.541201"], ["updated_at", "2018-01-13 20:23:45.541201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:23:45.546409"], ["updated_at", "2018-01-13 20:23:45.546409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.548618"], ["updated_at", "2018-01-13 20:23:45.548618"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
EventTest: test_separated_opening
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.554284"], ["updated_at", "2018-01-13 20:23:45.554284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:23:45.556588"], ["updated_at", "2018-01-13 20:23:45.556588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:23:45.558296"], ["updated_at", "2018-01-13 20:23:45.558296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:26:29.111603', '2018-01-13 20:26:29.111603', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:26:29.111603', '2018-01-13 20:26:29.111603', 298486374)[0m
  [1m[35m (79.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.209936"], ["updated_at", "2018-01-13 20:26:29.209936"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.214497"], ["updated_at", "2018-01-13 20:26:29.214497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.218037"], ["updated_at", "2018-01-13 20:26:29.218037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.220731"], ["updated_at", "2018-01-13 20:26:29.220731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.233720"], ["updated_at", "2018-01-13 20:26:29.233720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.236453"], ["updated_at", "2018-01-13 20:26:29.236453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.238960"], ["updated_at", "2018-01-13 20:26:29.238960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.241438"], ["updated_at", "2018-01-13 20:26:29.241438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.243495"], ["updated_at", "2018-01-13 20:26:29.243495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.251634"], ["updated_at", "2018-01-13 20:26:29.251634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.258186"], ["updated_at", "2018-01-13 20:26:29.258186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.270307"], ["updated_at", "2018-01-13 20:26:29.270307"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.273088"], ["updated_at", "2018-01-13 20:26:29.273088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.275229"], ["updated_at", "2018-01-13 20:26:29.275229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.278081"], ["updated_at", "2018-01-13 20:26:29.278081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.281011"], ["updated_at", "2018-01-13 20:26:29.281011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.282830"], ["updated_at", "2018-01-13 20:26:29.282830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.290932"], ["updated_at", "2018-01-13 20:26:29.290932"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.294340"], ["updated_at", "2018-01-13 20:26:29.294340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.296070"], ["updated_at", "2018-01-13 20:26:29.296070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.302275"], ["updated_at", "2018-01-13 20:26:29.302275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:29.305010"], ["updated_at", "2018-01-13 20:26:29.305010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.307048"], ["updated_at", "2018-01-13 20:26:29.307048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:26:29.312139"], ["updated_at", "2018-01-13 20:26:29.312139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:29.315630"], ["updated_at", "2018-01-13 20:26:29.315630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:26:56.780533', '2018-01-13 20:26:56.780533', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:26:56.780533', '2018-01-13 20:26:56.780533', 298486374)[0m
  [1m[35m (77.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:56.881896"], ["updated_at", "2018-01-13 20:26:56.881896"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:56.886542"], ["updated_at", "2018-01-13 20:26:56.886542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:56.889207"], ["updated_at", "2018-01-13 20:26:56.889207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:56.891563"], ["updated_at", "2018-01-13 20:26:56.891563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:56.894252"], ["updated_at", "2018-01-13 20:26:56.894252"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:56.905318"], ["updated_at", "2018-01-13 20:26:56.905318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:26:56.908057"], ["updated_at", "2018-01-13 20:26:56.908057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:26:56.910064"], ["updated_at", "2018-01-13 20:26:56.910064"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:27:11.030933', '2018-01-13 20:27:11.030933', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:27:11.030933', '2018-01-13 20:27:11.030933', 298486374)[0m
  [1m[35m (94.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.144721"], ["updated_at", "2018-01-13 20:27:11.144721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.148833"], ["updated_at", "2018-01-13 20:27:11.148833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.152196"], ["updated_at", "2018-01-13 20:27:11.152196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.154901"], ["updated_at", "2018-01-13 20:27:11.154901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.157290"], ["updated_at", "2018-01-13 20:27:11.157290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.159700"], ["updated_at", "2018-01-13 20:27:11.159700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.172407"], ["updated_at", "2018-01-13 20:27:11.172407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.175566"], ["updated_at", "2018-01-13 20:27:11.175566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.185439"], ["updated_at", "2018-01-13 20:27:11.185439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.189255"], ["updated_at", "2018-01-13 20:27:11.189255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.195827"], ["updated_at", "2018-01-13 20:27:11.195827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:27:11.198281"], ["updated_at", "2018-01-13 20:27:11.198281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.200420"], ["updated_at", "2018-01-13 20:27:11.200420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.202239"], ["updated_at", "2018-01-13 20:27:11.202239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.207905"], ["updated_at", "2018-01-13 20:27:11.207905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.210252"], ["updated_at", "2018-01-13 20:27:11.210252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.211904"], ["updated_at", "2018-01-13 20:27:11.211904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.213362"], ["updated_at", "2018-01-13 20:27:11.213362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.214784"], ["updated_at", "2018-01-13 20:27:11.214784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.220751"], ["updated_at", "2018-01-13 20:27:11.220751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.226538"], ["updated_at", "2018-01-13 20:27:11.226538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.228330"], ["updated_at", "2018-01-13 20:27:11.228330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.234122"], ["updated_at", "2018-01-13 20:27:11.234122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:27:11.236670"], ["updated_at", "2018-01-13 20:27:11.236670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:27:11.238473"], ["updated_at", "2018-01-13 20:27:11.238473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:28:23.327304', '2018-01-13 20:28:23.327304', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:28:23.327304', '2018-01-13 20:28:23.327304', 298486374)[0m
  [1m[35m (100.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.447824"], ["updated_at", "2018-01-13 20:28:23.447824"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.452437"], ["updated_at", "2018-01-13 20:28:23.452437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.454756"], ["updated_at", "2018-01-13 20:28:23.454756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.456634"], ["updated_at", "2018-01-13 20:28:23.456634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.458446"], ["updated_at", "2018-01-13 20:28:23.458446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:28:23.470837"], ["updated_at", "2018-01-13 20:28:23.470837"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:28:23.474010"], ["updated_at", "2018-01-13 20:28:23.474010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.476711"], ["updated_at", "2018-01-13 20:28:23.476711"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.479285"], ["updated_at", "2018-01-13 20:28:23.479285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.481918"], ["updated_at", "2018-01-13 20:28:23.481918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.484369"], ["updated_at", "2018-01-13 20:28:23.484369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:28:23.493102"], ["updated_at", "2018-01-13 20:28:23.493102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:28:23.495356"], ["updated_at", "2018-01-13 20:28:23.495356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.497641"], ["updated_at", "2018-01-13 20:28:23.497641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.499608"], ["updated_at", "2018-01-13 20:28:23.499608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.505623"], ["updated_at", "2018-01-13 20:28:23.505623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.507745"], ["updated_at", "2018-01-13 20:28:23.507745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.509788"], ["updated_at", "2018-01-13 20:28:23.509788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:28:23.516387"], ["updated_at", "2018-01-13 20:28:23.516387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.518685"], ["updated_at", "2018-01-13 20:28:23.518685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.524374"], ["updated_at", "2018-01-13 20:28:23.524374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:28:23.526887"], ["updated_at", "2018-01-13 20:28:23.526887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:28:23.528790"], ["updated_at", "2018-01-13 20:28:23.528790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:29:42.396424', '2018-01-13 20:29:42.396424', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:29:42.396424', '2018-01-13 20:29:42.396424', 298486374)[0m
  [1m[35m (79.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:29:42.492883"], ["updated_at", "2018-01-13 20:29:42.492883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:29:42.496766"], ["updated_at", "2018-01-13 20:29:42.496766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.499086"], ["updated_at", "2018-01-13 20:29:42.499086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.501205"], ["updated_at", "2018-01-13 20:29:42.501205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.511496"], ["updated_at", "2018-01-13 20:29:42.511496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.513941"], ["updated_at", "2018-01-13 20:29:42.513941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.515859"], ["updated_at", "2018-01-13 20:29:42.515859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.517639"], ["updated_at", "2018-01-13 20:29:42.517639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.519283"], ["updated_at", "2018-01-13 20:29:42.519283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:29:42.526259"], ["updated_at", "2018-01-13 20:29:42.526259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:29:42.529174"], ["updated_at", "2018-01-13 20:29:42.529174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.531142"], ["updated_at", "2018-01-13 20:29:42.531142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.533335"], ["updated_at", "2018-01-13 20:29:42.533335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.535038"], ["updated_at", "2018-01-13 20:29:42.535038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.536732"], ["updated_at", "2018-01-13 20:29:42.536732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.545257"], ["updated_at", "2018-01-13 20:29:42.545257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.547713"], ["updated_at", "2018-01-13 20:29:42.547713"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.549374"], ["updated_at", "2018-01-13 20:29:42.549374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:29:42.554768"], ["updated_at", "2018-01-13 20:29:42.554768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.557526"], ["updated_at", "2018-01-13 20:29:42.557526"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.563497"], ["updated_at", "2018-01-13 20:29:42.563497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:29:42.565918"], ["updated_at", "2018-01-13 20:29:42.565918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:29:42.567679"], ["updated_at", "2018-01-13 20:29:42.567679"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:30:08.535396', '2018-01-13 20:30:08.535396', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:30:08.535396', '2018-01-13 20:30:08.535396', 298486374)[0m
  [1m[35m (74.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.631589"], ["updated_at", "2018-01-13 20:30:08.631589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.635404"], ["updated_at", "2018-01-13 20:30:08.635404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.639110"], ["updated_at", "2018-01-13 20:30:08.639110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.641709"], ["updated_at", "2018-01-13 20:30:08.641709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.644390"], ["updated_at", "2018-01-13 20:30:08.644390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.646852"], ["updated_at", "2018-01-13 20:30:08.646852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.658083"], ["updated_at", "2018-01-13 20:30:08.658083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.661660"], ["updated_at", "2018-01-13 20:30:08.661660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.663994"], ["updated_at", "2018-01-13 20:30:08.663994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.670799"], ["updated_at", "2018-01-13 20:30:08.670799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.673452"], ["updated_at", "2018-01-13 20:30:08.673452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.675941"], ["updated_at", "2018-01-13 20:30:08.675941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.678279"], ["updated_at", "2018-01-13 20:30:08.678279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.680534"], ["updated_at", "2018-01-13 20:30:08.680534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.688838"], ["updated_at", "2018-01-13 20:30:08.688838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.691684"], ["updated_at", "2018-01-13 20:30:08.691684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.699183"], ["updated_at", "2018-01-13 20:30:08.699183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.701720"], ["updated_at", "2018-01-13 20:30:08.701720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.704197"], ["updated_at", "2018-01-13 20:30:08.704197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.710700"], ["updated_at", "2018-01-13 20:30:08.710700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.713240"], ["updated_at", "2018-01-13 20:30:08.713240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.723005"], ["updated_at", "2018-01-13 20:30:08.723005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:08.725942"], ["updated_at", "2018-01-13 20:30:08.725942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:08.728574"], ["updated_at", "2018-01-13 20:30:08.728574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:08.730944"], ["updated_at", "2018-01-13 20:30:08.730944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:30:38.713408', '2018-01-13 20:30:38.713408', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:30:38.713408', '2018-01-13 20:30:38.713408', 298486374)[0m
  [1m[35m (75.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.807632"], ["updated_at", "2018-01-13 20:30:38.807632"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.812588"], ["updated_at", "2018-01-13 20:30:38.812588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.814838"], ["updated_at", "2018-01-13 20:30:38.814838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.816662"], ["updated_at", "2018-01-13 20:30:38.816662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.819083"], ["updated_at", "2018-01-13 20:30:38.819083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.829989"], ["updated_at", "2018-01-13 20:30:38.829989"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.832949"], ["updated_at", "2018-01-13 20:30:38.832949"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.834951"], ["updated_at", "2018-01-13 20:30:38.834951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.842355"], ["updated_at", "2018-01-13 20:30:38.842355"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.845204"], ["updated_at", "2018-01-13 20:30:38.845204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.852396"], ["updated_at", "2018-01-13 20:30:38.852396"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.855331"], ["updated_at", "2018-01-13 20:30:38.855331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.857458"], ["updated_at", "2018-01-13 20:30:38.857458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.859904"], ["updated_at", "2018-01-13 20:30:38.859904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.861658"], ["updated_at", "2018-01-13 20:30:38.861658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.863246"], ["updated_at", "2018-01-13 20:30:38.863246"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.870063"], ["updated_at", "2018-01-13 20:30:38.870063"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.872772"], ["updated_at", "2018-01-13 20:30:38.872772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.874641"], ["updated_at", "2018-01-13 20:30:38.874641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.876302"], ["updated_at", "2018-01-13 20:30:38.876302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:30:38.882259"], ["updated_at", "2018-01-13 20:30:38.882259"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.884649"], ["updated_at", "2018-01-13 20:30:38.884649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.892559"], ["updated_at", "2018-01-13 20:30:38.892559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2018-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:30:38.895061"], ["updated_at", "2018-01-13 20:30:38.895061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:30:38.897020"], ["updated_at", "2018-01-13 20:30:38.897020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:33:01.542477', '2018-01-13 20:33:01.542477', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:33:01.542477', '2018-01-13 20:33:01.542477', 298486374)[0m
  [1m[35m (72.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.630926"], ["updated_at", "2018-01-13 20:33:01.630926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.634280"], ["updated_at", "2018-01-13 20:33:01.634280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.640675"], ["updated_at", "2018-01-13 20:33:01.640675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.649731"], ["updated_at", "2018-01-13 20:33:01.649731"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.652340"], ["updated_at", "2018-01-13 20:33:01.652340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.654206"], ["updated_at", "2018-01-13 20:33:01.654206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.655953"], ["updated_at", "2018-01-13 20:33:01.655953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.662081"], ["updated_at", "2018-01-13 20:33:01.662081"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.664647"], ["updated_at", "2018-01-13 20:33:01.664647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.667497"], ["updated_at", "2018-01-13 20:33:01.667497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.669562"], ["updated_at", "2018-01-13 20:33:01.669562"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.672269"], ["updated_at", "2018-01-13 20:33:01.672269"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.679329"], ["updated_at", "2018-01-13 20:33:01.679329"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.681739"], ["updated_at", "2018-01-13 20:33:01.681739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.688327"], ["updated_at", "2018-01-13 20:33:01.688327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.690699"], ["updated_at", "2018-01-13 20:33:01.690699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:33:01.692455"], ["updated_at", "2018-01-13 20:33:01.692455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.693997"], ["updated_at", "2018-01-13 20:33:01.693997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.695509"], ["updated_at", "2018-01-13 20:33:01.695509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.697013"], ["updated_at", "2018-01-13 20:33:01.697013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.705783"], ["updated_at", "2018-01-13 20:33:01.705783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.708507"], ["updated_at", "2018-01-13 20:33:01.708507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.710147"], ["updated_at", "2018-01-13 20:33:01.710147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:33:01.716474"], ["updated_at", "2018-01-13 20:33:01.716474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:33:01.719081"], ["updated_at", "2018-01-13 20:33:01.719081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:34:17.292264', '2018-01-13 20:34:17.292264', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:34:17.292264', '2018-01-13 20:34:17.292264', 298486374)[0m
  [1m[35m (115.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:34:17.425275"], ["updated_at", "2018-01-13 20:34:17.425275"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:34:17.428534"], ["updated_at", "2018-01-13 20:34:17.428534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:35:25.114806', '2018-01-13 20:35:25.114806', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:35:25.114806', '2018-01-13 20:35:25.114806', 298486374)[0m
  [1m[35m (127.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.262211"], ["updated_at", "2018-01-13 20:35:25.262211"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.267736"], ["updated_at", "2018-01-13 20:35:25.267736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.278200"], ["updated_at", "2018-01-13 20:35:25.278200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.280877"], ["updated_at", "2018-01-13 20:35:25.280877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.282741"], ["updated_at", "2018-01-13 20:35:25.282741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.289256"], ["updated_at", "2018-01-13 20:35:25.289256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.292691"], ["updated_at", "2018-01-13 20:35:25.292691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.294766"], ["updated_at", "2018-01-13 20:35:25.294766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.296494"], ["updated_at", "2018-01-13 20:35:25.296494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.298076"], ["updated_at", "2018-01-13 20:35:25.298076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (2.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.310067"], ["updated_at", "2018-01-13 20:35:25.310067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.312275"], ["updated_at", "2018-01-13 20:35:25.312275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.313984"], ["updated_at", "2018-01-13 20:35:25.313984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.315437"], ["updated_at", "2018-01-13 20:35:25.315437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.316983"], ["updated_at", "2018-01-13 20:35:25.316983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.318794"], ["updated_at", "2018-01-13 20:35:25.318794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.325086"], ["updated_at", "2018-01-13 20:35:25.325086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.327429"], ["updated_at", "2018-01-13 20:35:25.327429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.333404"], ["updated_at", "2018-01-13 20:35:25.333404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.335791"], ["updated_at", "2018-01-13 20:35:25.335791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.338175"], ["updated_at", "2018-01-13 20:35:25.338175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.344837"], ["updated_at", "2018-01-13 20:35:25.344837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:35:25.347202"], ["updated_at", "2018-01-13 20:35:25.347202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:35:25.349072"], ["updated_at", "2018-01-13 20:35:25.349072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:35:25.352175"], ["updated_at", "2018-01-13 20:35:25.352175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:38:04.928475', '2018-01-13 20:38:04.928475', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:38:04.928475', '2018-01-13 20:38:04.928475', 298486374)[0m
  [1m[35m (97.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:38:05.041675"], ["updated_at", "2018-01-13 20:38:05.041675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:38:05.044804"], ["updated_at", "2018-01-13 20:38:05.044804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:40:44.509883', '2018-01-13 20:40:44.509883', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:40:44.509883', '2018-01-13 20:40:44.509883', 298486374)[0m
  [1m[35m (78.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:15:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:40:44.606618"], ["updated_at", "2018-01-13 20:40:44.606618"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:15:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:40:44.610540"], ["updated_at", "2018-01-13 20:40:44.610540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:40:44.613634"], ["updated_at", "2018-01-13 20:40:44.613634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:41:04.451862', '2018-01-13 20:41:04.451862', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:41:04.451862', '2018-01-13 20:41:04.451862', 298486374)[0m
  [1m[35m (80.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:41:04.557955"], ["updated_at", "2018-01-13 20:41:04.557955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.561519"], ["updated_at", "2018-01-13 20:41:04.561519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.563792"], ["updated_at", "2018-01-13 20:41:04.563792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.565823"], ["updated_at", "2018-01-13 20:41:04.565823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.567789"], ["updated_at", "2018-01-13 20:41:04.567789"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.579704"], ["updated_at", "2018-01-13 20:41:04.579704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.582522"], ["updated_at", "2018-01-13 20:41:04.582522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.584822"], ["updated_at", "2018-01-13 20:41:04.584822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:41:04.593393"], ["updated_at", "2018-01-13 20:41:04.593393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:41:04.597408"], ["updated_at", "2018-01-13 20:41:04.597408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:41:04.600409"], ["updated_at", "2018-01-13 20:41:04.600409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:04.602315"], ["updated_at", "2018-01-13 20:41:04.602315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:41:51.297747', '2018-01-13 20:41:51.297747', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:41:51.297747', '2018-01-13 20:41:51.297747', 298486374)[0m
  [1m[35m (81.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:41:51.392912"], ["updated_at", "2018-01-13 20:41:51.392912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:51.395740"], ["updated_at", "2018-01-13 20:41:51.395740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:51.397595"], ["updated_at", "2018-01-13 20:41:51.397595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:51.399292"], ["updated_at", "2018-01-13 20:41:51.399292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:51.400797"], ["updated_at", "2018-01-13 20:41:51.400797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:41:51.410322"], ["updated_at", "2018-01-13 20:41:51.410322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:41:51.412588"], ["updated_at", "2018-01-13 20:41:51.412588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:44:05.544087', '2018-01-13 20:44:05.544087', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:44:05.544087', '2018-01-13 20:44:05.544087', 298486374)[0m
  [1m[35m (61.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.621686"], ["updated_at", "2018-01-13 20:44:05.621686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.624766"], ["updated_at", "2018-01-13 20:44:05.624766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.634514"], ["updated_at", "2018-01-13 20:44:05.634514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.637008"], ["updated_at", "2018-01-13 20:44:05.637008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.639095"], ["updated_at", "2018-01-13 20:44:05.639095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.640815"], ["updated_at", "2018-01-13 20:44:05.640815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.642421"], ["updated_at", "2018-01-13 20:44:05.642421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.644204"], ["updated_at", "2018-01-13 20:44:05.644204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.655608"], ["updated_at", "2018-01-13 20:44:05.655608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.658192"], ["updated_at", "2018-01-13 20:44:05.658192"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.660704"], ["updated_at", "2018-01-13 20:44:05.660704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.667553"], ["updated_at", "2018-01-13 20:44:05.667553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.669914"], ["updated_at", "2018-01-13 20:44:05.669914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.676038"], ["updated_at", "2018-01-13 20:44:05.676038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.678371"], ["updated_at", "2018-01-13 20:44:05.678371"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.680005"], ["updated_at", "2018-01-13 20:44:05.680005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.681462"], ["updated_at", "2018-01-13 20:44:05.681462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.682881"], ["updated_at", "2018-01-13 20:44:05.682881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.688483"], ["updated_at", "2018-01-13 20:44:05.688483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.690941"], ["updated_at", "2018-01-13 20:44:05.690941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.693086"], ["updated_at", "2018-01-13 20:44:05.693086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.698585"], ["updated_at", "2018-01-13 20:44:05.698585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:44:05.701310"], ["updated_at", "2018-01-13 20:44:05.701310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:44:05.703580"], ["updated_at", "2018-01-13 20:44:05.703580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:44:05.705246"], ["updated_at", "2018-01-13 20:44:05.705246"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:47:48.748456', '2018-01-13 20:47:48.748456', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:47:48.748456', '2018-01-13 20:47:48.748456', 298486374)[0m
  [1m[35m (96.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:47:48.868809"], ["updated_at", "2018-01-13 20:47:48.868809"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:47:48.874004"], ["updated_at", "2018-01-13 20:47:48.874004"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:47:48.888147"], ["updated_at", "2018-01-13 20:47:48.888147"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:47:48.891838"], ["updated_at", "2018-01-13 20:47:48.891838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:47:48.894831"], ["updated_at", "2018-01-13 20:47:48.894831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:47:48.905078"], ["updated_at", "2018-01-13 20:47:48.905078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:47:48.908777"], ["updated_at", "2018-01-13 20:47:48.908777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:48:43.236562', '2018-01-13 20:48:43.236562', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:48:43.236562', '2018-01-13 20:48:43.236562', 298486374)[0m
  [1m[35m (79.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.331861"], ["updated_at", "2018-01-13 20:48:43.331861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.336076"], ["updated_at", "2018-01-13 20:48:43.336076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.348270"], ["updated_at", "2018-01-13 20:48:43.348270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.351881"], ["updated_at", "2018-01-13 20:48:43.351881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.361176"], ["updated_at", "2018-01-13 20:48:43.361176"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.364572"], ["updated_at", "2018-01-13 20:48:43.364572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.367086"], ["updated_at", "2018-01-13 20:48:43.367086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.369502"], ["updated_at", "2018-01-13 20:48:43.369502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.372002"], ["updated_at", "2018-01-13 20:48:43.372002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.374721"], ["updated_at", "2018-01-13 20:48:43.374721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.384629"], ["updated_at", "2018-01-13 20:48:43.384629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.387188"], ["updated_at", "2018-01-13 20:48:43.387188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.388870"], ["updated_at", "2018-01-13 20:48:43.388870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.394134"], ["updated_at", "2018-01-13 20:48:43.394134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.396371"], ["updated_at", "2018-01-13 20:48:43.396371"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.397965"], ["updated_at", "2018-01-13 20:48:43.397965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.402989"], ["updated_at", "2018-01-13 20:48:43.402989"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.405829"], ["updated_at", "2018-01-13 20:48:43.405829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.408406"], ["updated_at", "2018-01-13 20:48:43.408406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.410718"], ["updated_at", "2018-01-13 20:48:43.410718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.418452"], ["updated_at", "2018-01-13 20:48:43.418452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.421049"], ["updated_at", "2018-01-13 20:48:43.421049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.423204"], ["updated_at", "2018-01-13 20:48:43.423204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.424591"], ["updated_at", "2018-01-13 20:48:43.424591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:48:43.426067"], ["updated_at", "2018-01-13 20:48:43.426067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:48:43.432171"], ["updated_at", "2018-01-13 20:48:43.432171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:48:43.435198"], ["updated_at", "2018-01-13 20:48:43.435198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:49:10.759935', '2018-01-13 20:49:10.759935', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:49:10.759935', '2018-01-13 20:49:10.759935', 298486374)[0m
  [1m[35m (101.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:49:10.885070"], ["updated_at", "2018-01-13 20:49:10.885070"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:49:10.892334"], ["updated_at", "2018-01-13 20:49:10.892334"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (3.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:49:10.910069"], ["updated_at", "2018-01-13 20:49:10.910069"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.914110"], ["updated_at", "2018-01-13 20:49:10.914110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.917368"], ["updated_at", "2018-01-13 20:49:10.917368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.920662"], ["updated_at", "2018-01-13 20:49:10.920662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.923620"], ["updated_at", "2018-01-13 20:49:10.923620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:49:10.933494"], ["updated_at", "2018-01-13 20:49:10.933494"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:49:10.936385"], ["updated_at", "2018-01-13 20:49:10.936385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:49:10.938591"], ["updated_at", "2018-01-13 20:49:10.938591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.940689"], ["updated_at", "2018-01-13 20:49:10.940689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.942796"], ["updated_at", "2018-01-13 20:49:10.942796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:49:10.944560"], ["updated_at", "2018-01-13 20:49:10.944560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:49:10.951999"], ["updated_at", "2018-01-13 20:49:10.951999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:49:10.955144"], ["updated_at", "2018-01-13 20:49:10.955144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:52:14.996683', '2018-01-13 20:52:14.996683', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 20:52:14.996683', '2018-01-13 20:52:14.996683', 298486374)[0m
  [1m[35m (94.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.110142"], ["updated_at", "2018-01-13 20:52:15.110142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.113922"], ["updated_at", "2018-01-13 20:52:15.113922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.125410"], ["updated_at", "2018-01-13 20:52:15.125410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.128658"], ["updated_at", "2018-01-13 20:52:15.128658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.130795"], ["updated_at", "2018-01-13 20:52:15.130795"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.132712"], ["updated_at", "2018-01-13 20:52:15.132712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.139972"], ["updated_at", "2018-01-13 20:52:15.139972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.143722"], ["updated_at", "2018-01-13 20:52:15.143722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.145966"], ["updated_at", "2018-01-13 20:52:15.145966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.151821"], ["updated_at", "2018-01-13 20:52:15.151821"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.155188"], ["updated_at", "2018-01-13 20:52:15.155188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.158314"], ["updated_at", "2018-01-13 20:52:15.158314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.166211"], ["updated_at", "2018-01-13 20:52:15.166211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.170347"], ["updated_at", "2018-01-13 20:52:15.170347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.172115"], ["updated_at", "2018-01-13 20:52:15.172115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.173769"], ["updated_at", "2018-01-13 20:52:15.173769"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.175414"], ["updated_at", "2018-01-13 20:52:15.175414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.181399"], ["updated_at", "2018-01-13 20:52:15.181399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.183629"], ["updated_at", "2018-01-13 20:52:15.183629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.185362"], ["updated_at", "2018-01-13 20:52:15.185362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.187392"], ["updated_at", "2018-01-13 20:52:15.187392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.189578"], ["updated_at", "2018-01-13 20:52:15.189578"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.191934"], ["updated_at", "2018-01-13 20:52:15.191934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.199354"], ["updated_at", "2018-01-13 20:52:15.199354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 20:52:15.201511"], ["updated_at", "2018-01-13 20:52:15.201511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 20:52:15.207334"], ["updated_at", "2018-01-13 20:52:15.207334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 20:52:15.209276"], ["updated_at", "2018-01-13 20:52:15.209276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:00:01.842686', '2018-01-13 21:00:01.842686', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:00:01.842686', '2018-01-13 21:00:01.842686', 298486374)[0m
  [1m[35m (120.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:01.981166"], ["updated_at", "2018-01-13 21:00:01.981166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:01.985276"], ["updated_at", "2018-01-13 21:00:01.985276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:01.994708"], ["updated_at", "2018-01-13 21:00:01.994708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:01.997597"], ["updated_at", "2018-01-13 21:00:01.997597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:01.999591"], ["updated_at", "2018-01-13 21:00:01.999591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.007031"], ["updated_at", "2018-01-13 21:00:02.007031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.009414"], ["updated_at", "2018-01-13 21:00:02.009414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.011325"], ["updated_at", "2018-01-13 21:00:02.011325"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:02.017320"], ["updated_at", "2018-01-13 21:00:02.017320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:02.020046"], ["updated_at", "2018-01-13 21:00:02.020046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.023369"], ["updated_at", "2018-01-13 21:00:02.023369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.026154"], ["updated_at", "2018-01-13 21:00:02.026154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.028213"], ["updated_at", "2018-01-13 21:00:02.028213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.029845"], ["updated_at", "2018-01-13 21:00:02.029845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.036421"], ["updated_at", "2018-01-13 21:00:02.036421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.038914"], ["updated_at", "2018-01-13 21:00:02.038914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.040881"], ["updated_at", "2018-01-13 21:00:02.040881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.042515"], ["updated_at", "2018-01-13 21:00:02.042515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.047527"], ["updated_at", "2018-01-13 21:00:02.047527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:02.054871"], ["updated_at", "2018-01-13 21:00:02.054871"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:02.057672"], ["updated_at", "2018-01-13 21:00:02.057672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.059849"], ["updated_at", "2018-01-13 21:00:02.059849"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.061441"], ["updated_at", "2018-01-13 21:00:02.061441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:00:02.067330"], ["updated_at", "2018-01-13 21:00:02.067330"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:00:02.069873"], ["updated_at", "2018-01-13 21:00:02.069873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.077577"], ["updated_at", "2018-01-13 21:00:02.077577"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.079937"], ["updated_at", "2018-01-13 21:00:02.079937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:00:02.081643"], ["updated_at", "2018-01-13 21:00:02.081643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:03:21.329484', '2018-01-13 21:03:21.329484', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:03:21.329484', '2018-01-13 21:03:21.329484', 298486374)[0m
  [1m[35m (73.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.419667"], ["updated_at", "2018-01-13 21:03:21.419667"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.422876"], ["updated_at", "2018-01-13 21:03:21.422876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.424646"], ["updated_at", "2018-01-13 21:03:21.424646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.432638"], ["updated_at", "2018-01-13 21:03:21.432638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.435470"], ["updated_at", "2018-01-13 21:03:21.435470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.441754"], ["updated_at", "2018-01-13 21:03:21.441754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.443788"], ["updated_at", "2018-01-13 21:03:21.443788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.445530"], ["updated_at", "2018-01-13 21:03:21.445530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.452941"], ["updated_at", "2018-01-13 21:03:21.452941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.456290"], ["updated_at", "2018-01-13 21:03:21.456290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.458027"], ["updated_at", "2018-01-13 21:03:21.458027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.459841"], ["updated_at", "2018-01-13 21:03:21.459841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.465733"], ["updated_at", "2018-01-13 21:03:21.465733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.468215"], ["updated_at", "2018-01-13 21:03:21.468215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.469940"], ["updated_at", "2018-01-13 21:03:21.469940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.471678"], ["updated_at", "2018-01-13 21:03:21.471678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.473383"], ["updated_at", "2018-01-13 21:03:21.473383"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.480787"], ["updated_at", "2018-01-13 21:03:21.480787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.483004"], ["updated_at", "2018-01-13 21:03:21.483004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.484660"], ["updated_at", "2018-01-13 21:03:21.484660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.486079"], ["updated_at", "2018-01-13 21:03:21.486079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.487577"], ["updated_at", "2018-01-13 21:03:21.487577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.489252"], ["updated_at", "2018-01-13 21:03:21.489252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:03:21.495935"], ["updated_at", "2018-01-13 21:03:21.495935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.498142"], ["updated_at", "2018-01-13 21:03:21.498142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.503617"], ["updated_at", "2018-01-13 21:03:21.503617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:03:21.506086"], ["updated_at", "2018-01-13 21:03:21.506086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:03:21.507807"], ["updated_at", "2018-01-13 21:03:21.507807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:05:41.805893', '2018-01-13 21:05:41.805893', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:05:41.805893', '2018-01-13 21:05:41.805893', 298486374)[0m
  [1m[35m (114.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:41.940275"], ["updated_at", "2018-01-13 21:05:41.940275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:41.944119"], ["updated_at", "2018-01-13 21:05:41.944119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:41.946417"], ["updated_at", "2018-01-13 21:05:41.946417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:41.948992"], ["updated_at", "2018-01-13 21:05:41.948992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:41.958157"], ["updated_at", "2018-01-13 21:05:41.958157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:41.960961"], ["updated_at", "2018-01-13 21:05:41.960961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:41.962988"], ["updated_at", "2018-01-13 21:05:41.962988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:41.969189"], ["updated_at", "2018-01-13 21:05:41.969189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:41.972258"], ["updated_at", "2018-01-13 21:05:41.972258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:41.975524"], ["updated_at", "2018-01-13 21:05:41.975524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:05:58.932299', '2018-01-13 21:05:58.932299', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:05:58.932299', '2018-01-13 21:05:58.932299', 298486374)[0m
  [1m[35m (101.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.054533"], ["updated_at", "2018-01-13 21:05:59.054533"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.059695"], ["updated_at", "2018-01-13 21:05:59.059695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.062920"], ["updated_at", "2018-01-13 21:05:59.062920"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.065908"], ["updated_at", "2018-01-13 21:05:59.065908"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.080101"], ["updated_at", "2018-01-13 21:05:59.080101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.083227"], ["updated_at", "2018-01-13 21:05:59.083227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.086177"], ["updated_at", "2018-01-13 21:05:59.086177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.094671"], ["updated_at", "2018-01-13 21:05:59.094671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.097398"], ["updated_at", "2018-01-13 21:05:59.097398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.105149"], ["updated_at", "2018-01-13 21:05:59.105149"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.108589"], ["updated_at", "2018-01-13 21:05:59.108589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.111158"], ["updated_at", "2018-01-13 21:05:59.111158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.112751"], ["updated_at", "2018-01-13 21:05:59.112751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.114230"], ["updated_at", "2018-01-13 21:05:59.114230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.120096"], ["updated_at", "2018-01-13 21:05:59.120096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.122295"], ["updated_at", "2018-01-13 21:05:59.122295"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.124152"], ["updated_at", "2018-01-13 21:05:59.124152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.125739"], ["updated_at", "2018-01-13 21:05:59.125739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.127239"], ["updated_at", "2018-01-13 21:05:59.127239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.128738"], ["updated_at", "2018-01-13 21:05:59.128738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.135196"], ["updated_at", "2018-01-13 21:05:59.135196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.138523"], ["updated_at", "2018-01-13 21:05:59.138523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.140939"], ["updated_at", "2018-01-13 21:05:59.140939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.143137"], ["updated_at", "2018-01-13 21:05:59.143137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:05:59.149552"], ["updated_at", "2018-01-13 21:05:59.149552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.151672"], ["updated_at", "2018-01-13 21:05:59.151672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.157457"], ["updated_at", "2018-01-13 21:05:59.157457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:05:59.159641"], ["updated_at", "2018-01-13 21:05:59.159641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:05:59.161509"], ["updated_at", "2018-01-13 21:05:59.161509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:27:07.297123', '2018-01-13 21:27:07.297123', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:27:07.297123', '2018-01-13 21:27:07.297123', 298486374)[0m
  [1m[35m (85.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:27:07.406917"], ["updated_at", "2018-01-13 21:27:07.406917"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:27:07.411866"], ["updated_at", "2018-01-13 21:27:07.411866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:27:07.415671"], ["updated_at", "2018-01-13 21:27:07.415671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:27:07.418492"], ["updated_at", "2018-01-13 21:27:07.418492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:27:07.421306"], ["updated_at", "2018-01-13 21:27:07.421306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:28:25.707791', '2018-01-13 21:28:25.707791', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:28:25.707791', '2018-01-13 21:28:25.707791', 298486374)[0m
  [1m[35m (101.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.830014"], ["updated_at", "2018-01-13 21:28:25.830014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.834700"], ["updated_at", "2018-01-13 21:28:25.834700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.837717"], ["updated_at", "2018-01-13 21:28:25.837717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.840979"], ["updated_at", "2018-01-13 21:28:25.840979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.843538"], ["updated_at", "2018-01-13 21:28:25.843538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.845865"], ["updated_at", "2018-01-13 21:28:25.845865"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.858970"], ["updated_at", "2018-01-13 21:28:25.858970"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.862762"], ["updated_at", "2018-01-13 21:28:25.862762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.865334"], ["updated_at", "2018-01-13 21:28:25.865334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.867968"], ["updated_at", "2018-01-13 21:28:25.867968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.870297"], ["updated_at", "2018-01-13 21:28:25.870297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.878791"], ["updated_at", "2018-01-13 21:28:25.878791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.881702"], ["updated_at", "2018-01-13 21:28:25.881702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.883883"], ["updated_at", "2018-01-13 21:28:25.883883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.886303"], ["updated_at", "2018-01-13 21:28:25.886303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.894744"], ["updated_at", "2018-01-13 21:28:25.894744"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.898166"], ["updated_at", "2018-01-13 21:28:25.898166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.900462"], ["updated_at", "2018-01-13 21:28:25.900462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.907092"], ["updated_at", "2018-01-13 21:28:25.907092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.909811"], ["updated_at", "2018-01-13 21:28:25.909811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.911893"], ["updated_at", "2018-01-13 21:28:25.911893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.917822"], ["updated_at", "2018-01-13 21:28:25.917822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.920414"], ["updated_at", "2018-01-13 21:28:25.920414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.924427"], ["updated_at", "2018-01-13 21:28:25.924427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.926527"], ["updated_at", "2018-01-13 21:28:25.926527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.933661"], ["updated_at", "2018-01-13 21:28:25.933661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:28:25.936220"], ["updated_at", "2018-01-13 21:28:25.936220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:28:25.944055"], ["updated_at", "2018-01-13 21:28:25.944055"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:28:25.946933"], ["updated_at", "2018-01-13 21:28:25.946933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.7ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:37:26.556043', '2018-01-13 21:37:26.556043', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:37:26.556043', '2018-01-13 21:37:26.556043', 298486374)[0m
  [1m[35m (83.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:37:26.664416"], ["updated_at", "2018-01-13 21:37:26.664416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.669014"], ["updated_at", "2018-01-13 21:37:26.669014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.672291"], ["updated_at", "2018-01-13 21:37:26.672291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.675074"], ["updated_at", "2018-01-13 21:37:26.675074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.677706"], ["updated_at", "2018-01-13 21:37:26.677706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:37:26.689736"], ["updated_at", "2018-01-13 21:37:26.689736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:37:26.693694"], ["updated_at", "2018-01-13 21:37:26.693694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.696238"], ["updated_at", "2018-01-13 21:37:26.696238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:37:26.705130"], ["updated_at", "2018-01-13 21:37:26.705130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:37:26.708323"], ["updated_at", "2018-01-13 21:37:26.708323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:37:26.710796"], ["updated_at", "2018-01-13 21:37:26.710796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.713059"], ["updated_at", "2018-01-13 21:37:26.713059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:37:26.721137"], ["updated_at", "2018-01-13 21:37:26.721137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:37:26.724910"], ["updated_at", "2018-01-13 21:37:26.724910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:37:26.727240"], ["updated_at", "2018-01-13 21:37:26.727240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.729241"], ["updated_at", "2018-01-13 21:37:26.729241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.731221"], ["updated_at", "2018-01-13 21:37:26.731221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:37:26.733391"], ["updated_at", "2018-01-13 21:37:26.733391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:38:20.460808', '2018-01-13 21:38:20.460808', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:38:20.460808', '2018-01-13 21:38:20.460808', 298486374)[0m
  [1m[35m (113.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:38:20.597106"], ["updated_at", "2018-01-13 21:38:20.597106"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:38:20.602117"], ["updated_at", "2018-01-13 21:38:20.602117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:38:20.606016"], ["updated_at", "2018-01-13 21:38:20.606016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:38:20.609022"], ["updated_at", "2018-01-13 21:38:20.609022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:38:20.623368"], ["updated_at", "2018-01-13 21:38:20.623368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:38:20.627843"], ["updated_at", "2018-01-13 21:38:20.627843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:38:20.630794"], ["updated_at", "2018-01-13 21:38:20.630794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:38:20.633981"], ["updated_at", "2018-01-13 21:38:20.633981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:38:20.636282"], ["updated_at", "2018-01-13 21:38:20.636282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:38:20.638706"], ["updated_at", "2018-01-13 21:38:20.638706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:51:09.905685', '2018-01-13 21:51:09.905685', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:51:09.905685', '2018-01-13 21:51:09.905685', 298486374)[0m
  [1m[35m (72.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:10.001858"], ["updated_at", "2018-01-13 21:51:10.001858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:10.005763"], ["updated_at", "2018-01-13 21:51:10.005763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:29.699270"], ["updated_at", "2018-01-13 21:51:29.699270"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:29.704307"], ["updated_at", "2018-01-13 21:51:29.704307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:29.707771"], ["updated_at", "2018-01-13 21:51:29.707771"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:29.713063"], ["updated_at", "2018-01-13 21:51:29.713063"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:33.669022"], ["updated_at", "2018-01-13 21:51:33.669022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:33.676037"], ["updated_at", "2018-01-13 21:51:33.676037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:33.679168"], ["updated_at", "2018-01-13 21:51:33.679168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:33.681775"], ["updated_at", "2018-01-13 21:51:33.681775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:33.684267"], ["updated_at", "2018-01-13 21:51:33.684267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:33.687248"], ["updated_at", "2018-01-13 21:51:33.687248"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:51:54.227209', '2018-01-13 21:51:54.227209', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:51:54.227209', '2018-01-13 21:51:54.227209', 298486374)[0m
  [1m[35m (97.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.343073"], ["updated_at", "2018-01-13 21:51:54.343073"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.346540"], ["updated_at", "2018-01-13 21:51:54.346540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.349062"], ["updated_at", "2018-01-13 21:51:54.349062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.358957"], ["updated_at", "2018-01-13 21:51:54.358957"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.361503"], ["updated_at", "2018-01-13 21:51:54.361503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.369259"], ["updated_at", "2018-01-13 21:51:54.369259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.371857"], ["updated_at", "2018-01-13 21:51:54.371857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.374604"], ["updated_at", "2018-01-13 21:51:54.374604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.376387"], ["updated_at", "2018-01-13 21:51:54.376387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.378145"], ["updated_at", "2018-01-13 21:51:54.378145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.380095"], ["updated_at", "2018-01-13 21:51:54.380095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.387946"], ["updated_at", "2018-01-13 21:51:54.387946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.391431"], ["updated_at", "2018-01-13 21:51:54.391431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.394167"], ["updated_at", "2018-01-13 21:51:54.394167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.396174"], ["updated_at", "2018-01-13 21:51:54.396174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.398021"], ["updated_at", "2018-01-13 21:51:54.398021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.405276"], ["updated_at", "2018-01-13 21:51:54.405276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.407593"], ["updated_at", "2018-01-13 21:51:54.407593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.409502"], ["updated_at", "2018-01-13 21:51:54.409502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.411376"], ["updated_at", "2018-01-13 21:51:54.411376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.417599"], ["updated_at", "2018-01-13 21:51:54.417599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.420124"], ["updated_at", "2018-01-13 21:51:54.420124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:51:54.428447"], ["updated_at", "2018-01-13 21:51:54.428447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.430965"], ["updated_at", "2018-01-13 21:51:54.430965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:51:54.433535"], ["updated_at", "2018-01-13 21:51:54.433535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.435568"], ["updated_at", "2018-01-13 21:51:54.435568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.446433"], ["updated_at", "2018-01-13 21:51:54.446433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.449028"], ["updated_at", "2018-01-13 21:51:54.449028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:51:54.451305"], ["updated_at", "2018-01-13 21:51:54.451305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:55:13.533465', '2018-01-13 21:55:13.533465', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 21:55:13.533465', '2018-01-13 21:55:13.533465', 298486374)[0m
  [1m[35m (85.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.643297"], ["updated_at", "2018-01-13 21:55:13.643297"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.647839"], ["updated_at", "2018-01-13 21:55:13.647839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.650638"], ["updated_at", "2018-01-13 21:55:13.650638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.653257"], ["updated_at", "2018-01-13 21:55:13.653257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.664653"], ["updated_at", "2018-01-13 21:55:13.664653"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.668179"], ["updated_at", "2018-01-13 21:55:13.668179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.670638"], ["updated_at", "2018-01-13 21:55:13.670638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.680608"], ["updated_at", "2018-01-13 21:55:13.680608"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.683785"], ["updated_at", "2018-01-13 21:55:13.683785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.685934"], ["updated_at", "2018-01-13 21:55:13.685934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.687981"], ["updated_at", "2018-01-13 21:55:13.687981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.698036"], ["updated_at", "2018-01-13 21:55:13.698036"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.700846"], ["updated_at", "2018-01-13 21:55:13.700846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.702955"], ["updated_at", "2018-01-13 21:55:13.702955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.705002"], ["updated_at", "2018-01-13 21:55:13.705002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.706971"], ["updated_at", "2018-01-13 21:55:13.706971"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.714599"], ["updated_at", "2018-01-13 21:55:13.714599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.717236"], ["updated_at", "2018-01-13 21:55:13.717236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.723985"], ["updated_at", "2018-01-13 21:55:13.723985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.726900"], ["updated_at", "2018-01-13 21:55:13.726900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.735229"], ["updated_at", "2018-01-13 21:55:13.735229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 21:55:13.737450"], ["updated_at", "2018-01-13 21:55:13.737450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 21:55:13.739280"], ["updated_at", "2018-01-13 21:55:13.739280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.741035"], ["updated_at", "2018-01-13 21:55:13.741035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.742755"], ["updated_at", "2018-01-13 21:55:13.742755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.744488"], ["updated_at", "2018-01-13 21:55:13.744488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.752157"], ["updated_at", "2018-01-13 21:55:13.752157"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.755596"], ["updated_at", "2018-01-13 21:55:13.755596"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 21:55:13.758131"], ["updated_at", "2018-01-13 21:55:13.758131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (9.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:52:32.892162', '2018-01-13 22:52:32.892162', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:52:32.892162', '2018-01-13 22:52:32.892162', 298486374)[0m
  [1m[35m (74.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:52:33.005764"], ["updated_at", "2018-01-13 22:52:33.005764"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:52:33.010807"], ["updated_at", "2018-01-13 22:52:33.010807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:52:33.014008"], ["updated_at", "2018-01-13 22:52:33.014008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:52:33.052950"], ["updated_at", "2018-01-13 22:52:33.052950"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:52:33.057943"], ["updated_at", "2018-01-13 22:52:33.057943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:52:33.061793"], ["updated_at", "2018-01-13 22:52:33.061793"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:52:33.065486"], ["updated_at", "2018-01-13 22:52:33.065486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:52:33.078217"], ["updated_at", "2018-01-13 22:52:33.078217"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:52:33.081999"], ["updated_at", "2018-01-13 22:52:33.081999"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:53:44.592160', '2018-01-13 22:53:44.592160', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:53:44.592160', '2018-01-13 22:53:44.592160', 298486374)[0m
  [1m[35m (82.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.695989"], ["updated_at", "2018-01-13 22:53:44.695989"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.701238"], ["updated_at", "2018-01-13 22:53:44.701238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.715984"], ["updated_at", "2018-01-13 22:53:44.715984"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.720439"], ["updated_at", "2018-01-13 22:53:44.720439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.730583"], ["updated_at", "2018-01-13 22:53:44.730583"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.734740"], ["updated_at", "2018-01-13 22:53:44.734740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.738629"], ["updated_at", "2018-01-13 22:53:44.738629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.750295"], ["updated_at", "2018-01-13 22:53:44.750295"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.753337"], ["updated_at", "2018-01-13 22:53:44.753337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.756047"], ["updated_at", "2018-01-13 22:53:44.756047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.763831"], ["updated_at", "2018-01-13 22:53:44.763831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.765805"], ["updated_at", "2018-01-13 22:53:44.765805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.773796"], ["updated_at", "2018-01-13 22:53:44.773796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.776075"], ["updated_at", "2018-01-13 22:53:44.776075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.778678"], ["updated_at", "2018-01-13 22:53:44.778678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.780760"], ["updated_at", "2018-01-13 22:53:44.780760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.787473"], ["updated_at", "2018-01-13 22:53:44.787473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.790397"], ["updated_at", "2018-01-13 22:53:44.790397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.792479"], ["updated_at", "2018-01-13 22:53:44.792479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.795114"], ["updated_at", "2018-01-13 22:53:44.795114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.801181"], ["updated_at", "2018-01-13 22:53:44.801181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.803531"], ["updated_at", "2018-01-13 22:53:44.803531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.806196"], ["updated_at", "2018-01-13 22:53:44.806196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.812820"], ["updated_at", "2018-01-13 22:53:44.812820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:53:44.815023"], ["updated_at", "2018-01-13 22:53:44.815023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:44.817057"], ["updated_at", "2018-01-13 22:53:44.817057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.818910"], ["updated_at", "2018-01-13 22:53:44.818910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.820829"], ["updated_at", "2018-01-13 22:53:44.820829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:44.822587"], ["updated_at", "2018-01-13 22:53:44.822587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:53:54.528455', '2018-01-13 22:53:54.528455', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:53:54.528455', '2018-01-13 22:53:54.528455', 298486374)[0m
  [1m[35m (91.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:53:54.635917"], ["updated_at", "2018-01-13 22:53:54.635917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:54.639576"], ["updated_at", "2018-01-13 22:53:54.639576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:54.641892"], ["updated_at", "2018-01-13 22:53:54.641892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:54.643866"], ["updated_at", "2018-01-13 22:53:54.643866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:53:54.645738"], ["updated_at", "2018-01-13 22:53:54.645738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:56:16.216954', '2018-01-13 22:56:16.216954', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:56:16.216954', '2018-01-13 22:56:16.216954', 298486374)[0m
  [1m[35m (93.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:56:16.333994"], ["updated_at", "2018-01-13 22:56:16.333994"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:56:16.341754"], ["updated_at", "2018-01-13 22:56:16.341754"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:56:16.345619"], ["updated_at", "2018-01-13 22:56:16.345619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:56:16.348974"], ["updated_at", "2018-01-13 22:56:16.348974"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:58:10.066994', '2018-01-13 22:58:10.066994', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 22:58:10.066994', '2018-01-13 22:58:10.066994', 298486374)[0m
  [1m[35m (74.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:58:10.168636"], ["updated_at", "2018-01-13 22:58:10.168636"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 22:58:10.173241"], ["updated_at", "2018-01-13 22:58:10.173241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 22:58:10.187065"], ["updated_at", "2018-01-13 22:58:10.187065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 22:58:10.190830"], ["updated_at", "2018-01-13 22:58:10.190830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:00:34.236864', '2018-01-13 23:00:34.236864', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:00:34.236864', '2018-01-13 23:00:34.236864', 298486374)[0m
  [1m[35m (80.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.333985"], ["updated_at", "2018-01-13 23:00:34.333985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.337432"], ["updated_at", "2018-01-13 23:00:34.337432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.349069"], ["updated_at", "2018-01-13 23:00:34.349069"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.351826"], ["updated_at", "2018-01-13 23:00:34.351826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.361010"], ["updated_at", "2018-01-13 23:00:34.361010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.363491"], ["updated_at", "2018-01-13 23:00:34.363491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.365588"], ["updated_at", "2018-01-13 23:00:34.365588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.367496"], ["updated_at", "2018-01-13 23:00:34.367496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.374565"], ["updated_at", "2018-01-13 23:00:34.374565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.377273"], ["updated_at", "2018-01-13 23:00:34.377273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.379560"], ["updated_at", "2018-01-13 23:00:34.379560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.381794"], ["updated_at", "2018-01-13 23:00:34.381794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.388583"], ["updated_at", "2018-01-13 23:00:34.388583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.391249"], ["updated_at", "2018-01-13 23:00:34.391249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.393315"], ["updated_at", "2018-01-13 23:00:34.393315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.399357"], ["updated_at", "2018-01-13 23:00:34.399357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.401863"], ["updated_at", "2018-01-13 23:00:34.401863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.403860"], ["updated_at", "2018-01-13 23:00:34.403860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.410714"], ["updated_at", "2018-01-13 23:00:34.410714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.413317"], ["updated_at", "2018-01-13 23:00:34.413317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.415555"], ["updated_at", "2018-01-13 23:00:34.415555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.417476"], ["updated_at", "2018-01-13 23:00:34.417476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.419293"], ["updated_at", "2018-01-13 23:00:34.419293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.426510"], ["updated_at", "2018-01-13 23:00:34.426510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:00:34.429012"], ["updated_at", "2018-01-13 23:00:34.429012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:00:34.430931"], ["updated_at", "2018-01-13 23:00:34.430931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.432621"], ["updated_at", "2018-01-13 23:00:34.432621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.434243"], ["updated_at", "2018-01-13 23:00:34.434243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:00:34.435803"], ["updated_at", "2018-01-13 23:00:34.435803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:13:12.653126', '2018-01-13 23:13:12.653126', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:13:12.653126', '2018-01-13 23:13:12.653126', 298486374)[0m
  [1m[35m (115.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.793605"], ["updated_at", "2018-01-13 23:13:12.793605"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.797862"], ["updated_at", "2018-01-13 23:13:12.797862"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.801056"], ["updated_at", "2018-01-13 23:13:12.801056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.803466"], ["updated_at", "2018-01-13 23:13:12.803466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.817628"], ["updated_at", "2018-01-13 23:13:12.817628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.820916"], ["updated_at", "2018-01-13 23:13:12.820916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.829156"], ["updated_at", "2018-01-13 23:13:12.829156"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.833010"], ["updated_at", "2018-01-13 23:13:12.833010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.841146"], ["updated_at", "2018-01-13 23:13:12.841146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.844453"], ["updated_at", "2018-01-13 23:13:12.844453"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.848036"], ["updated_at", "2018-01-13 23:13:12.848036"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.850752"], ["updated_at", "2018-01-13 23:13:12.850752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.852835"], ["updated_at", "2018-01-13 23:13:12.852835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.854629"], ["updated_at", "2018-01-13 23:13:12.854629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.863533"], ["updated_at", "2018-01-13 23:13:12.863533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.866185"], ["updated_at", "2018-01-13 23:13:12.866185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.868583"], ["updated_at", "2018-01-13 23:13:12.868583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.874691"], ["updated_at", "2018-01-13 23:13:12.874691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.877088"], ["updated_at", "2018-01-13 23:13:12.877088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.879224"], ["updated_at", "2018-01-13 23:13:12.879224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.882042"], ["updated_at", "2018-01-13 23:13:12.882042"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.884752"], ["updated_at", "2018-01-13 23:13:12.884752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.891609"], ["updated_at", "2018-01-13 23:13:12.891609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.893959"], ["updated_at", "2018-01-13 23:13:12.893959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.895590"], ["updated_at", "2018-01-13 23:13:12.895590"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:12.906034"], ["updated_at", "2018-01-13 23:13:12.906034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.908285"], ["updated_at", "2018-01-13 23:13:12.908285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:12.910456"], ["updated_at", "2018-01-13 23:13:12.910456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:12.913513"], ["updated_at", "2018-01-13 23:13:12.913513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:13:27.923721', '2018-01-13 23:13:27.923721', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:13:27.923721', '2018-01-13 23:13:27.923721', 298486374)[0m
  [1m[35m (116.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.063531"], ["updated_at", "2018-01-13 23:13:28.063531"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.067997"], ["updated_at", "2018-01-13 23:13:28.067997"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.071200"], ["updated_at", "2018-01-13 23:13:28.071200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.074064"], ["updated_at", "2018-01-13 23:13:28.074064"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.086792"], ["updated_at", "2018-01-13 23:13:28.086792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.089035"], ["updated_at", "2018-01-13 23:13:28.089035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.095014"], ["updated_at", "2018-01-13 23:13:28.095014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.097571"], ["updated_at", "2018-01-13 23:13:28.097571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.099941"], ["updated_at", "2018-01-13 23:13:28.099941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.101689"], ["updated_at", "2018-01-13 23:13:28.101689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.107525"], ["updated_at", "2018-01-13 23:13:28.107525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.110119"], ["updated_at", "2018-01-13 23:13:28.110119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.112619"], ["updated_at", "2018-01-13 23:13:28.112619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.115270"], ["updated_at", "2018-01-13 23:13:28.115270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.117759"], ["updated_at", "2018-01-13 23:13:28.117759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.124352"], ["updated_at", "2018-01-13 23:13:28.124352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.127127"], ["updated_at", "2018-01-13 23:13:28.127127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.129092"], ["updated_at", "2018-01-13 23:13:28.129092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.131023"], ["updated_at", "2018-01-13 23:13:28.131023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.132700"], ["updated_at", "2018-01-13 23:13:28.132700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.134367"], ["updated_at", "2018-01-13 23:13:28.134367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:13:28.142473"], ["updated_at", "2018-01-13 23:13:28.142473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.144791"], ["updated_at", "2018-01-13 23:13:28.144791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.152423"], ["updated_at", "2018-01-13 23:13:28.152423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.154843"], ["updated_at", "2018-01-13 23:13:28.154843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.156649"], ["updated_at", "2018-01-13 23:13:28.156649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.162462"], ["updated_at", "2018-01-13 23:13:28.162462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:13:28.164467"], ["updated_at", "2018-01-13 23:13:28.164467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:13:28.166257"], ["updated_at", "2018-01-13 23:13:28.166257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.4ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:07.149410', '2018-01-13 23:31:07.149410', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:07.149410', '2018-01-13 23:31:07.149410', 298486374)[0m
  [1m[35m (116.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.287394"], ["updated_at", "2018-01-13 23:31:07.287394"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.289938"], ["updated_at", "2018-01-13 23:31:07.289938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.291800"], ["updated_at", "2018-01-13 23:31:07.291800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.293384"], ["updated_at", "2018-01-13 23:31:07.293384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.294927"], ["updated_at", "2018-01-13 23:31:07.294927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.302830"], ["updated_at", "2018-01-13 23:31:07.302830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.305078"], ["updated_at", "2018-01-13 23:31:07.305078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.307451"], ["updated_at", "2018-01-13 23:31:07.307451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.309045"], ["updated_at", "2018-01-13 23:31:07.309045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.315215"], ["updated_at", "2018-01-13 23:31:07.315215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.317746"], ["updated_at", "2018-01-13 23:31:07.317746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.319607"], ["updated_at", "2018-01-13 23:31:07.319607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.321921"], ["updated_at", "2018-01-13 23:31:07.321921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.329178"], ["updated_at", "2018-01-13 23:31:07.329178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.331584"], ["updated_at", "2018-01-13 23:31:07.331584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.333433"], ["updated_at", "2018-01-13 23:31:07.333433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.340478"], ["updated_at", "2018-01-13 23:31:07.340478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.342838"], ["updated_at", "2018-01-13 23:31:07.342838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.349802"], ["updated_at", "2018-01-13 23:31:07.349802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.352270"], ["updated_at", "2018-01-13 23:31:07.352270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:07.354521"], ["updated_at", "2018-01-13 23:31:07.354521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.356687"], ["updated_at", "2018-01-13 23:31:07.356687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.358441"], ["updated_at", "2018-01-13 23:31:07.358441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.360333"], ["updated_at", "2018-01-13 23:31:07.360333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.368592"], ["updated_at", "2018-01-13 23:31:07.368592"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.370877"], ["updated_at", "2018-01-13 23:31:07.370877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.373062"], ["updated_at", "2018-01-13 23:31:07.373062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:07.379207"], ["updated_at", "2018-01-13 23:31:07.379207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:07.381210"], ["updated_at", "2018-01-13 23:31:07.381210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:10.502990', '2018-01-13 23:31:10.502990', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:10.502990', '2018-01-13 23:31:10.502990', 298486374)[0m
  [1m[35m (109.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.629260"], ["updated_at", "2018-01-13 23:31:10.629260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.632228"], ["updated_at", "2018-01-13 23:31:10.632228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.641779"], ["updated_at", "2018-01-13 23:31:10.641779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.643915"], ["updated_at", "2018-01-13 23:31:10.643915"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.645930"], ["updated_at", "2018-01-13 23:31:10.645930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.647558"], ["updated_at", "2018-01-13 23:31:10.647558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.653619"], ["updated_at", "2018-01-13 23:31:10.653619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.656740"], ["updated_at", "2018-01-13 23:31:10.656740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.662850"], ["updated_at", "2018-01-13 23:31:10.662850"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.665406"], ["updated_at", "2018-01-13 23:31:10.665406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.667137"], ["updated_at", "2018-01-13 23:31:10.667137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.674230"], ["updated_at", "2018-01-13 23:31:10.674230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.676781"], ["updated_at", "2018-01-13 23:31:10.676781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.678408"], ["updated_at", "2018-01-13 23:31:10.678408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.684998"], ["updated_at", "2018-01-13 23:31:10.684998"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.687838"], ["updated_at", "2018-01-13 23:31:10.687838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.690407"], ["updated_at", "2018-01-13 23:31:10.690407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.692747"], ["updated_at", "2018-01-13 23:31:10.692747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.695113"], ["updated_at", "2018-01-13 23:31:10.695113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.704765"], ["updated_at", "2018-01-13 23:31:10.704765"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.708485"], ["updated_at", "2018-01-13 23:31:10.708485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.711045"], ["updated_at", "2018-01-13 23:31:10.711045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.713525"], ["updated_at", "2018-01-13 23:31:10.713525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.715886"], ["updated_at", "2018-01-13 23:31:10.715886"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.718331"], ["updated_at", "2018-01-13 23:31:10.718331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:10.731577"], ["updated_at", "2018-01-13 23:31:10.731577"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.735144"], ["updated_at", "2018-01-13 23:31:10.735144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:10.738488"], ["updated_at", "2018-01-13 23:31:10.738488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:10.741330"], ["updated_at", "2018-01-13 23:31:10.741330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (4.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:16.628943', '2018-01-13 23:31:16.628943', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:31:16.628943', '2018-01-13 23:31:16.628943', 298486374)[0m
  [1m[35m (106.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.749200"], ["updated_at", "2018-01-13 23:31:16.749200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.752407"], ["updated_at", "2018-01-13 23:31:16.752407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.755880"], ["updated_at", "2018-01-13 23:31:16.755880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.758600"], ["updated_at", "2018-01-13 23:31:16.758600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.774373"], ["updated_at", "2018-01-13 23:31:16.774373"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.777703"], ["updated_at", "2018-01-13 23:31:16.777703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.785889"], ["updated_at", "2018-01-13 23:31:16.785889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.789501"], ["updated_at", "2018-01-13 23:31:16.789501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.798743"], ["updated_at", "2018-01-13 23:31:16.798743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.802612"], ["updated_at", "2018-01-13 23:31:16.802612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.805379"], ["updated_at", "2018-01-13 23:31:16.805379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.807960"], ["updated_at", "2018-01-13 23:31:16.807960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.810109"], ["updated_at", "2018-01-13 23:31:16.810109"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.818672"], ["updated_at", "2018-01-13 23:31:16.818672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.822249"], ["updated_at", "2018-01-13 23:31:16.822249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.824650"], ["updated_at", "2018-01-13 23:31:16.824650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.833320"], ["updated_at", "2018-01-13 23:31:16.833320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.835775"], ["updated_at", "2018-01-13 23:31:16.835775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.838200"], ["updated_at", "2018-01-13 23:31:16.838200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.845403"], ["updated_at", "2018-01-13 23:31:16.845403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.847748"], ["updated_at", "2018-01-13 23:31:16.847748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.849872"], ["updated_at", "2018-01-13 23:31:16.849872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.852103"], ["updated_at", "2018-01-13 23:31:16.852103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.861193"], ["updated_at", "2018-01-13 23:31:16.861193"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:31:16.864577"], ["updated_at", "2018-01-13 23:31:16.864577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:31:16.866598"], ["updated_at", "2018-01-13 23:31:16.866598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.868107"], ["updated_at", "2018-01-13 23:31:16.868107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.869724"], ["updated_at", "2018-01-13 23:31:16.869724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:31:16.871256"], ["updated_at", "2018-01-13 23:31:16.871256"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:32:41.285680', '2018-01-13 23:32:41.285680', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-13 23:32:41.285680', '2018-01-13 23:32:41.285680', 298486374)[0m
  [1m[35m (121.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.423391"], ["updated_at", "2018-01-13 23:32:41.423391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.426413"], ["updated_at", "2018-01-13 23:32:41.426413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.428625"], ["updated_at", "2018-01-13 23:32:41.428625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.430424"], ["updated_at", "2018-01-13 23:32:41.430424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.440114"], ["updated_at", "2018-01-13 23:32:41.440114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.442434"], ["updated_at", "2018-01-13 23:32:41.442434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.444468"], ["updated_at", "2018-01-13 23:32:41.444468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.451231"], ["updated_at", "2018-01-13 23:32:41.451231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.454852"], ["updated_at", "2018-01-13 23:32:41.454852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.457558"], ["updated_at", "2018-01-13 23:32:41.457558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.459577"], ["updated_at", "2018-01-13 23:32:41.459577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.461497"], ["updated_at", "2018-01-13 23:32:41.461497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.470895"], ["updated_at", "2018-01-13 23:32:41.470895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.474199"], ["updated_at", "2018-01-13 23:32:41.474199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.483023"], ["updated_at", "2018-01-13 23:32:41.483023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.486301"], ["updated_at", "2018-01-13 23:32:41.486301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.488891"], ["updated_at", "2018-01-13 23:32:41.488891"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.495856"], ["updated_at", "2018-01-13 23:32:41.495856"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.499510"], ["updated_at", "2018-01-13 23:32:41.499510"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.502601"], ["updated_at", "2018-01-13 23:32:41.502601"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.504621"], ["updated_at", "2018-01-13 23:32:41.504621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.512715"], ["updated_at", "2018-01-13 23:32:41.512715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.516058"], ["updated_at", "2018-01-13 23:32:41.516058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-13 23:32:41.518438"], ["updated_at", "2018-01-13 23:32:41.518438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.520084"], ["updated_at", "2018-01-13 23:32:41.520084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.521695"], ["updated_at", "2018-01-13 23:32:41.521695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.523205"], ["updated_at", "2018-01-13 23:32:41.523205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-13 23:32:41.530652"], ["updated_at", "2018-01-13 23:32:41.530652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-13 23:32:41.533105"], ["updated_at", "2018-01-13 23:32:41.533105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:09:39.486663', '2018-01-14 13:09:39.486663', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:09:39.486663', '2018-01-14 13:09:39.486663', 298486374)[0m
  [1m[35m (76.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
EventTest: test_multiple_opening_ranges_with_weekly_and_non_weekly_recurring_ones
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.579748"], ["updated_at", "2018-01-14 13:09:39.579748"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 14:30:00"], ["ends_at", "2014-08-04 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.583523"], ["updated_at", "2018-01-14 13:09:39.583523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.586417"], ["updated_at", "2018-01-14 13:09:39.586417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.589365"], ["updated_at", "2018-01-14 13:09:39.589365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.591768"], ["updated_at", "2018-01-14 13:09:39.591768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.594282"], ["updated_at", "2018-01-14 13:09:39.594282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.627208"], ["updated_at", "2018-01-14 13:09:39.627208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.629259"], ["updated_at", "2018-01-14 13:09:39.629259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.631249"], ["updated_at", "2018-01-14 13:09:39.631249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.632974"], ["updated_at", "2018-01-14 13:09:39.632974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.640174"], ["updated_at", "2018-01-14 13:09:39.640174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.642269"], ["updated_at", "2018-01-14 13:09:39.642269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.644397"], ["updated_at", "2018-01-14 13:09:39.644397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.646324"], ["updated_at", "2018-01-14 13:09:39.646324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.652439"], ["updated_at", "2018-01-14 13:09:39.652439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.655009"], ["updated_at", "2018-01-14 13:09:39.655009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.657102"], ["updated_at", "2018-01-14 13:09:39.657102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.663633"], ["updated_at", "2018-01-14 13:09:39.663633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.665800"], ["updated_at", "2018-01-14 13:09:39.665800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.667651"], ["updated_at", "2018-01-14 13:09:39.667651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.674310"], ["updated_at", "2018-01-14 13:09:39.674310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.676474"], ["updated_at", "2018-01-14 13:09:39.676474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.683072"], ["updated_at", "2018-01-14 13:09:39.683072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.685233"], ["updated_at", "2018-01-14 13:09:39.685233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.687262"], ["updated_at", "2018-01-14 13:09:39.687262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.689002"], ["updated_at", "2018-01-14 13:09:39.689002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:09:39.690964"], ["updated_at", "2018-01-14 13:09:39.690964"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:09:39.697857"], ["updated_at", "2018-01-14 13:09:39.697857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:09:39.700004"], ["updated_at", "2018-01-14 13:09:39.700004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:20:20.925687', '2018-01-14 13:20:20.925687', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:20:20.925687', '2018-01-14 13:20:20.925687', 298486374)[0m
  [1m[35m (98.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.043504"], ["updated_at", "2018-01-14 13:20:21.043504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.047634"], ["updated_at", "2018-01-14 13:20:21.047634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.058906"], ["updated_at", "2018-01-14 13:20:21.058906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.061260"], ["updated_at", "2018-01-14 13:20:21.061260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.072440"], ["updated_at", "2018-01-14 13:20:21.072440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.075170"], ["updated_at", "2018-01-14 13:20:21.075170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.087289"], ["updated_at", "2018-01-14 13:20:21.087289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.090094"], ["updated_at", "2018-01-14 13:20:21.090094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.092968"], ["updated_at", "2018-01-14 13:20:21.092968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.101825"], ["updated_at", "2018-01-14 13:20:21.101825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.104186"], ["updated_at", "2018-01-14 13:20:21.104186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.106242"], ["updated_at", "2018-01-14 13:20:21.106242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.107968"], ["updated_at", "2018-01-14 13:20:21.107968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.114524"], ["updated_at", "2018-01-14 13:20:21.114524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.116308"], ["updated_at", "2018-01-14 13:20:21.116308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.124863"], ["updated_at", "2018-01-14 13:20:21.124863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.127642"], ["updated_at", "2018-01-14 13:20:21.127642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.130174"], ["updated_at", "2018-01-14 13:20:21.130174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.133024"], ["updated_at", "2018-01-14 13:20:21.133024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.134913"], ["updated_at", "2018-01-14 13:20:21.134913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.141049"], ["updated_at", "2018-01-14 13:20:21.141049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:20:21.143052"], ["updated_at", "2018-01-14 13:20:21.143052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:20:21.145162"], ["updated_at", "2018-01-14 13:20:21.145162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:20:21.147289"], ["updated_at", "2018-01-14 13:20:21.147289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:09.055841', '2018-01-14 13:21:09.055841', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:09.055841', '2018-01-14 13:21:09.055841', 298486374)[0m
  [1m[35m (116.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:09.190557"], ["updated_at", "2018-01-14 13:21:09.190557"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:09.194077"], ["updated_at", "2018-01-14 13:21:09.194077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:09.196448"], ["updated_at", "2018-01-14 13:21:09.196448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.198570"], ["updated_at", "2018-01-14 13:21:09.198570"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.209250"], ["updated_at", "2018-01-14 13:21:09.209250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.211729"], ["updated_at", "2018-01-14 13:21:09.211729"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.213992"], ["updated_at", "2018-01-14 13:21:09.213992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:09.224859"], ["updated_at", "2018-01-14 13:21:09.224859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.227986"], ["updated_at", "2018-01-14 13:21:09.227986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.231725"], ["updated_at", "2018-01-14 13:21:09.231725"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.235469"], ["updated_at", "2018-01-14 13:21:09.235469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.238468"], ["updated_at", "2018-01-14 13:21:09.238468"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:09.248041"], ["updated_at", "2018-01-14 13:21:09.248041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:09.250440"], ["updated_at", "2018-01-14 13:21:09.250440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:09.252815"], ["updated_at", "2018-01-14 13:21:09.252815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:09.254690"], ["updated_at", "2018-01-14 13:21:09.254690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:39.857353', '2018-01-14 13:21:39.857353', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:39.857353', '2018-01-14 13:21:39.857353', 298486374)[0m
  [1m[35m (116.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:39.991751"], ["updated_at", "2018-01-14 13:21:39.991751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:39.995536"], ["updated_at", "2018-01-14 13:21:39.995536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.006413"], ["updated_at", "2018-01-14 13:21:40.006413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.009899"], ["updated_at", "2018-01-14 13:21:40.009899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.012470"], ["updated_at", "2018-01-14 13:21:40.012470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.014364"], ["updated_at", "2018-01-14 13:21:40.014364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.016735"], ["updated_at", "2018-01-14 13:21:40.016735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.027158"], ["updated_at", "2018-01-14 13:21:40.027158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.029669"], ["updated_at", "2018-01-14 13:21:40.029669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.032022"], ["updated_at", "2018-01-14 13:21:40.032022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.039492"], ["updated_at", "2018-01-14 13:21:40.039492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.042047"], ["updated_at", "2018-01-14 13:21:40.042047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.044056"], ["updated_at", "2018-01-14 13:21:40.044056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.049904"], ["updated_at", "2018-01-14 13:21:40.049904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.051832"], ["updated_at", "2018-01-14 13:21:40.051832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.053904"], ["updated_at", "2018-01-14 13:21:40.053904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.055775"], ["updated_at", "2018-01-14 13:21:40.055775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.066579"], ["updated_at", "2018-01-14 13:21:40.066579"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.068540"], ["updated_at", "2018-01-14 13:21:40.068540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.070554"], ["updated_at", "2018-01-14 13:21:40.070554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.072293"], ["updated_at", "2018-01-14 13:21:40.072293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.078574"], ["updated_at", "2018-01-14 13:21:40.078574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.080481"], ["updated_at", "2018-01-14 13:21:40.080481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.086118"], ["updated_at", "2018-01-14 13:21:40.086118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:40.088078"], ["updated_at", "2018-01-14 13:21:40.088078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:40.089808"], ["updated_at", "2018-01-14 13:21:40.089808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:40.091690"], ["updated_at", "2018-01-14 13:21:40.091690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:45.295318', '2018-01-14 13:21:45.295318', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:21:45.295318', '2018-01-14 13:21:45.295318', 298486374)[0m
  [1m[35m (101.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.410640"], ["updated_at", "2018-01-14 13:21:45.410640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.413852"], ["updated_at", "2018-01-14 13:21:45.413852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.416397"], ["updated_at", "2018-01-14 13:21:45.416397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.418748"], ["updated_at", "2018-01-14 13:21:45.418748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.432434"], ["updated_at", "2018-01-14 13:21:45.432434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.435209"], ["updated_at", "2018-01-14 13:21:45.435209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.437860"], ["updated_at", "2018-01-14 13:21:45.437860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.440543"], ["updated_at", "2018-01-14 13:21:45.440543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.450107"], ["updated_at", "2018-01-14 13:21:45.450107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.452745"], ["updated_at", "2018-01-14 13:21:45.452745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.455615"], ["updated_at", "2018-01-14 13:21:45.455615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.458112"], ["updated_at", "2018-01-14 13:21:45.458112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.466353"], ["updated_at", "2018-01-14 13:21:45.466353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.468982"], ["updated_at", "2018-01-14 13:21:45.468982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.471677"], ["updated_at", "2018-01-14 13:21:45.471677"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.478984"], ["updated_at", "2018-01-14 13:21:45.478984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.481445"], ["updated_at", "2018-01-14 13:21:45.481445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.483754"], ["updated_at", "2018-01-14 13:21:45.483754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.492367"], ["updated_at", "2018-01-14 13:21:45.492367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.494982"], ["updated_at", "2018-01-14 13:21:45.494982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.497315"], ["updated_at", "2018-01-14 13:21:45.497315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.498999"], ["updated_at", "2018-01-14 13:21:45.498999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.500591"], ["updated_at", "2018-01-14 13:21:45.500591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.510935"], ["updated_at", "2018-01-14 13:21:45.510935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:21:45.515918"], ["updated_at", "2018-01-14 13:21:45.515918"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:21:45.527070"], ["updated_at", "2018-01-14 13:21:45.527070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:21:45.530166"], ["updated_at", "2018-01-14 13:21:45.530166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:22:25.577404', '2018-01-14 13:22:25.577404', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:22:25.577404', '2018-01-14 13:22:25.577404', 298486374)[0m
  [1m[35m (131.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.725702"], ["updated_at", "2018-01-14 13:22:25.725702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.729690"], ["updated_at", "2018-01-14 13:22:25.729690"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.740260"], ["updated_at", "2018-01-14 13:22:25.740260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.742407"], ["updated_at", "2018-01-14 13:22:25.742407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.749464"], ["updated_at", "2018-01-14 13:22:25.749464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.752211"], ["updated_at", "2018-01-14 13:22:25.752211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.754308"], ["updated_at", "2018-01-14 13:22:25.754308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.756160"], ["updated_at", "2018-01-14 13:22:25.756160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.762629"], ["updated_at", "2018-01-14 13:22:25.762629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.766862"], ["updated_at", "2018-01-14 13:22:25.766862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.769592"], ["updated_at", "2018-01-14 13:22:25.769592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.776623"], ["updated_at", "2018-01-14 13:22:25.776623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.778527"], ["updated_at", "2018-01-14 13:22:25.778527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.780528"], ["updated_at", "2018-01-14 13:22:25.780528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.782418"], ["updated_at", "2018-01-14 13:22:25.782418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.790285"], ["updated_at", "2018-01-14 13:22:25.790285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.793622"], ["updated_at", "2018-01-14 13:22:25.793622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.796301"], ["updated_at", "2018-01-14 13:22:25.796301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.798870"], ["updated_at", "2018-01-14 13:22:25.798870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.802069"], ["updated_at", "2018-01-14 13:22:25.802069"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.811750"], ["updated_at", "2018-01-14 13:22:25.811750"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.814774"], ["updated_at", "2018-01-14 13:22:25.814774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.817638"], ["updated_at", "2018-01-14 13:22:25.817638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:22:25.825908"], ["updated_at", "2018-01-14 13:22:25.825908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.828614"], ["updated_at", "2018-01-14 13:22:25.828614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:22:25.831901"], ["updated_at", "2018-01-14 13:22:25.831901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:22:25.834710"], ["updated_at", "2018-01-14 13:22:25.834710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:23:00.498197', '2018-01-14 13:23:00.498197', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:23:00.498197', '2018-01-14 13:23:00.498197', 298486374)[0m
  [1m[35m (113.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.627154"], ["updated_at", "2018-01-14 13:23:00.627154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.634554"], ["updated_at", "2018-01-14 13:23:00.634554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.636529"], ["updated_at", "2018-01-14 13:23:00.636529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.638207"], ["updated_at", "2018-01-14 13:23:00.638207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.639926"], ["updated_at", "2018-01-14 13:23:00.639926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.649587"], ["updated_at", "2018-01-14 13:23:00.649587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.652189"], ["updated_at", "2018-01-14 13:23:00.652189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.654111"], ["updated_at", "2018-01-14 13:23:00.654111"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.655898"], ["updated_at", "2018-01-14 13:23:00.655898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.662830"], ["updated_at", "2018-01-14 13:23:00.662830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.665001"], ["updated_at", "2018-01-14 13:23:00.665001"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.674589"], ["updated_at", "2018-01-14 13:23:00.674589"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.677224"], ["updated_at", "2018-01-14 13:23:00.677224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.679225"], ["updated_at", "2018-01-14 13:23:00.679225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.688510"], ["updated_at", "2018-01-14 13:23:00.688510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.691440"], ["updated_at", "2018-01-14 13:23:00.691440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.700120"], ["updated_at", "2018-01-14 13:23:00.700120"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.703494"], ["updated_at", "2018-01-14 13:23:00.703494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.705936"], ["updated_at", "2018-01-14 13:23:00.705936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.709047"], ["updated_at", "2018-01-14 13:23:00.709047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.715470"], ["updated_at", "2018-01-14 13:23:00.715470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:00.718220"], ["updated_at", "2018-01-14 13:23:00.718220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:00.720171"], ["updated_at", "2018-01-14 13:23:00.720171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.722755"], ["updated_at", "2018-01-14 13:23:00.722755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.730802"], ["updated_at", "2018-01-14 13:23:00.730802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.732942"], ["updated_at", "2018-01-14 13:23:00.732942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:00.734791"], ["updated_at", "2018-01-14 13:23:00.734791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:23:14.310639', '2018-01-14 13:23:14.310639', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:23:14.310639', '2018-01-14 13:23:14.310639', 298486374)[0m
  [1m[35m (69.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.394100"], ["updated_at", "2018-01-14 13:23:14.394100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.397318"], ["updated_at", "2018-01-14 13:23:14.397318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.400199"], ["updated_at", "2018-01-14 13:23:14.400199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.402667"], ["updated_at", "2018-01-14 13:23:14.402667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.413526"], ["updated_at", "2018-01-14 13:23:14.413526"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.416437"], ["updated_at", "2018-01-14 13:23:14.416437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.425655"], ["updated_at", "2018-01-14 13:23:14.425655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.428525"], ["updated_at", "2018-01-14 13:23:14.428525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.431132"], ["updated_at", "2018-01-14 13:23:14.431132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.433936"], ["updated_at", "2018-01-14 13:23:14.433936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.445815"], ["updated_at", "2018-01-14 13:23:14.445815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.450996"], ["updated_at", "2018-01-14 13:23:14.450996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.453744"], ["updated_at", "2018-01-14 13:23:14.453744"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.464153"], ["updated_at", "2018-01-14 13:23:14.464153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.467708"], ["updated_at", "2018-01-14 13:23:14.467708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.470026"], ["updated_at", "2018-01-14 13:23:14.470026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.472265"], ["updated_at", "2018-01-14 13:23:14.472265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.474339"], ["updated_at", "2018-01-14 13:23:14.474339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (2.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.488511"], ["updated_at", "2018-01-14 13:23:14.488511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.491628"], ["updated_at", "2018-01-14 13:23:14.491628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:23:14.494094"], ["updated_at", "2018-01-14 13:23:14.494094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.496901"], ["updated_at", "2018-01-14 13:23:14.496901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.507041"], ["updated_at", "2018-01-14 13:23:14.507041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.510852"], ["updated_at", "2018-01-14 13:23:14.510852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.516995"], ["updated_at", "2018-01-14 13:23:14.516995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:23:14.525489"], ["updated_at", "2018-01-14 13:23:14.525489"]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:23:14.532059"], ["updated_at", "2018-01-14 13:23:14.532059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:24:11.748648', '2018-01-14 13:24:11.748648', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:24:11.748648', '2018-01-14 13:24:11.748648', 298486374)[0m
  [1m[35m (117.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.885490"], ["updated_at", "2018-01-14 13:24:11.885490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.887892"], ["updated_at", "2018-01-14 13:24:11.887892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.896219"], ["updated_at", "2018-01-14 13:24:11.896219"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.898212"], ["updated_at", "2018-01-14 13:24:11.898212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.900229"], ["updated_at", "2018-01-14 13:24:11.900229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.901902"], ["updated_at", "2018-01-14 13:24:11.901902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.903646"], ["updated_at", "2018-01-14 13:24:11.903646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.910216"], ["updated_at", "2018-01-14 13:24:11.910216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.912268"], ["updated_at", "2018-01-14 13:24:11.912268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.913978"], ["updated_at", "2018-01-14 13:24:11.913978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.920633"], ["updated_at", "2018-01-14 13:24:11.920633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.923365"], ["updated_at", "2018-01-14 13:24:11.923365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.925307"], ["updated_at", "2018-01-14 13:24:11.925307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.927088"], ["updated_at", "2018-01-14 13:24:11.927088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.933649"], ["updated_at", "2018-01-14 13:24:11.933649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.935845"], ["updated_at", "2018-01-14 13:24:11.935845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.937785"], ["updated_at", "2018-01-14 13:24:11.937785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.939360"], ["updated_at", "2018-01-14 13:24:11.939360"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.945347"], ["updated_at", "2018-01-14 13:24:11.945347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.947361"], ["updated_at", "2018-01-14 13:24:11.947361"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.949671"], ["updated_at", "2018-01-14 13:24:11.949671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.951435"], ["updated_at", "2018-01-14 13:24:11.951435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.958453"], ["updated_at", "2018-01-14 13:24:11.958453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.960497"], ["updated_at", "2018-01-14 13:24:11.960497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:11.962195"], ["updated_at", "2018-01-14 13:24:11.962195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:11.969390"], ["updated_at", "2018-01-14 13:24:11.969390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:11.971523"], ["updated_at", "2018-01-14 13:24:11.971523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:24:50.322079', '2018-01-14 13:24:50.322079', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:24:50.322079', '2018-01-14 13:24:50.322079', 298486374)[0m
  [1m[35m (85.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:50.428936"], ["updated_at", "2018-01-14 13:24:50.428936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:50.431888"], ["updated_at", "2018-01-14 13:24:50.431888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:50.434172"], ["updated_at", "2018-01-14 13:24:50.434172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:50.436401"], ["updated_at", "2018-01-14 13:24:50.436401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:50.447681"], ["updated_at", "2018-01-14 13:24:50.447681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:50.450709"], ["updated_at", "2018-01-14 13:24:50.450709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:50.459907"], ["updated_at", "2018-01-14 13:24:50.459907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:24:50.465628"], ["updated_at", "2018-01-14 13:24:50.465628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:24:50.468555"], ["updated_at", "2018-01-14 13:24:50.468555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:24:50.471217"], ["updated_at", "2018-01-14 13:24:50.471217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:28:01.371550', '2018-01-14 13:28:01.371550', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:28:01.371550', '2018-01-14 13:28:01.371550', 298486374)[0m
  [1m[35m (301.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:28:01.694111"], ["updated_at", "2018-01-14 13:28:01.694111"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:28:01.699198"], ["updated_at", "2018-01-14 13:28:01.699198"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:28:01.703137"], ["updated_at", "2018-01-14 13:28:01.703137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:28:01.706564"], ["updated_at", "2018-01-14 13:28:01.706564"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:32:37.856790', '2018-01-14 13:32:37.856790', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:32:37.856790', '2018-01-14 13:32:37.856790', 298486374)[0m
  [1m[35m (76.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:32:37.946348"], ["updated_at", "2018-01-14 13:32:37.946348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:32:37.948677"], ["updated_at", "2018-01-14 13:32:37.948677"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:32:37.950398"], ["updated_at", "2018-01-14 13:32:37.950398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:32:37.952072"], ["updated_at", "2018-01-14 13:32:37.952072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:33:00.938933', '2018-01-14 13:33:00.938933', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:33:00.938933', '2018-01-14 13:33:00.938933', 298486374)[0m
  [1m[35m (105.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:33:01.059961"], ["updated_at", "2018-01-14 13:33:01.059961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:01.063026"], ["updated_at", "2018-01-14 13:33:01.063026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:33:55.323125', '2018-01-14 13:33:55.323125', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:33:55.323125', '2018-01-14 13:33:55.323125', 298486374)[0m
  [1m[35m (102.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:33:55.441077"], ["updated_at", "2018-01-14 13:33:55.441077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:33:55.443455"], ["updated_at", "2018-01-14 13:33:55.443455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:33:55.451975"], ["updated_at", "2018-01-14 13:33:55.451975"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:55.453900"], ["updated_at", "2018-01-14 13:33:55.453900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:55.455493"], ["updated_at", "2018-01-14 13:33:55.455493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:55.458345"], ["updated_at", "2018-01-14 13:33:55.458345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:55.459899"], ["updated_at", "2018-01-14 13:33:55.459899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:33:55.466306"], ["updated_at", "2018-01-14 13:33:55.466306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:33:55.468250"], ["updated_at", "2018-01-14 13:33:55.468250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:33:55.469898"], ["updated_at", "2018-01-14 13:33:55.469898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:33:55.471408"], ["updated_at", "2018-01-14 13:33:55.471408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:34:28.323662', '2018-01-14 13:34:28.323662', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:34:28.323662', '2018-01-14 13:34:28.323662', 298486374)[0m
  [1m[35m (104.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:34:28.443190"], ["updated_at", "2018-01-14 13:34:28.443190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:34:28.446217"], ["updated_at", "2018-01-14 13:34:28.446217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:34:28.448788"], ["updated_at", "2018-01-14 13:34:28.448788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:34:28.451084"], ["updated_at", "2018-01-14 13:34:28.451084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:35:51.134865', '2018-01-14 13:35:51.134865', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:35:51.134865', '2018-01-14 13:35:51.134865', 298486374)[0m
  [1m[35m (74.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:35:51.225183"], ["updated_at", "2018-01-14 13:35:51.225183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:35:51.227806"], ["updated_at", "2018-01-14 13:35:51.227806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:35:51.229592"], ["updated_at", "2018-01-14 13:35:51.229592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:51.231148"], ["updated_at", "2018-01-14 13:35:51.231148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:35:53.344381"], ["updated_at", "2018-01-14 13:35:53.344381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:53.348312"], ["updated_at", "2018-01-14 13:35:53.348312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:53.352071"], ["updated_at", "2018-01-14 13:35:53.352071"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:53.355717"], ["updated_at", "2018-01-14 13:35:53.355717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:53.359931"], ["updated_at", "2018-01-14 13:35:53.359931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:35:56.474134"], ["updated_at", "2018-01-14 13:35:56.474134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:35:56.476872"], ["updated_at", "2018-01-14 13:35:56.476872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:56.479495"], ["updated_at", "2018-01-14 13:35:56.479495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:57.524134"], ["updated_at", "2018-01-14 13:35:57.524134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:57.526399"], ["updated_at", "2018-01-14 13:35:57.526399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:57.529934"], ["updated_at", "2018-01-14 13:35:57.529934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:35:57.537692"], ["updated_at", "2018-01-14 13:35:57.537692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:35:57.539977"], ["updated_at", "2018-01-14 13:35:57.539977"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:36:14.551970', '2018-01-14 13:36:14.551970', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:36:14.551970', '2018-01-14 13:36:14.551970', 298486374)[0m
  [1m[35m (103.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:36:14.674483"], ["updated_at", "2018-01-14 13:36:14.674483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:36:14.678498"], ["updated_at", "2018-01-14 13:36:14.678498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:36:14.681435"], ["updated_at", "2018-01-14 13:36:14.681435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:36:14.684178"], ["updated_at", "2018-01-14 13:36:14.684178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:36:14.696151"], ["updated_at", "2018-01-14 13:36:14.696151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:36:14.699146"], ["updated_at", "2018-01-14 13:36:14.699146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:36:14.702653"], ["updated_at", "2018-01-14 13:36:14.702653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:36:14.711418"], ["updated_at", "2018-01-14 13:36:14.711418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:36:14.714171"], ["updated_at", "2018-01-14 13:36:14.714171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:36:14.716920"], ["updated_at", "2018-01-14 13:36:14.716920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:36:14.719307"], ["updated_at", "2018-01-14 13:36:14.719307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:39:41.911405', '2018-01-14 13:39:41.911405', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:39:41.911405', '2018-01-14 13:39:41.911405', 298486374)[0m
  [1m[35m (99.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:39:42.033592"], ["updated_at", "2018-01-14 13:39:42.033592"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:42.038614"], ["updated_at", "2018-01-14 13:39:42.038614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:42.041813"], ["updated_at", "2018-01-14 13:39:42.041813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:39:42.044825"], ["updated_at", "2018-01-14 13:39:42.044825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:39:42.058357"], ["updated_at", "2018-01-14 13:39:42.058357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:39:42.061503"], ["updated_at", "2018-01-14 13:39:42.061503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:42.064237"], ["updated_at", "2018-01-14 13:39:42.064237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:39:42.067283"], ["updated_at", "2018-01-14 13:39:42.067283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:39:58.557039', '2018-01-14 13:39:58.557039', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:39:58.557039', '2018-01-14 13:39:58.557039', 298486374)[0m
  [1m[35m (133.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:58.704096"], ["updated_at", "2018-01-14 13:39:58.704096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:58.706695"], ["updated_at", "2018-01-14 13:39:58.706695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:39:58.708545"], ["updated_at", "2018-01-14 13:39:58.708545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:39:58.716435"], ["updated_at", "2018-01-14 13:39:58.716435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:39:58.718473"], ["updated_at", "2018-01-14 13:39:58.718473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:39:58.720254"], ["updated_at", "2018-01-14 13:39:58.720254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:39:58.721942"], ["updated_at", "2018-01-14 13:39:58.721942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:41:04.450298', '2018-01-14 13:41:04.450298', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:41:04.450298', '2018-01-14 13:41:04.450298', 298486374)[0m
  [1m[35m (143.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:04.617672"], ["updated_at", "2018-01-14 13:41:04.617672"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:04.623462"], ["updated_at", "2018-01-14 13:41:04.623462"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:04.627805"], ["updated_at", "2018-01-14 13:41:04.627805"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.631493"], ["updated_at", "2018-01-14 13:41:04.631493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:04.642303"], ["updated_at", "2018-01-14 13:41:04.642303"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:04.645281"], ["updated_at", "2018-01-14 13:41:04.645281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:04.647826"], ["updated_at", "2018-01-14 13:41:04.647826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.650155"], ["updated_at", "2018-01-14 13:41:04.650155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:04.659859"], ["updated_at", "2018-01-14 13:41:04.659859"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:04.662494"], ["updated_at", "2018-01-14 13:41:04.662494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.664817"], ["updated_at", "2018-01-14 13:41:04.664817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.673748"], ["updated_at", "2018-01-14 13:41:04.673748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.676261"], ["updated_at", "2018-01-14 13:41:04.676261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:04.678325"], ["updated_at", "2018-01-14 13:41:04.678325"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:41:48.280920', '2018-01-14 13:41:48.280920', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:41:48.280920', '2018-01-14 13:41:48.280920', 298486374)[0m
  [1m[35m (94.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:48.388024"], ["updated_at", "2018-01-14 13:41:48.388024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:48.390681"], ["updated_at", "2018-01-14 13:41:48.390681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:48.399614"], ["updated_at", "2018-01-14 13:41:48.399614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:48.401795"], ["updated_at", "2018-01-14 13:41:48.401795"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:48.403620"], ["updated_at", "2018-01-14 13:41:48.403620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.405231"], ["updated_at", "2018-01-14 13:41:48.405231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:48.412107"], ["updated_at", "2018-01-14 13:41:48.412107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.414670"], ["updated_at", "2018-01-14 13:41:48.414670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.417591"], ["updated_at", "2018-01-14 13:41:48.417591"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.420773"], ["updated_at", "2018-01-14 13:41:48.420773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.423354"], ["updated_at", "2018-01-14 13:41:48.423354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.437592"], ["updated_at", "2018-01-14 13:41:48.437592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.440217"], ["updated_at", "2018-01-14 13:41:48.440217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.442598"], ["updated_at", "2018-01-14 13:41:48.442598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:48.449722"], ["updated_at", "2018-01-14 13:41:48.449722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:41:48.452072"], ["updated_at", "2018-01-14 13:41:48.452072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:41:48.454296"], ["updated_at", "2018-01-14 13:41:48.454296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:41:48.456149"], ["updated_at", "2018-01-14 13:41:48.456149"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:42:24.715258', '2018-01-14 13:42:24.715258', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:42:24.715258', '2018-01-14 13:42:24.715258', 298486374)[0m
  [1m[35m (106.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.836521"], ["updated_at", "2018-01-14 13:42:24.836521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.839242"], ["updated_at", "2018-01-14 13:42:24.839242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.841261"], ["updated_at", "2018-01-14 13:42:24.841261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.843183"], ["updated_at", "2018-01-14 13:42:24.843183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.854220"], ["updated_at", "2018-01-14 13:42:24.854220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.856427"], ["updated_at", "2018-01-14 13:42:24.856427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.858128"], ["updated_at", "2018-01-14 13:42:24.858128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.859757"], ["updated_at", "2018-01-14 13:42:24.859757"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.861311"], ["updated_at", "2018-01-14 13:42:24.861311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.867886"], ["updated_at", "2018-01-14 13:42:24.867886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.869813"], ["updated_at", "2018-01-14 13:42:24.869813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.871681"], ["updated_at", "2018-01-14 13:42:24.871681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.873298"], ["updated_at", "2018-01-14 13:42:24.873298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.881152"], ["updated_at", "2018-01-14 13:42:24.881152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.883617"], ["updated_at", "2018-01-14 13:42:24.883617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.886059"], ["updated_at", "2018-01-14 13:42:24.886059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.891368"], ["updated_at", "2018-01-14 13:42:24.891368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.893414"], ["updated_at", "2018-01-14 13:42:24.893414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.895578"], ["updated_at", "2018-01-14 13:42:24.895578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.897649"], ["updated_at", "2018-01-14 13:42:24.897649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.905111"], ["updated_at", "2018-01-14 13:42:24.905111"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.907016"], ["updated_at", "2018-01-14 13:42:24.907016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:42:24.913137"], ["updated_at", "2018-01-14 13:42:24.913137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.915679"], ["updated_at", "2018-01-14 13:42:24.915679"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.923201"], ["updated_at", "2018-01-14 13:42:24.923201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:42:24.925253"], ["updated_at", "2018-01-14 13:42:24.925253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:42:24.927274"], ["updated_at", "2018-01-14 13:42:24.927274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:50:55.692440', '2018-01-14 13:50:55.692440', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:50:55.692440', '2018-01-14 13:50:55.692440', 298486374)[0m
  [1m[35m (78.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.791281"], ["updated_at", "2018-01-14 13:50:55.791281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.794737"], ["updated_at", "2018-01-14 13:50:55.794737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:50:55.797686"], ["updated_at", "2018-01-14 13:50:55.797686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.800438"], ["updated_at", "2018-01-14 13:50:55.800438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.817111"], ["updated_at", "2018-01-14 13:50:55.817111"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.820193"], ["updated_at", "2018-01-14 13:50:55.820193"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.822839"], ["updated_at", "2018-01-14 13:50:55.822839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.829932"], ["updated_at", "2018-01-14 13:50:55.829932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.832199"], ["updated_at", "2018-01-14 13:50:55.832199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.839203"], ["updated_at", "2018-01-14 13:50:55.839203"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.841522"], ["updated_at", "2018-01-14 13:50:55.841522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:50:55.843862"], ["updated_at", "2018-01-14 13:50:55.843862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.847609"], ["updated_at", "2018-01-14 13:50:55.847609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:50:55.855454"], ["updated_at", "2018-01-14 13:50:55.855454"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.858138"], ["updated_at", "2018-01-14 13:50:55.858138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.860220"], ["updated_at", "2018-01-14 13:50:55.860220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.862091"], ["updated_at", "2018-01-14 13:50:55.862091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:50:55.863868"], ["updated_at", "2018-01-14 13:50:55.863868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:50:55.872239"], ["updated_at", "2018-01-14 13:50:55.872239"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:50:55.875241"], ["updated_at", "2018-01-14 13:50:55.875241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:51:06.203047', '2018-01-14 13:51:06.203047', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:51:06.203047', '2018-01-14 13:51:06.203047', 298486374)[0m
  [1m[35m (91.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:51:06.323247"], ["updated_at", "2018-01-14 13:51:06.323247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:51:06.327063"], ["updated_at", "2018-01-14 13:51:06.327063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:53:04.432986', '2018-01-14 13:53:04.432986', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:53:04.432986', '2018-01-14 13:53:04.432986', 298486374)[0m
  [1m[35m (103.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.551939"], ["updated_at", "2018-01-14 13:53:04.551939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.554212"], ["updated_at", "2018-01-14 13:53:04.554212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.555916"], ["updated_at", "2018-01-14 13:53:04.555916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.563364"], ["updated_at", "2018-01-14 13:53:04.563364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.565347"], ["updated_at", "2018-01-14 13:53:04.565347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.571342"], ["updated_at", "2018-01-14 13:53:04.571342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.573485"], ["updated_at", "2018-01-14 13:53:04.573485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.575560"], ["updated_at", "2018-01-14 13:53:04.575560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.577104"], ["updated_at", "2018-01-14 13:53:04.577104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.578872"], ["updated_at", "2018-01-14 13:53:04.578872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.585038"], ["updated_at", "2018-01-14 13:53:04.585038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.587021"], ["updated_at", "2018-01-14 13:53:04.587021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.588733"], ["updated_at", "2018-01-14 13:53:04.588733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.591103"], ["updated_at", "2018-01-14 13:53:04.591103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.598048"], ["updated_at", "2018-01-14 13:53:04.598048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.600145"], ["updated_at", "2018-01-14 13:53:04.600145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.601951"], ["updated_at", "2018-01-14 13:53:04.601951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.607701"], ["updated_at", "2018-01-14 13:53:04.607701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.610052"], ["updated_at", "2018-01-14 13:53:04.610052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.618312"], ["updated_at", "2018-01-14 13:53:04.618312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:04.620914"], ["updated_at", "2018-01-14 13:53:04.620914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:04.623608"], ["updated_at", "2018-01-14 13:53:04.623608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:04.626005"], ["updated_at", "2018-01-14 13:53:04.626005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:53:31.779826', '2018-01-14 13:53:31.779826', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:53:31.779826', '2018-01-14 13:53:31.779826', 298486374)[0m
  [1m[35m (113.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.910013"], ["updated_at", "2018-01-14 13:53:31.910013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.914164"], ["updated_at", "2018-01-14 13:53:31.914164"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.917658"], ["updated_at", "2018-01-14 13:53:31.917658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.921151"], ["updated_at", "2018-01-14 13:53:31.921151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.924345"], ["updated_at", "2018-01-14 13:53:31.924345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.936974"], ["updated_at", "2018-01-14 13:53:31.936974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.939180"], ["updated_at", "2018-01-14 13:53:31.939180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.940894"], ["updated_at", "2018-01-14 13:53:31.940894"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.948844"], ["updated_at", "2018-01-14 13:53:31.948844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.951610"], ["updated_at", "2018-01-14 13:53:31.951610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.954679"], ["updated_at", "2018-01-14 13:53:31.954679"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:31.962307"], ["updated_at", "2018-01-14 13:53:31.962307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:31.964228"], ["updated_at", "2018-01-14 13:53:31.964228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.966045"], ["updated_at", "2018-01-14 13:53:31.966045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.967579"], ["updated_at", "2018-01-14 13:53:31.967579"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:31.978575"], ["updated_at", "2018-01-14 13:53:31.978575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.980367"], ["updated_at", "2018-01-14 13:53:31.980367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:31.985897"], ["updated_at", "2018-01-14 13:53:31.985897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.987657"], ["updated_at", "2018-01-14 13:53:31.987657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.989233"], ["updated_at", "2018-01-14 13:53:31.989233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:31.990653"], ["updated_at", "2018-01-14 13:53:31.990653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_multiple_opening_events_and_no_appointment_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:31.996832"], ["updated_at", "2018-01-14 13:53:31.996832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:31.999514"], ["updated_at", "2018-01-14 13:53:31.999514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:32.007994"], ["updated_at", "2018-01-14 13:53:32.007994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:53:32.010066"], ["updated_at", "2018-01-14 13:53:32.010066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:53:32.012486"], ["updated_at", "2018-01-14 13:53:32.012486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:53:32.014263"], ["updated_at", "2018-01-14 13:53:32.014263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:55:27.175440', '2018-01-14 13:55:27.175440', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:55:27.175440', '2018-01-14 13:55:27.175440', 298486374)[0m
  [1m[35m (119.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.314945"], ["updated_at", "2018-01-14 13:55:27.314945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.318448"], ["updated_at", "2018-01-14 13:55:27.318448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.320344"], ["updated_at", "2018-01-14 13:55:27.320344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.321887"], ["updated_at", "2018-01-14 13:55:27.321887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.332259"], ["updated_at", "2018-01-14 13:55:27.332259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.335057"], ["updated_at", "2018-01-14 13:55:27.335057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.337130"], ["updated_at", "2018-01-14 13:55:27.337130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.339339"], ["updated_at", "2018-01-14 13:55:27.339339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.347755"], ["updated_at", "2018-01-14 13:55:27.347755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.350339"], ["updated_at", "2018-01-14 13:55:27.350339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.359431"], ["updated_at", "2018-01-14 13:55:27.359431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.361356"], ["updated_at", "2018-01-14 13:55:27.361356"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.369479"], ["updated_at", "2018-01-14 13:55:27.369479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:27.371393"], ["updated_at", "2018-01-14 13:55:27.371393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.373593"], ["updated_at", "2018-01-14 13:55:27.373593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.375404"], ["updated_at", "2018-01-14 13:55:27.375404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.383061"], ["updated_at", "2018-01-14 13:55:27.383061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.385672"], ["updated_at", "2018-01-14 13:55:27.385672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.387956"], ["updated_at", "2018-01-14 13:55:27.387956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:27.397598"], ["updated_at", "2018-01-14 13:55:27.397598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.400286"], ["updated_at", "2018-01-14 13:55:27.400286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.402290"], ["updated_at", "2018-01-14 13:55:27.402290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.404714"], ["updated_at", "2018-01-14 13:55:27.404714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.407265"], ["updated_at", "2018-01-14 13:55:27.407265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.416408"], ["updated_at", "2018-01-14 13:55:27.416408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.418847"], ["updated_at", "2018-01-14 13:55:27.418847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:27.421648"], ["updated_at", "2018-01-14 13:55:27.421648"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:55:51.933102', '2018-01-14 13:55:51.933102', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 13:55:51.933102', '2018-01-14 13:55:51.933102', 298486374)[0m
  [1m[35m (127.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.078852"], ["updated_at", "2018-01-14 13:55:52.078852"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.083032"], ["updated_at", "2018-01-14 13:55:52.083032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.086110"], ["updated_at", "2018-01-14 13:55:52.086110"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.099250"], ["updated_at", "2018-01-14 13:55:52.099250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.101591"], ["updated_at", "2018-01-14 13:55:52.101591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.104585"], ["updated_at", "2018-01-14 13:55:52.104585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.114397"], ["updated_at", "2018-01-14 13:55:52.114397"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.118018"], ["updated_at", "2018-01-14 13:55:52.118018"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.122044"], ["updated_at", "2018-01-14 13:55:52.122044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.124986"], ["updated_at", "2018-01-14 13:55:52.124986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.129642"], ["updated_at", "2018-01-14 13:55:52.129642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.139435"], ["updated_at", "2018-01-14 13:55:52.139435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.141886"], ["updated_at", "2018-01-14 13:55:52.141886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.143974"], ["updated_at", "2018-01-14 13:55:52.143974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.146810"], ["updated_at", "2018-01-14 13:55:52.146810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.154921"], ["updated_at", "2018-01-14 13:55:52.154921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.157559"], ["updated_at", "2018-01-14 13:55:52.157559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.160661"], ["updated_at", "2018-01-14 13:55:52.160661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.163629"], ["updated_at", "2018-01-14 13:55:52.163629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.172427"], ["updated_at", "2018-01-14 13:55:52.172427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.174532"], ["updated_at", "2018-01-14 13:55:52.174532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.182376"], ["updated_at", "2018-01-14 13:55:52.182376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.185463"], ["updated_at", "2018-01-14 13:55:52.185463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.189264"], ["updated_at", "2018-01-14 13:55:52.189264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 13:55:52.192193"], ["updated_at", "2018-01-14 13:55:52.192193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 13:55:52.205106"], ["updated_at", "2018-01-14 13:55:52.205106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 13:55:52.208035"], ["updated_at", "2018-01-14 13:55:52.208035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:07:17.978621', '2018-01-14 14:07:17.978621', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:07:17.978621', '2018-01-14 14:07:17.978621', 298486374)[0m
  [1m[35m (77.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.076614"], ["updated_at", "2018-01-14 14:07:18.076614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.080035"], ["updated_at", "2018-01-14 14:07:18.080035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.082838"], ["updated_at", "2018-01-14 14:07:18.082838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.085196"], ["updated_at", "2018-01-14 14:07:18.085196"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.088328"], ["updated_at", "2018-01-14 14:07:18.088328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.097513"], ["updated_at", "2018-01-14 14:07:18.097513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.099622"], ["updated_at", "2018-01-14 14:07:18.099622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.101338"], ["updated_at", "2018-01-14 14:07:18.101338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.102784"], ["updated_at", "2018-01-14 14:07:18.102784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.108469"], ["updated_at", "2018-01-14 14:07:18.108469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.110676"], ["updated_at", "2018-01-14 14:07:18.110676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.112573"], ["updated_at", "2018-01-14 14:07:18.112573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.114152"], ["updated_at", "2018-01-14 14:07:18.114152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.120447"], ["updated_at", "2018-01-14 14:07:18.120447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.122327"], ["updated_at", "2018-01-14 14:07:18.122327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.129440"], ["updated_at", "2018-01-14 14:07:18.129440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.131659"], ["updated_at", "2018-01-14 14:07:18.131659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:07:18.137563"], ["updated_at", "2018-01-14 14:07:18.137563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.139427"], ["updated_at", "2018-01-14 14:07:18.139427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.141242"], ["updated_at", "2018-01-14 14:07:18.141242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.142733"], ["updated_at", "2018-01-14 14:07:18.142733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.149233"], ["updated_at", "2018-01-14 14:07:18.149233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.151083"], ["updated_at", "2018-01-14 14:07:18.151083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.152699"], ["updated_at", "2018-01-14 14:07:18.152699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.158632"], ["updated_at", "2018-01-14 14:07:18.158632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:07:18.161510"], ["updated_at", "2018-01-14 14:07:18.161510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:07:18.164194"], ["updated_at", "2018-01-14 14:07:18.164194"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:09:38.786189', '2018-01-14 14:09:38.786189', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:09:38.786189', '2018-01-14 14:09:38.786189', 298486374)[0m
  [1m[35m (77.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.878460"], ["updated_at", "2018-01-14 14:09:38.878460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.882107"], ["updated_at", "2018-01-14 14:09:38.882107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.884945"], ["updated_at", "2018-01-14 14:09:38.884945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.887645"], ["updated_at", "2018-01-14 14:09:38.887645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.890036"], ["updated_at", "2018-01-14 14:09:38.890036"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.900473"], ["updated_at", "2018-01-14 14:09:38.900473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.903636"], ["updated_at", "2018-01-14 14:09:38.903636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.911152"], ["updated_at", "2018-01-14 14:09:38.911152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.913004"], ["updated_at", "2018-01-14 14:09:38.913004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.914631"], ["updated_at", "2018-01-14 14:09:38.914631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.916839"], ["updated_at", "2018-01-14 14:09:38.916839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.926193"], ["updated_at", "2018-01-14 14:09:38.926193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.928725"], ["updated_at", "2018-01-14 14:09:38.928725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.931088"], ["updated_at", "2018-01-14 14:09:38.931088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.933365"], ["updated_at", "2018-01-14 14:09:38.933365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.941177"], ["updated_at", "2018-01-14 14:09:38.941177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.943784"], ["updated_at", "2018-01-14 14:09:38.943784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.946050"], ["updated_at", "2018-01-14 14:09:38.946050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.954038"], ["updated_at", "2018-01-14 14:09:38.954038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.956759"], ["updated_at", "2018-01-14 14:09:38.956759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.964307"], ["updated_at", "2018-01-14 14:09:38.964307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.966867"], ["updated_at", "2018-01-14 14:09:38.966867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:09:38.974750"], ["updated_at", "2018-01-14 14:09:38.974750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.976612"], ["updated_at", "2018-01-14 14:09:38.976612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.978644"], ["updated_at", "2018-01-14 14:09:38.978644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.980982"], ["updated_at", "2018-01-14 14:09:38.980982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.987219"], ["updated_at", "2018-01-14 14:09:38.987219"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:09:38.988978"], ["updated_at", "2018-01-14 14:09:38.988978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:09:38.994124"], ["updated_at", "2018-01-14 14:09:38.994124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:22:29.853412', '2018-01-14 14:22:29.853412', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:22:29.853412', '2018-01-14 14:22:29.853412', 298486374)[0m
  [1m[35m (94.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:29.971364"], ["updated_at", "2018-01-14 14:22:29.971364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:29.974531"], ["updated_at", "2018-01-14 14:22:29.974531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:29.976865"], ["updated_at", "2018-01-14 14:22:29.976865"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:29.978943"], ["updated_at", "2018-01-14 14:22:29.978943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:29.981359"], ["updated_at", "2018-01-14 14:22:29.981359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:29.990943"], ["updated_at", "2018-01-14 14:22:29.990943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:29.993630"], ["updated_at", "2018-01-14 14:22:29.993630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:29.996147"], ["updated_at", "2018-01-14 14:22:29.996147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.003050"], ["updated_at", "2018-01-14 14:22:30.003050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.005136"], ["updated_at", "2018-01-14 14:22:30.005136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.010787"], ["updated_at", "2018-01-14 14:22:30.010787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.012783"], ["updated_at", "2018-01-14 14:22:30.012783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.014646"], ["updated_at", "2018-01-14 14:22:30.014646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.016227"], ["updated_at", "2018-01-14 14:22:30.016227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.023262"], ["updated_at", "2018-01-14 14:22:30.023262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.025175"], ["updated_at", "2018-01-14 14:22:30.025175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.026776"], ["updated_at", "2018-01-14 14:22:30.026776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.028229"], ["updated_at", "2018-01-14 14:22:30.028229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.034697"], ["updated_at", "2018-01-14 14:22:30.034697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.036603"], ["updated_at", "2018-01-14 14:22:30.036603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.042954"], ["updated_at", "2018-01-14 14:22:30.042954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.044902"], ["updated_at", "2018-01-14 14:22:30.044902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:22:30.046477"], ["updated_at", "2018-01-14 14:22:30.046477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.047948"], ["updated_at", "2018-01-14 14:22:30.047948"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:22:30.056582"], ["updated_at", "2018-01-14 14:22:30.056582"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.058663"], ["updated_at", "2018-01-14 14:22:30.058663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.065031"], ["updated_at", "2018-01-14 14:22:30.065031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.066926"], ["updated_at", "2018-01-14 14:22:30.066926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:22:30.068499"], ["updated_at", "2018-01-14 14:22:30.068499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:26:06.839023', '2018-01-14 14:26:06.839023', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:26:06.839023', '2018-01-14 14:26:06.839023', 298486374)[0m
  [1m[35m (77.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.934733"], ["updated_at", "2018-01-14 14:26:06.934733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.939172"], ["updated_at", "2018-01-14 14:26:06.939172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.942678"], ["updated_at", "2018-01-14 14:26:06.942678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.953956"], ["updated_at", "2018-01-14 14:26:06.953956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.957113"], ["updated_at", "2018-01-14 14:26:06.957113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:06.965829"], ["updated_at", "2018-01-14 14:26:06.965829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:06.967939"], ["updated_at", "2018-01-14 14:26:06.967939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.969730"], ["updated_at", "2018-01-14 14:26:06.969730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.971367"], ["updated_at", "2018-01-14 14:26:06.971367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:06.977868"], ["updated_at", "2018-01-14 14:26:06.977868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.980012"], ["updated_at", "2018-01-14 14:26:06.980012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.982235"], ["updated_at", "2018-01-14 14:26:06.982235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.984152"], ["updated_at", "2018-01-14 14:26:06.984152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.990199"], ["updated_at", "2018-01-14 14:26:06.990199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:06.992131"], ["updated_at", "2018-01-14 14:26:06.992131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:06.993687"], ["updated_at", "2018-01-14 14:26:06.993687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
EventTest: test_before_weekly_recurring_starts_at_appointments
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:06.999251"], ["updated_at", "2018-01-14 14:26:06.999251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:07.001322"], ["updated_at", "2018-01-14 14:26:07.001322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:07.003095"], ["updated_at", "2018-01-14 14:26:07.003095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.004629"], ["updated_at", "2018-01-14 14:26:07.004629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:07.009898"], ["updated_at", "2018-01-14 14:26:07.009898"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:07.012294"], ["updated_at", "2018-01-14 14:26:07.012294"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------
EventTest: test_full_opening_day
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:26:07.018783"], ["updated_at", "2018-01-14 14:26:07.018783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.020823"], ["updated_at", "2018-01-14 14:26:07.020823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 15:30:00"], ["ends_at", "2014-08-05 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.022497"], ["updated_at", "2018-01-14 14:26:07.022497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 16:00:00"], ["ends_at", "2014-08-05 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.024294"], ["updated_at", "2018-01-14 14:26:07.024294"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 17:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.026161"], ["updated_at", "2018-01-14 14:26:07.026161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:26:07.032455"], ["updated_at", "2018-01-14 14:26:07.032455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:26:07.034332"], ["updated_at", "2018-01-14 14:26:07.034332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:50:55.621890', '2018-01-14 14:50:55.621890', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:50:55.621890', '2018-01-14 14:50:55.621890', 298486374)[0m
  [1m[35m (111.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.759275"], ["updated_at", "2018-01-14 14:50:55.759275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.762739"], ["updated_at", "2018-01-14 14:50:55.762739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.765523"], ["updated_at", "2018-01-14 14:50:55.765523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.776581"], ["updated_at", "2018-01-14 14:50:55.776581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.779344"], ["updated_at", "2018-01-14 14:50:55.779344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.781999"], ["updated_at", "2018-01-14 14:50:55.781999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.790186"], ["updated_at", "2018-01-14 14:50:55.790186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.792799"], ["updated_at", "2018-01-14 14:50:55.792799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.795258"], ["updated_at", "2018-01-14 14:50:55.795258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.797369"], ["updated_at", "2018-01-14 14:50:55.797369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.805686"], ["updated_at", "2018-01-14 14:50:55.805686"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.808446"], ["updated_at", "2018-01-14 14:50:55.808446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.810750"], ["updated_at", "2018-01-14 14:50:55.810750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.812689"], ["updated_at", "2018-01-14 14:50:55.812689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.819058"], ["updated_at", "2018-01-14 14:50:55.819058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.821165"], ["updated_at", "2018-01-14 14:50:55.821165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.823228"], ["updated_at", "2018-01-14 14:50:55.823228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.825142"], ["updated_at", "2018-01-14 14:50:55.825142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.832014"], ["updated_at", "2018-01-14 14:50:55.832014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:50:55.834379"], ["updated_at", "2018-01-14 14:50:55.834379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.842101"], ["updated_at", "2018-01-14 14:50:55.842101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:50:55.846384"], ["updated_at", "2018-01-14 14:50:55.846384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.848159"], ["updated_at", "2018-01-14 14:50:55.848159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.849777"], ["updated_at", "2018-01-14 14:50:55.849777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.851441"], ["updated_at", "2018-01-14 14:50:55.851441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:50:55.852932"], ["updated_at", "2018-01-14 14:50:55.852932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:51:10.241187', '2018-01-14 14:51:10.241187', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:51:10.241187', '2018-01-14 14:51:10.241187', 298486374)[0m
  [1m[35m (80.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.336778"], ["updated_at", "2018-01-14 14:51:10.336778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.339336"], ["updated_at", "2018-01-14 14:51:10.339336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.348557"], ["updated_at", "2018-01-14 14:51:10.348557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.350563"], ["updated_at", "2018-01-14 14:51:10.350563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.356675"], ["updated_at", "2018-01-14 14:51:10.356675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.358703"], ["updated_at", "2018-01-14 14:51:10.358703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.360419"], ["updated_at", "2018-01-14 14:51:10.360419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.361852"], ["updated_at", "2018-01-14 14:51:10.361852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.363284"], ["updated_at", "2018-01-14 14:51:10.363284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.364643"], ["updated_at", "2018-01-14 14:51:10.364643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.371825"], ["updated_at", "2018-01-14 14:51:10.371825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.373965"], ["updated_at", "2018-01-14 14:51:10.373965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.375702"], ["updated_at", "2018-01-14 14:51:10.375702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.382845"], ["updated_at", "2018-01-14 14:51:10.382845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.384935"], ["updated_at", "2018-01-14 14:51:10.384935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.386701"], ["updated_at", "2018-01-14 14:51:10.386701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.388225"], ["updated_at", "2018-01-14 14:51:10.388225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.394283"], ["updated_at", "2018-01-14 14:51:10.394283"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.396178"], ["updated_at", "2018-01-14 14:51:10.396178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.397753"], ["updated_at", "2018-01-14 14:51:10.397753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.399212"], ["updated_at", "2018-01-14 14:51:10.399212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.405106"], ["updated_at", "2018-01-14 14:51:10.405106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.407337"], ["updated_at", "2018-01-14 14:51:10.407337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.408939"], ["updated_at", "2018-01-14 14:51:10.408939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.414395"], ["updated_at", "2018-01-14 14:51:10.414395"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.416305"], ["updated_at", "2018-01-14 14:51:10.416305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:51:10.422392"], ["updated_at", "2018-01-14 14:51:10.422392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.424368"], ["updated_at", "2018-01-14 14:51:10.424368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:51:10.425969"], ["updated_at", "2018-01-14 14:51:10.425969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:51:10.427415"], ["updated_at", "2018-01-14 14:51:10.427415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:52:30.846007', '2018-01-14 14:52:30.846007', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:52:30.846007', '2018-01-14 14:52:30.846007', 298486374)[0m
  [1m[35m (89.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:30.957173"], ["updated_at", "2018-01-14 14:52:30.957173"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:30.961839"], ["updated_at", "2018-01-14 14:52:30.961839"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.965388"], ["updated_at", "2018-01-14 14:52:30.965388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.968288"], ["updated_at", "2018-01-14 14:52:30.968288"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.972329"], ["updated_at", "2018-01-14 14:52:30.972329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.975691"], ["updated_at", "2018-01-14 14:52:30.975691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.990300"], ["updated_at", "2018-01-14 14:52:30.990300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:30.993742"], ["updated_at", "2018-01-14 14:52:30.993742"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.001875"], ["updated_at", "2018-01-14 14:52:31.001875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.010136"], ["updated_at", "2018-01-14 14:52:31.010136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.013096"], ["updated_at", "2018-01-14 14:52:31.013096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.022288"], ["updated_at", "2018-01-14 14:52:31.022288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.025175"], ["updated_at", "2018-01-14 14:52:31.025175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.027580"], ["updated_at", "2018-01-14 14:52:31.027580"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.030047"], ["updated_at", "2018-01-14 14:52:31.030047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.038251"], ["updated_at", "2018-01-14 14:52:31.038251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.040872"], ["updated_at", "2018-01-14 14:52:31.040872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.043352"], ["updated_at", "2018-01-14 14:52:31.043352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.045419"], ["updated_at", "2018-01-14 14:52:31.045419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.055227"], ["updated_at", "2018-01-14 14:52:31.055227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.057823"], ["updated_at", "2018-01-14 14:52:31.057823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.060306"], ["updated_at", "2018-01-14 14:52:31.060306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.067972"], ["updated_at", "2018-01-14 14:52:31.067972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.070410"], ["updated_at", "2018-01-14 14:52:31.070410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.077761"], ["updated_at", "2018-01-14 14:52:31.077761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.080532"], ["updated_at", "2018-01-14 14:52:31.080532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.083434"], ["updated_at", "2018-01-14 14:52:31.083434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:52:31.085791"], ["updated_at", "2018-01-14 14:52:31.085791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:52:31.092813"], ["updated_at", "2018-01-14 14:52:31.092813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:52:31.095620"], ["updated_at", "2018-01-14 14:52:31.095620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:54:12.390844', '2018-01-14 14:54:12.390844', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:54:12.390844', '2018-01-14 14:54:12.390844', 298486374)[0m
  [1m[35m (82.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:54:12.489084"], ["updated_at", "2018-01-14 14:54:12.489084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:54:12.492432"], ["updated_at", "2018-01-14 14:54:12.492432"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:54:12.496127"], ["updated_at", "2018-01-14 14:54:12.496127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:54:12.498384"], ["updated_at", "2018-01-14 14:54:12.498384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:54:12.507746"], ["updated_at", "2018-01-14 14:54:12.507746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:54:12.510113"], ["updated_at", "2018-01-14 14:54:12.510113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:54:12.511995"], ["updated_at", "2018-01-14 14:54:12.511995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:55:03.659895', '2018-01-14 14:55:03.659895', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 14:55:03.659895', '2018-01-14 14:55:03.659895', 298486374)[0m
  [1m[35m (80.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.759078"], ["updated_at", "2018-01-14 14:55:03.759078"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.768409"], ["updated_at", "2018-01-14 14:55:03.768409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.771274"], ["updated_at", "2018-01-14 14:55:03.771274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.774203"], ["updated_at", "2018-01-14 14:55:03.774203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.787677"], ["updated_at", "2018-01-14 14:55:03.787677"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.790670"], ["updated_at", "2018-01-14 14:55:03.790670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.793445"], ["updated_at", "2018-01-14 14:55:03.793445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.796142"], ["updated_at", "2018-01-14 14:55:03.796142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.805562"], ["updated_at", "2018-01-14 14:55:03.805562"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.808271"], ["updated_at", "2018-01-14 14:55:03.808271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.810959"], ["updated_at", "2018-01-14 14:55:03.810959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.813170"], ["updated_at", "2018-01-14 14:55:03.813170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.816181"], ["updated_at", "2018-01-14 14:55:03.816181"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.819367"], ["updated_at", "2018-01-14 14:55:03.819367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.826287"], ["updated_at", "2018-01-14 14:55:03.826287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.828021"], ["updated_at", "2018-01-14 14:55:03.828021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.834243"], ["updated_at", "2018-01-14 14:55:03.834243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.835909"], ["updated_at", "2018-01-14 14:55:03.835909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.840952"], ["updated_at", "2018-01-14 14:55:03.840952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.842651"], ["updated_at", "2018-01-14 14:55:03.842651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.844262"], ["updated_at", "2018-01-14 14:55:03.844262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.850699"], ["updated_at", "2018-01-14 14:55:03.850699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.852596"], ["updated_at", "2018-01-14 14:55:03.852596"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 14:55:03.854446"], ["updated_at", "2018-01-14 14:55:03.854446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.856010"], ["updated_at", "2018-01-14 14:55:03.856010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 14:55:03.860894"], ["updated_at", "2018-01-14 14:55:03.860894"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.862587"], ["updated_at", "2018-01-14 14:55:03.862587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.867928"], ["updated_at", "2018-01-14 14:55:03.867928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.869505"], ["updated_at", "2018-01-14 14:55:03.869505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 14:55:03.871056"], ["updated_at", "2018-01-14 14:55:03.871056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-18 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-11"], ["starts_at", "2014-08-17"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-11 00:00:00"], ["starts_at", "2014-08-17 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:04:09.664596', '2018-01-14 15:04:09.664596', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:04:09.664596', '2018-01-14 15:04:09.664596', 298486374)[0m
  [1m[35m (109.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.793231"], ["updated_at", "2018-01-14 15:04:09.793231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.797281"], ["updated_at", "2018-01-14 15:04:09.797281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.800556"], ["updated_at", "2018-01-14 15:04:09.800556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.803082"], ["updated_at", "2018-01-14 15:04:09.803082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.805900"], ["updated_at", "2018-01-14 15:04:09.805900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.808333"], ["updated_at", "2018-01-14 15:04:09.808333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.821656"], ["updated_at", "2018-01-14 15:04:09.821656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.825035"], ["updated_at", "2018-01-14 15:04:09.825035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.836247"], ["updated_at", "2018-01-14 15:04:09.836247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.839367"], ["updated_at", "2018-01-14 15:04:09.839367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.842215"], ["updated_at", "2018-01-14 15:04:09.842215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.845114"], ["updated_at", "2018-01-14 15:04:09.845114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.854437"], ["updated_at", "2018-01-14 15:04:09.854437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.857190"], ["updated_at", "2018-01-14 15:04:09.857190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.859835"], ["updated_at", "2018-01-14 15:04:09.859835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.862008"], ["updated_at", "2018-01-14 15:04:09.862008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.869349"], ["updated_at", "2018-01-14 15:04:09.869349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.876068"], ["updated_at", "2018-01-14 15:04:09.876068"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.884006"], ["updated_at", "2018-01-14 15:04:09.884006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.887052"], ["updated_at", "2018-01-14 15:04:09.887052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.889606"], ["updated_at", "2018-01-14 15:04:09.889606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.892189"], ["updated_at", "2018-01-14 15:04:09.892189"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:04:09.901424"], ["updated_at", "2018-01-14 15:04:09.901424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.904137"], ["updated_at", "2018-01-14 15:04:09.904137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.912389"], ["updated_at", "2018-01-14 15:04:09.912389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:04:09.915230"], ["updated_at", "2018-01-14 15:04:09.915230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.918026"], ["updated_at", "2018-01-14 15:04:09.918026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.924124"], ["updated_at", "2018-01-14 15:04:09.924124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:04:09.926004"], ["updated_at", "2018-01-14 15:04:09.926004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:06:14.164604', '2018-01-14 15:06:14.164604', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:06:14.164604', '2018-01-14 15:06:14.164604', 298486374)[0m
  [1m[35m (100.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:06:14.285908"], ["updated_at", "2018-01-14 15:06:14.285908"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:06:14.291590"], ["updated_at", "2018-01-14 15:06:14.291590"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.295640"], ["updated_at", "2018-01-14 15:06:14.295640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.299023"], ["updated_at", "2018-01-14 15:06:14.299023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.302385"], ["updated_at", "2018-01-14 15:06:14.302385"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.305787"], ["updated_at", "2018-01-14 15:06:14.305787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:06:14.320752"], ["updated_at", "2018-01-14 15:06:14.320752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:06:14.324368"], ["updated_at", "2018-01-14 15:06:14.324368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:06:14.327952"], ["updated_at", "2018-01-14 15:06:14.327952"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.331255"], ["updated_at", "2018-01-14 15:06:14.331255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
EventTest: test_no_opening_and_multiple_appointments_event_case
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.342010"], ["updated_at", "2018-01-14 15:06:14.342010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:06:14.344907"], ["updated_at", "2018-01-14 15:06:14.344907"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:07:29.465671', '2018-01-14 15:07:29.465671', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:07:29.465671', '2018-01-14 15:07:29.465671', 298486374)[0m
  [1m[35m (115.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.597087"], ["updated_at", "2018-01-14 15:07:29.597087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.599851"], ["updated_at", "2018-01-14 15:07:29.599851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.608168"], ["updated_at", "2018-01-14 15:07:29.608168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.610283"], ["updated_at", "2018-01-14 15:07:29.610283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.612058"], ["updated_at", "2018-01-14 15:07:29.612058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.613626"], ["updated_at", "2018-01-14 15:07:29.613626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.621831"], ["updated_at", "2018-01-14 15:07:29.621831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.624187"], ["updated_at", "2018-01-14 15:07:29.624187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.626006"], ["updated_at", "2018-01-14 15:07:29.626006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.627649"], ["updated_at", "2018-01-14 15:07:29.627649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.629162"], ["updated_at", "2018-01-14 15:07:29.629162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.630619"], ["updated_at", "2018-01-14 15:07:29.630619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.639967"], ["updated_at", "2018-01-14 15:07:29.639967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.642086"], ["updated_at", "2018-01-14 15:07:29.642086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.648425"], ["updated_at", "2018-01-14 15:07:29.648425"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.650436"], ["updated_at", "2018-01-14 15:07:29.650436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.652098"], ["updated_at", "2018-01-14 15:07:29.652098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.657602"], ["updated_at", "2018-01-14 15:07:29.657602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.659582"], ["updated_at", "2018-01-14 15:07:29.659582"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.665356"], ["updated_at", "2018-01-14 15:07:29.665356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.667884"], ["updated_at", "2018-01-14 15:07:29.667884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.670236"], ["updated_at", "2018-01-14 15:07:29.670236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.672325"], ["updated_at", "2018-01-14 15:07:29.672325"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.678449"], ["updated_at", "2018-01-14 15:07:29.678449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.680528"], ["updated_at", "2018-01-14 15:07:29.680528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.686951"], ["updated_at", "2018-01-14 15:07:29.686951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:07:29.690946"], ["updated_at", "2018-01-14 15:07:29.690946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:07:29.692976"], ["updated_at", "2018-01-14 15:07:29.692976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:07:29.694681"], ["updated_at", "2018-01-14 15:07:29.694681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:08:26.588600', '2018-01-14 15:08:26.588600', 980190962)[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:08:26.588600', '2018-01-14 15:08:26.588600', 298486374)[0m
  [1m[35m (93.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.700138"], ["updated_at", "2018-01-14 15:08:26.700138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.703288"], ["updated_at", "2018-01-14 15:08:26.703288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.705615"], ["updated_at", "2018-01-14 15:08:26.705615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.707718"], ["updated_at", "2018-01-14 15:08:26.707718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.709752"], ["updated_at", "2018-01-14 15:08:26.709752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.711808"], ["updated_at", "2018-01-14 15:08:26.711808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.731577"], ["updated_at", "2018-01-14 15:08:26.731577"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.735177"], ["updated_at", "2018-01-14 15:08:26.735177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.737517"], ["updated_at", "2018-01-14 15:08:26.737517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.739419"], ["updated_at", "2018-01-14 15:08:26.739419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.745809"], ["updated_at", "2018-01-14 15:08:26.745809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.748102"], ["updated_at", "2018-01-14 15:08:26.748102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.750005"], ["updated_at", "2018-01-14 15:08:26.750005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.756880"], ["updated_at", "2018-01-14 15:08:26.756880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.759700"], ["updated_at", "2018-01-14 15:08:26.759700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.761965"], ["updated_at", "2018-01-14 15:08:26.761965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.763927"], ["updated_at", "2018-01-14 15:08:26.763927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.772121"], ["updated_at", "2018-01-14 15:08:26.772121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.773951"], ["updated_at", "2018-01-14 15:08:26.773951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.780181"], ["updated_at", "2018-01-14 15:08:26.780181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.783440"], ["updated_at", "2018-01-14 15:08:26.783440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.794391"], ["updated_at", "2018-01-14 15:08:26.794391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.797455"], ["updated_at", "2018-01-14 15:08:26.797455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.800297"], ["updated_at", "2018-01-14 15:08:26.800297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:08:26.802728"], ["updated_at", "2018-01-14 15:08:26.802728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:08:26.810634"], ["updated_at", "2018-01-14 15:08:26.810634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.813420"], ["updated_at", "2018-01-14 15:08:26.813420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.820525"], ["updated_at", "2018-01-14 15:08:26.820525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:08:26.822408"], ["updated_at", "2018-01-14 15:08:26.822408"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:17:31.653405', '2018-01-14 15:17:31.653405', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:17:31.653405', '2018-01-14 15:17:31.653405', 298486374)[0m
  [1m[35m (84.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:17:31.759759"], ["updated_at", "2018-01-14 15:17:31.759759"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:17:31.763314"], ["updated_at", "2018-01-14 15:17:31.763314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:17:31.765950"], ["updated_at", "2018-01-14 15:17:31.765950"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:17:59.983711', '2018-01-14 15:17:59.983711', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:17:59.983711', '2018-01-14 15:17:59.983711', 298486374)[0m
  [1m[35m (100.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:00.101031"], ["updated_at", "2018-01-14 15:18:00.101031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:00.104906"], ["updated_at", "2018-01-14 15:18:00.104906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:18:00.107800"], ["updated_at", "2018-01-14 15:18:00.107800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:00.110808"], ["updated_at", "2018-01-14 15:18:00.110808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:00.121575"], ["updated_at", "2018-01-14 15:18:00.121575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:18:00.124557"], ["updated_at", "2018-01-14 15:18:00.124557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:18:00.127426"], ["updated_at", "2018-01-14 15:18:00.127426"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:00.129655"], ["updated_at", "2018-01-14 15:18:00.129655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:00.139054"], ["updated_at", "2018-01-14 15:18:00.139054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:18:00.141636"], ["updated_at", "2018-01-14 15:18:00.141636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:00.154743"], ["updated_at", "2018-01-14 15:18:00.154743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:00.157311"], ["updated_at", "2018-01-14 15:18:00.157311"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:00.159942"], ["updated_at", "2018-01-14 15:18:00.159942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:18:17.396458', '2018-01-14 15:18:17.396458', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:18:17.396458', '2018-01-14 15:18:17.396458', 298486374)[0m
  [1m[35m (87.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:17.502923"], ["updated_at", "2018-01-14 15:18:17.502923"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:17.506033"], ["updated_at", "2018-01-14 15:18:17.506033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:17.508097"], ["updated_at", "2018-01-14 15:18:17.508097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:18:39.132750', '2018-01-14 15:18:39.132750', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:18:39.132750', '2018-01-14 15:18:39.132750', 298486374)[0m
  [1m[35m (85.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:39.233936"], ["updated_at", "2018-01-14 15:18:39.233936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:18:39.236702"], ["updated_at", "2018-01-14 15:18:39.236702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:18:39.238665"], ["updated_at", "2018-01-14 15:18:39.238665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:39.240363"], ["updated_at", "2018-01-14 15:18:39.240363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:39.248818"], ["updated_at", "2018-01-14 15:18:39.248818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:39.250890"], ["updated_at", "2018-01-14 15:18:39.250890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:18:39.252809"], ["updated_at", "2018-01-14 15:18:39.252809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-07-20 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:19:15.196991', '2018-01-14 15:19:15.196991', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:19:15.196991', '2018-01-14 15:19:15.196991', 298486374)[0m
  [1m[35m (100.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:15.313289"], ["updated_at", "2018-01-14 15:19:15.313289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:15.315955"], ["updated_at", "2018-01-14 15:19:15.315955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:15.317862"], ["updated_at", "2018-01-14 15:19:15.317862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:15.326261"], ["updated_at", "2018-01-14 15:19:15.326261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:15.328324"], ["updated_at", "2018-01-14 15:19:15.328324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:15.330078"], ["updated_at", "2018-01-14 15:19:15.330078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-04 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:19:51.850805', '2018-01-14 15:19:51.850805', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:19:51.850805', '2018-01-14 15:19:51.850805', 298486374)[0m
  [1m[35m (92.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.963696"], ["updated_at", "2018-01-14 15:19:51.963696"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.968197"], ["updated_at", "2018-01-14 15:19:51.968197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.971665"], ["updated_at", "2018-01-14 15:19:51.971665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:51.979069"], ["updated_at", "2018-01-14 15:19:51.979069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:51.981796"], ["updated_at", "2018-01-14 15:19:51.981796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.983958"], ["updated_at", "2018-01-14 15:19:51.983958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.985879"], ["updated_at", "2018-01-14 15:19:51.985879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.987848"], ["updated_at", "2018-01-14 15:19:51.987848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:51.989739"], ["updated_at", "2018-01-14 15:19:51.989739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:51.998909"], ["updated_at", "2018-01-14 15:19:51.998909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.001277"], ["updated_at", "2018-01-14 15:19:52.001277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.003276"], ["updated_at", "2018-01-14 15:19:52.003276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.005084"], ["updated_at", "2018-01-14 15:19:52.005084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.013440"], ["updated_at", "2018-01-14 15:19:52.013440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.015674"], ["updated_at", "2018-01-14 15:19:52.015674"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.022378"], ["updated_at", "2018-01-14 15:19:52.022378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.024743"], ["updated_at", "2018-01-14 15:19:52.024743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.026590"], ["updated_at", "2018-01-14 15:19:52.026590"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.028223"], ["updated_at", "2018-01-14 15:19:52.028223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.034899"], ["updated_at", "2018-01-14 15:19:52.034899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.036949"], ["updated_at", "2018-01-14 15:19:52.036949"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.044211"], ["updated_at", "2018-01-14 15:19:52.044211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.046557"], ["updated_at", "2018-01-14 15:19:52.046557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.053302"], ["updated_at", "2018-01-14 15:19:52.053302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.055429"], ["updated_at", "2018-01-14 15:19:52.055429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.061279"], ["updated_at", "2018-01-14 15:19:52.061279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:19:52.063362"], ["updated_at", "2018-01-14 15:19:52.063362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.065061"], ["updated_at", "2018-01-14 15:19:52.065061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.066770"], ["updated_at", "2018-01-14 15:19:52.066770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.075095"], ["updated_at", "2018-01-14 15:19:52.075095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:19:52.077124"], ["updated_at", "2018-01-14 15:19:52.077124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:19:52.078853"], ["updated_at", "2018-01-14 15:19:52.078853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:20:50.593449', '2018-01-14 15:20:50.593449', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:20:50.593449', '2018-01-14 15:20:50.593449', 298486374)[0m
  [1m[35m (85.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.693419"], ["updated_at", "2018-01-14 15:20:50.693419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.696990"], ["updated_at", "2018-01-14 15:20:50.696990"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.700475"], ["updated_at", "2018-01-14 15:20:50.700475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.713064"], ["updated_at", "2018-01-14 15:20:50.713064"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.715803"], ["updated_at", "2018-01-14 15:20:50.715803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.724881"], ["updated_at", "2018-01-14 15:20:50.724881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.727443"], ["updated_at", "2018-01-14 15:20:50.727443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.734513"], ["updated_at", "2018-01-14 15:20:50.734513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.737302"], ["updated_at", "2018-01-14 15:20:50.737302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.740112"], ["updated_at", "2018-01-14 15:20:50.740112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.742568"], ["updated_at", "2018-01-14 15:20:50.742568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.744959"], ["updated_at", "2018-01-14 15:20:50.744959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.747256"], ["updated_at", "2018-01-14 15:20:50.747256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.756023"], ["updated_at", "2018-01-14 15:20:50.756023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.758514"], ["updated_at", "2018-01-14 15:20:50.758514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.760801"], ["updated_at", "2018-01-14 15:20:50.760801"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.763027"], ["updated_at", "2018-01-14 15:20:50.763027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:20:50.768108"], ["updated_at", "2018-01-14 15:20:50.768108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.769782"], ["updated_at", "2018-01-14 15:20:50.769782"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:20:50.771810"], ["updated_at", "2018-01-14 15:20:50.771810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.773436"], ["updated_at", "2018-01-14 15:20:50.773436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.779267"], ["updated_at", "2018-01-14 15:20:50.779267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.781375"], ["updated_at", "2018-01-14 15:20:50.781375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:20:50.783185"], ["updated_at", "2018-01-14 15:20:50.783185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:21:04.495149', '2018-01-14 15:21:04.495149', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:21:04.495149', '2018-01-14 15:21:04.495149', 298486374)[0m
  [1m[35m (95.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.621298"], ["updated_at", "2018-01-14 15:21:04.621298"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.626047"], ["updated_at", "2018-01-14 15:21:04.626047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.629838"], ["updated_at", "2018-01-14 15:21:04.629838"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.643337"], ["updated_at", "2018-01-14 15:21:04.643337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.647186"], ["updated_at", "2018-01-14 15:21:04.647186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.650359"], ["updated_at", "2018-01-14 15:21:04.650359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.657274"], ["updated_at", "2018-01-14 15:21:04.657274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.660545"], ["updated_at", "2018-01-14 15:21:04.660545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.663692"], ["updated_at", "2018-01-14 15:21:04.663692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.666141"], ["updated_at", "2018-01-14 15:21:04.666141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.675597"], ["updated_at", "2018-01-14 15:21:04.675597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.679185"], ["updated_at", "2018-01-14 15:21:04.679185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.687617"], ["updated_at", "2018-01-14 15:21:04.687617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.690456"], ["updated_at", "2018-01-14 15:21:04.690456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.698778"], ["updated_at", "2018-01-14 15:21:04.698778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.701709"], ["updated_at", "2018-01-14 15:21:04.701709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.704193"], ["updated_at", "2018-01-14 15:21:04.704193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.707092"], ["updated_at", "2018-01-14 15:21:04.707092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.709595"], ["updated_at", "2018-01-14 15:21:04.709595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.711946"], ["updated_at", "2018-01-14 15:21:04.711946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.720666"], ["updated_at", "2018-01-14 15:21:04.720666"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.723269"], ["updated_at", "2018-01-14 15:21:04.723269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.725546"], ["updated_at", "2018-01-14 15:21:04.725546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.727892"], ["updated_at", "2018-01-14 15:21:04.727892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.736145"], ["updated_at", "2018-01-14 15:21:04.736145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.738855"], ["updated_at", "2018-01-14 15:21:04.738855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.741336"], ["updated_at", "2018-01-14 15:21:04.741336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.743593"], ["updated_at", "2018-01-14 15:21:04.743593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.751636"], ["updated_at", "2018-01-14 15:21:04.751636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:04.754133"], ["updated_at", "2018-01-14 15:21:04.754133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:04.761153"], ["updated_at", "2018-01-14 15:21:04.761153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:04.763747"], ["updated_at", "2018-01-14 15:21:04.763747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:21:53.774125', '2018-01-14 15:21:53.774125', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:21:53.774125', '2018-01-14 15:21:53.774125', 298486374)[0m
  [1m[35m (61.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:53.850440"], ["updated_at", "2018-01-14 15:21:53.850440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:53.853388"], ["updated_at", "2018-01-14 15:21:53.853388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:53.862564"], ["updated_at", "2018-01-14 15:21:53.862564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:21:53.865215"], ["updated_at", "2018-01-14 15:21:53.865215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:21:53.867484"], ["updated_at", "2018-01-14 15:21:53.867484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:53.869854"], ["updated_at", "2018-01-14 15:21:53.869854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:53.878077"], ["updated_at", "2018-01-14 15:21:53.878077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:53.880615"], ["updated_at", "2018-01-14 15:21:53.880615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:21:53.882779"], ["updated_at", "2018-01-14 15:21:53.882779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:22:02.913312', '2018-01-14 15:22:02.913312', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:22:02.913312', '2018-01-14 15:22:02.913312', 298486374)[0m
  [1m[35m (113.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.047103"], ["updated_at", "2018-01-14 15:22:03.047103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.050679"], ["updated_at", "2018-01-14 15:22:03.050679"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.053345"], ["updated_at", "2018-01-14 15:22:03.053345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.055621"], ["updated_at", "2018-01-14 15:22:03.055621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.067324"], ["updated_at", "2018-01-14 15:22:03.067324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.070016"], ["updated_at", "2018-01-14 15:22:03.070016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.072365"], ["updated_at", "2018-01-14 15:22:03.072365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.074405"], ["updated_at", "2018-01-14 15:22:03.074405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.076569"], ["updated_at", "2018-01-14 15:22:03.076569"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.079333"], ["updated_at", "2018-01-14 15:22:03.079333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.087518"], ["updated_at", "2018-01-14 15:22:03.087518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.090024"], ["updated_at", "2018-01-14 15:22:03.090024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.092089"], ["updated_at", "2018-01-14 15:22:03.092089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.094673"], ["updated_at", "2018-01-14 15:22:03.094673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.101899"], ["updated_at", "2018-01-14 15:22:03.101899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.108858"], ["updated_at", "2018-01-14 15:22:03.108858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.110760"], ["updated_at", "2018-01-14 15:22:03.110760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.116969"], ["updated_at", "2018-01-14 15:22:03.116969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.119090"], ["updated_at", "2018-01-14 15:22:03.119090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.120873"], ["updated_at", "2018-01-14 15:22:03.120873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.124857"], ["updated_at", "2018-01-14 15:22:03.124857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.127599"], ["updated_at", "2018-01-14 15:22:03.127599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.134421"], ["updated_at", "2018-01-14 15:22:03.134421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.136760"], ["updated_at", "2018-01-14 15:22:03.136760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.142756"], ["updated_at", "2018-01-14 15:22:03.142756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.144642"], ["updated_at", "2018-01-14 15:22:03.144642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.150592"], ["updated_at", "2018-01-14 15:22:03.150592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.152722"], ["updated_at", "2018-01-14 15:22:03.152722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.154722"], ["updated_at", "2018-01-14 15:22:03.154722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:03.156738"], ["updated_at", "2018-01-14 15:22:03.156738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:03.164284"], ["updated_at", "2018-01-14 15:22:03.164284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:03.166035"], ["updated_at", "2018-01-14 15:22:03.166035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:22:05.791170', '2018-01-14 15:22:05.791170', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:22:05.791170', '2018-01-14 15:22:05.791170', 298486374)[0m
  [1m[35m (289.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.101850"], ["updated_at", "2018-01-14 15:22:06.101850"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.105658"], ["updated_at", "2018-01-14 15:22:06.105658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.108391"], ["updated_at", "2018-01-14 15:22:06.108391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.110774"], ["updated_at", "2018-01-14 15:22:06.110774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.123870"], ["updated_at", "2018-01-14 15:22:06.123870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.126725"], ["updated_at", "2018-01-14 15:22:06.126725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.135285"], ["updated_at", "2018-01-14 15:22:06.135285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.137851"], ["updated_at", "2018-01-14 15:22:06.137851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.140272"], ["updated_at", "2018-01-14 15:22:06.140272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.145500"], ["updated_at", "2018-01-14 15:22:06.145500"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.148251"], ["updated_at", "2018-01-14 15:22:06.148251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.151381"], ["updated_at", "2018-01-14 15:22:06.151381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.154229"], ["updated_at", "2018-01-14 15:22:06.154229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.163133"], ["updated_at", "2018-01-14 15:22:06.163133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.165833"], ["updated_at", "2018-01-14 15:22:06.165833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.168042"], ["updated_at", "2018-01-14 15:22:06.168042"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.174906"], ["updated_at", "2018-01-14 15:22:06.174906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.177133"], ["updated_at", "2018-01-14 15:22:06.177133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.178959"], ["updated_at", "2018-01-14 15:22:06.178959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.180585"], ["updated_at", "2018-01-14 15:22:06.180585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.182263"], ["updated_at", "2018-01-14 15:22:06.182263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.184909"], ["updated_at", "2018-01-14 15:22:06.184909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.193971"], ["updated_at", "2018-01-14 15:22:06.193971"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.196220"], ["updated_at", "2018-01-14 15:22:06.196220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.203012"], ["updated_at", "2018-01-14 15:22:06.203012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.204974"], ["updated_at", "2018-01-14 15:22:06.204974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.210259"], ["updated_at", "2018-01-14 15:22:06.210259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.212295"], ["updated_at", "2018-01-14 15:22:06.212295"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:22:06.219417"], ["updated_at", "2018-01-14 15:22:06.219417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.221356"], ["updated_at", "2018-01-14 15:22:06.221356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:22:06.222980"], ["updated_at", "2018-01-14 15:22:06.222980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:22:06.224566"], ["updated_at", "2018-01-14 15:22:06.224566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:32:00.727412', '2018-01-14 15:32:00.727412', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:32:00.727412', '2018-01-14 15:32:00.727412', 298486374)[0m
  [1m[35m (98.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:32:00.846704"], ["updated_at", "2018-01-14 15:32:00.846704"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:32:00.851371"], ["updated_at", "2018-01-14 15:32:00.851371"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:32:00.854689"], ["updated_at", "2018-01-14 15:32:00.854689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:32:00.863845"], ["updated_at", "2018-01-14 15:32:00.863845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:32:00.867344"], ["updated_at", "2018-01-14 15:32:00.867344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:12.056685', '2018-01-14 15:33:12.056685', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:12.056685', '2018-01-14 15:33:12.056685', 298486374)[0m
  [1m[35m (72.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.149032"], ["updated_at", "2018-01-14 15:33:12.149032"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.152537"], ["updated_at", "2018-01-14 15:33:12.152537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.155345"], ["updated_at", "2018-01-14 15:33:12.155345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.157976"], ["updated_at", "2018-01-14 15:33:12.157976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.168277"], ["updated_at", "2018-01-14 15:33:12.168277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.170374"], ["updated_at", "2018-01-14 15:33:12.170374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.177033"], ["updated_at", "2018-01-14 15:33:12.177033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.179486"], ["updated_at", "2018-01-14 15:33:12.179486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.181428"], ["updated_at", "2018-01-14 15:33:12.181428"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.183113"], ["updated_at", "2018-01-14 15:33:12.183113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.189141"], ["updated_at", "2018-01-14 15:33:12.189141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.190996"], ["updated_at", "2018-01-14 15:33:12.190996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.192678"], ["updated_at", "2018-01-14 15:33:12.192678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.194159"], ["updated_at", "2018-01-14 15:33:12.194159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.201052"], ["updated_at", "2018-01-14 15:33:12.201052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.202745"], ["updated_at", "2018-01-14 15:33:12.202745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.207804"], ["updated_at", "2018-01-14 15:33:12.207804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.209851"], ["updated_at", "2018-01-14 15:33:12.209851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.215127"], ["updated_at", "2018-01-14 15:33:12.215127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.216831"], ["updated_at", "2018-01-14 15:33:12.216831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.218452"], ["updated_at", "2018-01-14 15:33:12.218452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.219942"], ["updated_at", "2018-01-14 15:33:12.219942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.221386"], ["updated_at", "2018-01-14 15:33:12.221386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.222777"], ["updated_at", "2018-01-14 15:33:12.222777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.229861"], ["updated_at", "2018-01-14 15:33:12.229861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.231956"], ["updated_at", "2018-01-14 15:33:12.231956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:12.239297"], ["updated_at", "2018-01-14 15:33:12.239297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.241029"], ["updated_at", "2018-01-14 15:33:12.241029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.247207"], ["updated_at", "2018-01-14 15:33:12.247207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.248984"], ["updated_at", "2018-01-14 15:33:12.248984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.250536"], ["updated_at", "2018-01-14 15:33:12.250536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.253794"], ["updated_at", "2018-01-14 15:33:12.253794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:12.255600"], ["updated_at", "2018-01-14 15:33:12.255600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:12.257302"], ["updated_at", "2018-01-14 15:33:12.257302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:26.703815', '2018-01-14 15:33:26.703815', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:26.703815', '2018-01-14 15:33:26.703815', 298486374)[0m
  [1m[35m (103.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.824872"], ["updated_at", "2018-01-14 15:33:26.824872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.828301"], ["updated_at", "2018-01-14 15:33:26.828301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.839186"], ["updated_at", "2018-01-14 15:33:26.839186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.842631"], ["updated_at", "2018-01-14 15:33:26.842631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.852298"], ["updated_at", "2018-01-14 15:33:26.852298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.855929"], ["updated_at", "2018-01-14 15:33:26.855929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.858655"], ["updated_at", "2018-01-14 15:33:26.858655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.863317"], ["updated_at", "2018-01-14 15:33:26.863317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.866055"], ["updated_at", "2018-01-14 15:33:26.866055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.868265"], ["updated_at", "2018-01-14 15:33:26.868265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.870196"], ["updated_at", "2018-01-14 15:33:26.870196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.877577"], ["updated_at", "2018-01-14 15:33:26.877577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.879909"], ["updated_at", "2018-01-14 15:33:26.879909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.886924"], ["updated_at", "2018-01-14 15:33:26.886924"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.889044"], ["updated_at", "2018-01-14 15:33:26.889044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.895816"], ["updated_at", "2018-01-14 15:33:26.895816"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.898117"], ["updated_at", "2018-01-14 15:33:26.898117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.900339"], ["updated_at", "2018-01-14 15:33:26.900339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.902070"], ["updated_at", "2018-01-14 15:33:26.902070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.912185"], ["updated_at", "2018-01-14 15:33:26.912185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.914763"], ["updated_at", "2018-01-14 15:33:26.914763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.916792"], ["updated_at", "2018-01-14 15:33:26.916792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.918285"], ["updated_at", "2018-01-14 15:33:26.918285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.919710"], ["updated_at", "2018-01-14 15:33:26.919710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.921117"], ["updated_at", "2018-01-14 15:33:26.921117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.927243"], ["updated_at", "2018-01-14 15:33:26.927243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.929320"], ["updated_at", "2018-01-14 15:33:26.929320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.931666"], ["updated_at", "2018-01-14 15:33:26.931666"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.933450"], ["updated_at", "2018-01-14 15:33:26.933450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:26.938586"], ["updated_at", "2018-01-14 15:33:26.938586"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.940382"], ["updated_at", "2018-01-14 15:33:26.940382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.945458"], ["updated_at", "2018-01-14 15:33:26.945458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:26.947368"], ["updated_at", "2018-01-14 15:33:26.947368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:26.949164"], ["updated_at", "2018-01-14 15:33:26.949164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:32.756512', '2018-01-14 15:33:32.756512', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:32.756512', '2018-01-14 15:33:32.756512', 298486374)[0m
  [1m[35m (84.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.859052"], ["updated_at", "2018-01-14 15:33:32.859052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.862753"], ["updated_at", "2018-01-14 15:33:32.862753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.873330"], ["updated_at", "2018-01-14 15:33:32.873330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.876133"], ["updated_at", "2018-01-14 15:33:32.876133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.883206"], ["updated_at", "2018-01-14 15:33:32.883206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.886313"], ["updated_at", "2018-01-14 15:33:32.886313"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.894541"], ["updated_at", "2018-01-14 15:33:32.894541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.896905"], ["updated_at", "2018-01-14 15:33:32.896905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.900004"], ["updated_at", "2018-01-14 15:33:32.900004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.902326"], ["updated_at", "2018-01-14 15:33:32.902326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.910988"], ["updated_at", "2018-01-14 15:33:32.910988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.913245"], ["updated_at", "2018-01-14 15:33:32.913245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.915498"], ["updated_at", "2018-01-14 15:33:32.915498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.917430"], ["updated_at", "2018-01-14 15:33:32.917430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.923959"], ["updated_at", "2018-01-14 15:33:32.923959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.926142"], ["updated_at", "2018-01-14 15:33:32.926142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.927996"], ["updated_at", "2018-01-14 15:33:32.927996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.935042"], ["updated_at", "2018-01-14 15:33:32.935042"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.937901"], ["updated_at", "2018-01-14 15:33:32.937901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.939785"], ["updated_at", "2018-01-14 15:33:32.939785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.943401"], ["updated_at", "2018-01-14 15:33:32.943401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.945370"], ["updated_at", "2018-01-14 15:33:32.945370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.947287"], ["updated_at", "2018-01-14 15:33:32.947287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.949207"], ["updated_at", "2018-01-14 15:33:32.949207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.951022"], ["updated_at", "2018-01-14 15:33:32.951022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.952665"], ["updated_at", "2018-01-14 15:33:32.952665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.959061"], ["updated_at", "2018-01-14 15:33:32.959061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.961047"], ["updated_at", "2018-01-14 15:33:32.961047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.967990"], ["updated_at", "2018-01-14 15:33:32.967990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.969645"], ["updated_at", "2018-01-14 15:33:32.969645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:32.971245"], ["updated_at", "2018-01-14 15:33:32.971245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.972694"], ["updated_at", "2018-01-14 15:33:32.972694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:32.978023"], ["updated_at", "2018-01-14 15:33:32.978023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:32.979844"], ["updated_at", "2018-01-14 15:33:32.979844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:40.835493', '2018-01-14 15:33:40.835493', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:33:40.835493', '2018-01-14 15:33:40.835493', 298486374)[0m
  [1m[35m (83.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:40.939943"], ["updated_at", "2018-01-14 15:33:40.939943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.942940"], ["updated_at", "2018-01-14 15:33:40.942940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:40.952624"], ["updated_at", "2018-01-14 15:33:40.952624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.955092"], ["updated_at", "2018-01-14 15:33:40.955092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.962591"], ["updated_at", "2018-01-14 15:33:40.962591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.965058"], ["updated_at", "2018-01-14 15:33:40.965058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.971312"], ["updated_at", "2018-01-14 15:33:40.971312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.973154"], ["updated_at", "2018-01-14 15:33:40.973154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.976369"], ["updated_at", "2018-01-14 15:33:40.976369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.983721"], ["updated_at", "2018-01-14 15:33:40.983721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.986540"], ["updated_at", "2018-01-14 15:33:40.986540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:40.988393"], ["updated_at", "2018-01-14 15:33:40.988393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.992123"], ["updated_at", "2018-01-14 15:33:40.992123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:40.994124"], ["updated_at", "2018-01-14 15:33:40.994124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.000044"], ["updated_at", "2018-01-14 15:33:41.000044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.002005"], ["updated_at", "2018-01-14 15:33:41.002005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.003734"], ["updated_at", "2018-01-14 15:33:41.003734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.005345"], ["updated_at", "2018-01-14 15:33:41.005345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.007010"], ["updated_at", "2018-01-14 15:33:41.007010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.008707"], ["updated_at", "2018-01-14 15:33:41.008707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.016947"], ["updated_at", "2018-01-14 15:33:41.016947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.019128"], ["updated_at", "2018-01-14 15:33:41.019128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:41.021091"], ["updated_at", "2018-01-14 15:33:41.021091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.022769"], ["updated_at", "2018-01-14 15:33:41.022769"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.029991"], ["updated_at", "2018-01-14 15:33:41.029991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:41.031974"], ["updated_at", "2018-01-14 15:33:41.031974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:41.033781"], ["updated_at", "2018-01-14 15:33:41.033781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.035487"], ["updated_at", "2018-01-14 15:33:41.035487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.046010"], ["updated_at", "2018-01-14 15:33:41.046010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.048050"], ["updated_at", "2018-01-14 15:33:41.048050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.054466"], ["updated_at", "2018-01-14 15:33:41.054466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:33:41.056602"], ["updated_at", "2018-01-14 15:33:41.056602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:33:41.058341"], ["updated_at", "2018-01-14 15:33:41.058341"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:33:41.060209"], ["updated_at", "2018-01-14 15:33:41.060209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:34:12.535947', '2018-01-14 15:34:12.535947', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:34:12.535947', '2018-01-14 15:34:12.535947', 298486374)[0m
  [1m[35m (118.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.681350"], ["updated_at", "2018-01-14 15:34:12.681350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.685544"], ["updated_at", "2018-01-14 15:34:12.685544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.688752"], ["updated_at", "2018-01-14 15:34:12.688752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.691331"], ["updated_at", "2018-01-14 15:34:12.691331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.693772"], ["updated_at", "2018-01-14 15:34:12.693772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.696124"], ["updated_at", "2018-01-14 15:34:12.696124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.709118"], ["updated_at", "2018-01-14 15:34:12.709118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.712165"], ["updated_at", "2018-01-14 15:34:12.712165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.722239"], ["updated_at", "2018-01-14 15:34:12.722239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.725134"], ["updated_at", "2018-01-14 15:34:12.725134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.727706"], ["updated_at", "2018-01-14 15:34:12.727706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.729815"], ["updated_at", "2018-01-14 15:34:12.729815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.737722"], ["updated_at", "2018-01-14 15:34:12.737722"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.740161"], ["updated_at", "2018-01-14 15:34:12.740161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.741844"], ["updated_at", "2018-01-14 15:34:12.741844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.745538"], ["updated_at", "2018-01-14 15:34:12.745538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.747464"], ["updated_at", "2018-01-14 15:34:12.747464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.752358"], ["updated_at", "2018-01-14 15:34:12.752358"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.754365"], ["updated_at", "2018-01-14 15:34:12.754365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.756114"], ["updated_at", "2018-01-14 15:34:12.756114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.757592"], ["updated_at", "2018-01-14 15:34:12.757592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.762533"], ["updated_at", "2018-01-14 15:34:12.762533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.764907"], ["updated_at", "2018-01-14 15:34:12.764907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.771703"], ["updated_at", "2018-01-14 15:34:12.771703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.774354"], ["updated_at", "2018-01-14 15:34:12.774354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.779759"], ["updated_at", "2018-01-14 15:34:12.779759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.781704"], ["updated_at", "2018-01-14 15:34:12.781704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.783370"], ["updated_at", "2018-01-14 15:34:12.783370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.784846"], ["updated_at", "2018-01-14 15:34:12.784846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:12.791370"], ["updated_at", "2018-01-14 15:34:12.791370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.793256"], ["updated_at", "2018-01-14 15:34:12.793256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.799079"], ["updated_at", "2018-01-14 15:34:12.799079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:12.801545"], ["updated_at", "2018-01-14 15:34:12.801545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:12.804069"], ["updated_at", "2018-01-14 15:34:12.804069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:34:33.946234', '2018-01-14 15:34:33.946234', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:34:33.946234', '2018-01-14 15:34:33.946234', 298486374)[0m
  [1m[35m (86.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:34.054200"], ["updated_at", "2018-01-14 15:34:34.054200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:34.058398"], ["updated_at", "2018-01-14 15:34:34.058398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:34.070551"], ["updated_at", "2018-01-14 15:34:34.070551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:34.073762"], ["updated_at", "2018-01-14 15:34:34.073762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:34.084420"], ["updated_at", "2018-01-14 15:34:34.084420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:34.087375"], ["updated_at", "2018-01-14 15:34:34.087375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:34.094564"], ["updated_at", "2018-01-14 15:34:34.094564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:34.098130"], ["updated_at", "2018-01-14 15:34:34.098130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:34:34.100798"], ["updated_at", "2018-01-14 15:34:34.100798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:34:34.105141"], ["updated_at", "2018-01-14 15:34:34.105141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:34:34.107323"], ["updated_at", "2018-01-14 15:34:34.107323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:36:10.001465', '2018-01-14 15:36:10.001465', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:36:10.001465', '2018-01-14 15:36:10.001465', 298486374)[0m
  [1m[35m (79.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.098432"], ["updated_at", "2018-01-14 15:36:10.098432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.101620"], ["updated_at", "2018-01-14 15:36:10.101620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.103902"], ["updated_at", "2018-01-14 15:36:10.103902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.106192"], ["updated_at", "2018-01-14 15:36:10.106192"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.108141"], ["updated_at", "2018-01-14 15:36:10.108141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.110244"], ["updated_at", "2018-01-14 15:36:10.110244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.122482"], ["updated_at", "2018-01-14 15:36:10.122482"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.125059"], ["updated_at", "2018-01-14 15:36:10.125059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.132348"], ["updated_at", "2018-01-14 15:36:10.132348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.135031"], ["updated_at", "2018-01-14 15:36:10.135031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.137100"], ["updated_at", "2018-01-14 15:36:10.137100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.139264"], ["updated_at", "2018-01-14 15:36:10.139264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.150344"], ["updated_at", "2018-01-14 15:36:10.150344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.153189"], ["updated_at", "2018-01-14 15:36:10.153189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.155293"], ["updated_at", "2018-01-14 15:36:10.155293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.157061"], ["updated_at", "2018-01-14 15:36:10.157061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.163935"], ["updated_at", "2018-01-14 15:36:10.163935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.166038"], ["updated_at", "2018-01-14 15:36:10.166038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.171938"], ["updated_at", "2018-01-14 15:36:10.171938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.173873"], ["updated_at", "2018-01-14 15:36:10.173873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.175804"], ["updated_at", "2018-01-14 15:36:10.175804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.181677"], ["updated_at", "2018-01-14 15:36:10.181677"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.183971"], ["updated_at", "2018-01-14 15:36:10.183971"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.186008"], ["updated_at", "2018-01-14 15:36:10.186008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.187716"], ["updated_at", "2018-01-14 15:36:10.187716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.193661"], ["updated_at", "2018-01-14 15:36:10.193661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.195584"], ["updated_at", "2018-01-14 15:36:10.195584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.201910"], ["updated_at", "2018-01-14 15:36:10.201910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.203974"], ["updated_at", "2018-01-14 15:36:10.203974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:10.205814"], ["updated_at", "2018-01-14 15:36:10.205814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:10.209330"], ["updated_at", "2018-01-14 15:36:10.209330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:10.211175"], ["updated_at", "2018-01-14 15:36:10.211175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:36:47.224725', '2018-01-14 15:36:47.224725', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:36:47.224725', '2018-01-14 15:36:47.224725', 298486374)[0m
  [1m[35m (113.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.352362"], ["updated_at", "2018-01-14 15:36:47.352362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.354772"], ["updated_at", "2018-01-14 15:36:47.354772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.356701"], ["updated_at", "2018-01-14 15:36:47.356701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.358443"], ["updated_at", "2018-01-14 15:36:47.358443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.366723"], ["updated_at", "2018-01-14 15:36:47.366723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.368864"], ["updated_at", "2018-01-14 15:36:47.368864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.374321"], ["updated_at", "2018-01-14 15:36:47.374321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.376061"], ["updated_at", "2018-01-14 15:36:47.376061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.381560"], ["updated_at", "2018-01-14 15:36:47.381560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.383406"], ["updated_at", "2018-01-14 15:36:47.383406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.385090"], ["updated_at", "2018-01-14 15:36:47.385090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.386800"], ["updated_at", "2018-01-14 15:36:47.386800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.393331"], ["updated_at", "2018-01-14 15:36:47.393331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.395418"], ["updated_at", "2018-01-14 15:36:47.395418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.402390"], ["updated_at", "2018-01-14 15:36:47.402390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.404233"], ["updated_at", "2018-01-14 15:36:47.404233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.405953"], ["updated_at", "2018-01-14 15:36:47.405953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.411382"], ["updated_at", "2018-01-14 15:36:47.411382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.413193"], ["updated_at", "2018-01-14 15:36:47.413193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.414909"], ["updated_at", "2018-01-14 15:36:47.414909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.416381"], ["updated_at", "2018-01-14 15:36:47.416381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.417858"], ["updated_at", "2018-01-14 15:36:47.417858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.419352"], ["updated_at", "2018-01-14 15:36:47.419352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.425771"], ["updated_at", "2018-01-14 15:36:47.425771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.427902"], ["updated_at", "2018-01-14 15:36:47.427902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.434595"], ["updated_at", "2018-01-14 15:36:47.434595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.436402"], ["updated_at", "2018-01-14 15:36:47.436402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:36:47.438106"], ["updated_at", "2018-01-14 15:36:47.438106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:36:47.441539"], ["updated_at", "2018-01-14 15:36:47.441539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:36:47.443304"], ["updated_at", "2018-01-14 15:36:47.443304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-11 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-10 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:37:08.041369', '2018-01-14 15:37:08.041369', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:37:08.041369', '2018-01-14 15:37:08.041369', 298486374)[0m
  [1m[35m (86.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.147532"], ["updated_at", "2018-01-14 15:37:08.147532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.151597"], ["updated_at", "2018-01-14 15:37:08.151597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.163549"], ["updated_at", "2018-01-14 15:37:08.163549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.166133"], ["updated_at", "2018-01-14 15:37:08.166133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.168732"], ["updated_at", "2018-01-14 15:37:08.168732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.170994"], ["updated_at", "2018-01-14 15:37:08.170994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.179516"], ["updated_at", "2018-01-14 15:37:08.179516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.181908"], ["updated_at", "2018-01-14 15:37:08.181908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.184381"], ["updated_at", "2018-01-14 15:37:08.184381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.186321"], ["updated_at", "2018-01-14 15:37:08.186321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.194264"], ["updated_at", "2018-01-14 15:37:08.194264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.196897"], ["updated_at", "2018-01-14 15:37:08.196897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.198907"], ["updated_at", "2018-01-14 15:37:08.198907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.200728"], ["updated_at", "2018-01-14 15:37:08.200728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.207058"], ["updated_at", "2018-01-14 15:37:08.207058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.209060"], ["updated_at", "2018-01-14 15:37:08.209060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.214993"], ["updated_at", "2018-01-14 15:37:08.214993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.216952"], ["updated_at", "2018-01-14 15:37:08.216952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.227402"], ["updated_at", "2018-01-14 15:37:08.227402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.229313"], ["updated_at", "2018-01-14 15:37:08.229313"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.231082"], ["updated_at", "2018-01-14 15:37:08.231082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.232624"], ["updated_at", "2018-01-14 15:37:08.232624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.234805"], ["updated_at", "2018-01-14 15:37:08.234805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.236547"], ["updated_at", "2018-01-14 15:37:08.236547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:37:08.242982"], ["updated_at", "2018-01-14 15:37:08.242982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.244798"], ["updated_at", "2018-01-14 15:37:08.244798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.250679"], ["updated_at", "2018-01-14 15:37:08.250679"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.252408"], ["updated_at", "2018-01-14 15:37:08.252408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.258708"], ["updated_at", "2018-01-14 15:37:08.258708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:37:08.260547"], ["updated_at", "2018-01-14 15:37:08.260547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.262262"], ["updated_at", "2018-01-14 15:37:08.262262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.267558"], ["updated_at", "2018-01-14 15:37:08.267558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.269314"], ["updated_at", "2018-01-14 15:37:08.269314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:37:08.271026"], ["updated_at", "2018-01-14 15:37:08.271026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:48:00.769415', '2018-01-14 15:48:00.769415', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:48:00.769415', '2018-01-14 15:48:00.769415', 298486374)[0m
  [1m[35m (82.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.866290"], ["updated_at", "2018-01-14 15:48:00.866290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.868876"], ["updated_at", "2018-01-14 15:48:00.868876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.877015"], ["updated_at", "2018-01-14 15:48:00.877015"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.879214"], ["updated_at", "2018-01-14 15:48:00.879214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.881048"], ["updated_at", "2018-01-14 15:48:00.881048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.882645"], ["updated_at", "2018-01-14 15:48:00.882645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.884419"], ["updated_at", "2018-01-14 15:48:00.884419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.886075"], ["updated_at", "2018-01-14 15:48:00.886075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.893115"], ["updated_at", "2018-01-14 15:48:00.893115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.895194"], ["updated_at", "2018-01-14 15:48:00.895194"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.897508"], ["updated_at", "2018-01-14 15:48:00.897508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.899541"], ["updated_at", "2018-01-14 15:48:00.899541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.906506"], ["updated_at", "2018-01-14 15:48:00.906506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.909130"], ["updated_at", "2018-01-14 15:48:00.909130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.914573"], ["updated_at", "2018-01-14 15:48:00.914573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.916498"], ["updated_at", "2018-01-14 15:48:00.916498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.922163"], ["updated_at", "2018-01-14 15:48:00.922163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.924113"], ["updated_at", "2018-01-14 15:48:00.924113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.925846"], ["updated_at", "2018-01-14 15:48:00.925846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.927847"], ["updated_at", "2018-01-14 15:48:00.927847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.934148"], ["updated_at", "2018-01-14 15:48:00.934148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.936119"], ["updated_at", "2018-01-14 15:48:00.936119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.942249"], ["updated_at", "2018-01-14 15:48:00.942249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.944233"], ["updated_at", "2018-01-14 15:48:00.944233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.949793"], ["updated_at", "2018-01-14 15:48:00.949793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.951760"], ["updated_at", "2018-01-14 15:48:00.951760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.953365"], ["updated_at", "2018-01-14 15:48:00.953365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.960106"], ["updated_at", "2018-01-14 15:48:00.960106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.962599"], ["updated_at", "2018-01-14 15:48:00.962599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.964665"], ["updated_at", "2018-01-14 15:48:00.964665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.968462"], ["updated_at", "2018-01-14 15:48:00.968462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.970423"], ["updated_at", "2018-01-14 15:48:00.970423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.972200"], ["updated_at", "2018-01-14 15:48:00.972200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:00.977049"], ["updated_at", "2018-01-14 15:48:00.977049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:00.983414"], ["updated_at", "2018-01-14 15:48:00.983414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:00.985565"], ["updated_at", "2018-01-14 15:48:00.985565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT  "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00') LIMIT ?[0m  [["kind", "opening"], ["weekly_recurring", "t"], ["LIMIT", 11]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:48:40.235284', '2018-01-14 15:48:40.235284', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:48:40.235284', '2018-01-14 15:48:40.235284', 298486374)[0m
  [1m[35m (73.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:40.323462"], ["updated_at", "2018-01-14 15:48:40.323462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:40.326509"], ["updated_at", "2018-01-14 15:48:40.326509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.332762"], ["updated_at", "2018-01-14 15:48:40.332762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:40.334496"], ["updated_at", "2018-01-14 15:48:40.334496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:40.343828"], ["updated_at", "2018-01-14 15:48:40.343828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:40.345900"], ["updated_at", "2018-01-14 15:48:40.345900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.351774"], ["updated_at", "2018-01-14 15:48:40.351774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.353628"], ["updated_at", "2018-01-14 15:48:40.353628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:40.359348"], ["updated_at", "2018-01-14 15:48:40.359348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:40.361267"], ["updated_at", "2018-01-14 15:48:40.361267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.366354"], ["updated_at", "2018-01-14 15:48:40.366354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.368210"], ["updated_at", "2018-01-14 15:48:40.368210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:48:40.369771"], ["updated_at", "2018-01-14 15:48:40.369771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:48:40.376611"], ["updated_at", "2018-01-14 15:48:40.376611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:48:40.379174"], ["updated_at", "2018-01-14 15:48:40.379174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT  "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? LIMIT ?[0m  [["kind", "opening"], ["weekly_recurring", "t"], ["LIMIT", 11]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:52:47.748439', '2018-01-14 15:52:47.748439', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:52:47.748439', '2018-01-14 15:52:47.748439', 298486374)[0m
  [1m[35m (81.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:53:17.521043', '2018-01-14 15:53:17.521043', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:53:17.521043', '2018-01-14 15:53:17.521043', 298486374)[0m
  [1m[35m (79.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.615343"], ["updated_at", "2018-01-14 15:53:17.615343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.617717"], ["updated_at", "2018-01-14 15:53:17.617717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.625977"], ["updated_at", "2018-01-14 15:53:17.625977"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.627845"], ["updated_at", "2018-01-14 15:53:17.627845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.629532"], ["updated_at", "2018-01-14 15:53:17.629532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.633161"], ["updated_at", "2018-01-14 15:53:17.633161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.635021"], ["updated_at", "2018-01-14 15:53:17.635021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.641740"], ["updated_at", "2018-01-14 15:53:17.641740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.643777"], ["updated_at", "2018-01-14 15:53:17.643777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.645527"], ["updated_at", "2018-01-14 15:53:17.645527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.647093"], ["updated_at", "2018-01-14 15:53:17.647093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.653847"], ["updated_at", "2018-01-14 15:53:17.653847"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.656548"], ["updated_at", "2018-01-14 15:53:17.656548"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.667340"], ["updated_at", "2018-01-14 15:53:17.667340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.669678"], ["updated_at", "2018-01-14 15:53:17.669678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.671416"], ["updated_at", "2018-01-14 15:53:17.671416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.673050"], ["updated_at", "2018-01-14 15:53:17.673050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.674710"], ["updated_at", "2018-01-14 15:53:17.674710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.676356"], ["updated_at", "2018-01-14 15:53:17.676356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.683138"], ["updated_at", "2018-01-14 15:53:17.683138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:53:17.685490"], ["updated_at", "2018-01-14 15:53:17.685490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.687606"], ["updated_at", "2018-01-14 15:53:17.687606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.689331"], ["updated_at", "2018-01-14 15:53:17.689331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.695047"], ["updated_at", "2018-01-14 15:53:17.695047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.697116"], ["updated_at", "2018-01-14 15:53:17.697116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:53:17.699478"], ["updated_at", "2018-01-14 15:53:17.699478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.705697"], ["updated_at", "2018-01-14 15:53:17.705697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:53:17.707813"], ["updated_at", "2018-01-14 15:53:17.707813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:56:35.392468', '2018-01-14 15:56:35.392468', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:56:35.392468', '2018-01-14 15:56:35.392468', 298486374)[0m
  [1m[35m (78.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.493112"], ["updated_at", "2018-01-14 15:56:35.493112"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.497748"], ["updated_at", "2018-01-14 15:56:35.497748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.501367"], ["updated_at", "2018-01-14 15:56:35.501367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.504799"], ["updated_at", "2018-01-14 15:56:35.504799"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.520038"], ["updated_at", "2018-01-14 15:56:35.520038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.523491"], ["updated_at", "2018-01-14 15:56:35.523491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.526523"], ["updated_at", "2018-01-14 15:56:35.526523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.529431"], ["updated_at", "2018-01-14 15:56:35.529431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.532357"], ["updated_at", "2018-01-14 15:56:35.532357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.534774"], ["updated_at", "2018-01-14 15:56:35.534774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.544811"], ["updated_at", "2018-01-14 15:56:35.544811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.548296"], ["updated_at", "2018-01-14 15:56:35.548296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.558065"], ["updated_at", "2018-01-14 15:56:35.558065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.561039"], ["updated_at", "2018-01-14 15:56:35.561039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.568799"], ["updated_at", "2018-01-14 15:56:35.568799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.571547"], ["updated_at", "2018-01-14 15:56:35.571547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.578620"], ["updated_at", "2018-01-14 15:56:35.578620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.581728"], ["updated_at", "2018-01-14 15:56:35.581728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.584025"], ["updated_at", "2018-01-14 15:56:35.584025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.585547"], ["updated_at", "2018-01-14 15:56:35.585547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.591616"], ["updated_at", "2018-01-14 15:56:35.591616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:35.593535"], ["updated_at", "2018-01-14 15:56:35.593535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:35.598386"], ["updated_at", "2018-01-14 15:56:35.598386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:35.600198"], ["updated_at", "2018-01-14 15:56:35.600198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:56:56.376593', '2018-01-14 15:56:56.376593', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 15:56:56.376593', '2018-01-14 15:56:56.376593', 298486374)[0m
  [1m[35m (103.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:56.499772"], ["updated_at", "2018-01-14 15:56:56.499772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:56.502519"], ["updated_at", "2018-01-14 15:56:56.502519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:56.504206"], ["updated_at", "2018-01-14 15:56:56.504206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:56.505939"], ["updated_at", "2018-01-14 15:56:56.505939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:56.514414"], ["updated_at", "2018-01-14 15:56:56.514414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:56.516399"], ["updated_at", "2018-01-14 15:56:56.516399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:56.522424"], ["updated_at", "2018-01-14 15:56:56.522424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:56.524919"], ["updated_at", "2018-01-14 15:56:56.524919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 15:56:56.530432"], ["updated_at", "2018-01-14 15:56:56.530432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:56.532456"], ["updated_at", "2018-01-14 15:56:56.532456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 15:56:56.534100"], ["updated_at", "2018-01-14 15:56:56.534100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 15:56:56.535641"], ["updated_at", "2018-01-14 15:56:56.535641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:13.585408', '2018-01-14 16:00:13.585408', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:13.585408', '2018-01-14 16:00:13.585408', 298486374)[0m
  [1m[35m (79.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:13.683229"], ["updated_at", "2018-01-14 16:00:13.683229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:13.686215"], ["updated_at", "2018-01-14 16:00:13.686215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-13 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-12"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:36.825181', '2018-01-14 16:00:36.825181', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:36.825181', '2018-01-14 16:00:36.825181', 298486374)[0m
  [1m[35m (117.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:36.963019"], ["updated_at", "2018-01-14 16:00:36.963019"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:00:36.966813"], ["updated_at", "2018-01-14 16:00:36.966813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:00:36.979609"], ["updated_at", "2018-01-14 16:00:36.979609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:00:36.982396"], ["updated_at", "2018-01-14 16:00:36.982396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:36.989833"], ["updated_at", "2018-01-14 16:00:36.989833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:36.992488"], ["updated_at", "2018-01-14 16:00:36.992488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:36.994441"], ["updated_at", "2018-01-14 16:00:36.994441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:36.999020"], ["updated_at", "2018-01-14 16:00:36.999020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:37.001495"], ["updated_at", "2018-01-14 16:00:37.001495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:00:37.003490"], ["updated_at", "2018-01-14 16:00:37.003490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:37.005266"], ["updated_at", "2018-01-14 16:00:37.005266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:37.013229"], ["updated_at", "2018-01-14 16:00:37.013229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:37.015560"], ["updated_at", "2018-01-14 16:00:37.015560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:00:37.017436"], ["updated_at", "2018-01-14 16:00:37.017436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:37.019185"], ["updated_at", "2018-01-14 16:00:37.019185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:37.026608"], ["updated_at", "2018-01-14 16:00:37.026608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:37.028828"], ["updated_at", "2018-01-14 16:00:37.028828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-13 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-12"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:50.670892', '2018-01-14 16:00:50.670892', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:00:50.670892', '2018-01-14 16:00:50.670892', 298486374)[0m
  [1m[35m (92.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:50.787897"], ["updated_at", "2018-01-14 16:00:50.787897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:50.791183"], ["updated_at", "2018-01-14 16:00:50.791183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:00:50.793615"], ["updated_at", "2018-01-14 16:00:50.793615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:50.800927"], ["updated_at", "2018-01-14 16:00:50.800927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:00:50.803595"], ["updated_at", "2018-01-14 16:00:50.803595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-11"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:02:15.369197', '2018-01-14 16:02:15.369197', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:02:15.369197', '2018-01-14 16:02:15.369197', 298486374)[0m
  [1m[35m (80.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.468054"], ["updated_at", "2018-01-14 16:02:15.468054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.471705"], ["updated_at", "2018-01-14 16:02:15.471705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.483569"], ["updated_at", "2018-01-14 16:02:15.483569"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.487033"], ["updated_at", "2018-01-14 16:02:15.487033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.494315"], ["updated_at", "2018-01-14 16:02:15.494315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.496735"], ["updated_at", "2018-01-14 16:02:15.496735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.498859"], ["updated_at", "2018-01-14 16:02:15.498859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.500642"], ["updated_at", "2018-01-14 16:02:15.500642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.502324"], ["updated_at", "2018-01-14 16:02:15.502324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.504978"], ["updated_at", "2018-01-14 16:02:15.504978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.514737"], ["updated_at", "2018-01-14 16:02:15.514737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.517054"], ["updated_at", "2018-01-14 16:02:15.517054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.523749"], ["updated_at", "2018-01-14 16:02:15.523749"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.525870"], ["updated_at", "2018-01-14 16:02:15.525870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.527719"], ["updated_at", "2018-01-14 16:02:15.527719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.529359"], ["updated_at", "2018-01-14 16:02:15.529359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.536069"], ["updated_at", "2018-01-14 16:02:15.536069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.538098"], ["updated_at", "2018-01-14 16:02:15.538098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.544137"], ["updated_at", "2018-01-14 16:02:15.544137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.546343"], ["updated_at", "2018-01-14 16:02:15.546343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.548352"], ["updated_at", "2018-01-14 16:02:15.548352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.554181"], ["updated_at", "2018-01-14 16:02:15.554181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.556272"], ["updated_at", "2018-01-14 16:02:15.556272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.557924"], ["updated_at", "2018-01-14 16:02:15.557924"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.561535"], ["updated_at", "2018-01-14 16:02:15.561535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.563457"], ["updated_at", "2018-01-14 16:02:15.563457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.568995"], ["updated_at", "2018-01-14 16:02:15.568995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.570832"], ["updated_at", "2018-01-14 16:02:15.570832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.573003"], ["updated_at", "2018-01-14 16:02:15.573003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.574779"], ["updated_at", "2018-01-14 16:02:15.574779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.581516"], ["updated_at", "2018-01-14 16:02:15.581516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.583420"], ["updated_at", "2018-01-14 16:02:15.583420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.588665"], ["updated_at", "2018-01-14 16:02:15.588665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:02:15.590599"], ["updated_at", "2018-01-14 16:02:15.590599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:02:15.592242"], ["updated_at", "2018-01-14 16:02:15.592242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:02:15.593733"], ["updated_at", "2018-01-14 16:02:15.593733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:18.795465', '2018-01-14 16:03:18.795465', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:18.795465', '2018-01-14 16:03:18.795465', 298486374)[0m
  [1m[35m (82.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.900982"], ["updated_at", "2018-01-14 16:03:18.900982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.904988"], ["updated_at", "2018-01-14 16:03:18.904988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.918224"], ["updated_at", "2018-01-14 16:03:18.918224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.921223"], ["updated_at", "2018-01-14 16:03:18.921223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.924048"], ["updated_at", "2018-01-14 16:03:18.924048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.929564"], ["updated_at", "2018-01-14 16:03:18.929564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.932471"], ["updated_at", "2018-01-14 16:03:18.932471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.942810"], ["updated_at", "2018-01-14 16:03:18.942810"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.947270"], ["updated_at", "2018-01-14 16:03:18.947270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.950494"], ["updated_at", "2018-01-14 16:03:18.950494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.953509"], ["updated_at", "2018-01-14 16:03:18.953509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.956487"], ["updated_at", "2018-01-14 16:03:18.956487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.964429"], ["updated_at", "2018-01-14 16:03:18.964429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.975497"], ["updated_at", "2018-01-14 16:03:18.975497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:18.978854"], ["updated_at", "2018-01-14 16:03:18.978854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.988067"], ["updated_at", "2018-01-14 16:03:18.988067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:18.991046"], ["updated_at", "2018-01-14 16:03:18.991046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:18.993029"], ["updated_at", "2018-01-14 16:03:18.993029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:18.994670"], ["updated_at", "2018-01-14 16:03:18.994670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.000888"], ["updated_at", "2018-01-14 16:03:19.000888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.002771"], ["updated_at", "2018-01-14 16:03:19.002771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.008508"], ["updated_at", "2018-01-14 16:03:19.008508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.010522"], ["updated_at", "2018-01-14 16:03:19.010522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.016426"], ["updated_at", "2018-01-14 16:03:19.016426"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.018322"], ["updated_at", "2018-01-14 16:03:19.018322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.019937"], ["updated_at", "2018-01-14 16:03:19.019937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:19.021333"], ["updated_at", "2018-01-14 16:03:19.021333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.027224"], ["updated_at", "2018-01-14 16:03:19.027224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.029147"], ["updated_at", "2018-01-14 16:03:19.029147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.030809"], ["updated_at", "2018-01-14 16:03:19.030809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:19.032360"], ["updated_at", "2018-01-14 16:03:19.032360"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:19.038390"], ["updated_at", "2018-01-14 16:03:19.038390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.040390"], ["updated_at", "2018-01-14 16:03:19.040390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.045629"], ["updated_at", "2018-01-14 16:03:19.045629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:19.047734"], ["updated_at", "2018-01-14 16:03:19.047734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:19.049490"], ["updated_at", "2018-01-14 16:03:19.049490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:22.647905', '2018-01-14 16:03:22.647905', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:22.647905', '2018-01-14 16:03:22.647905', 298486374)[0m
  [1m[35m (99.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.769810"], ["updated_at", "2018-01-14 16:03:22.769810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.773909"], ["updated_at", "2018-01-14 16:03:22.773909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.777109"], ["updated_at", "2018-01-14 16:03:22.777109"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.779735"], ["updated_at", "2018-01-14 16:03:22.779735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.790694"], ["updated_at", "2018-01-14 16:03:22.790694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.793504"], ["updated_at", "2018-01-14 16:03:22.793504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.796147"], ["updated_at", "2018-01-14 16:03:22.796147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.802400"], ["updated_at", "2018-01-14 16:03:22.802400"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.804990"], ["updated_at", "2018-01-14 16:03:22.804990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.807552"], ["updated_at", "2018-01-14 16:03:22.807552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.809752"], ["updated_at", "2018-01-14 16:03:22.809752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.811917"], ["updated_at", "2018-01-14 16:03:22.811917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.814019"], ["updated_at", "2018-01-14 16:03:22.814019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.823803"], ["updated_at", "2018-01-14 16:03:22.823803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.826199"], ["updated_at", "2018-01-14 16:03:22.826199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.833480"], ["updated_at", "2018-01-14 16:03:22.833480"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.835668"], ["updated_at", "2018-01-14 16:03:22.835668"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.842335"], ["updated_at", "2018-01-14 16:03:22.842335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.844647"], ["updated_at", "2018-01-14 16:03:22.844647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.851575"], ["updated_at", "2018-01-14 16:03:22.851575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.853714"], ["updated_at", "2018-01-14 16:03:22.853714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.859768"], ["updated_at", "2018-01-14 16:03:22.859768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.863456"], ["updated_at", "2018-01-14 16:03:22.863456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.865488"], ["updated_at", "2018-01-14 16:03:22.865488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.867080"], ["updated_at", "2018-01-14 16:03:22.867080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.873311"], ["updated_at", "2018-01-14 16:03:22.873311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.875200"], ["updated_at", "2018-01-14 16:03:22.875200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.881218"], ["updated_at", "2018-01-14 16:03:22.881218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.883261"], ["updated_at", "2018-01-14 16:03:22.883261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:22.889831"], ["updated_at", "2018-01-14 16:03:22.889831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.891760"], ["updated_at", "2018-01-14 16:03:22.891760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.893527"], ["updated_at", "2018-01-14 16:03:22.893527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.895734"], ["updated_at", "2018-01-14 16:03:22.895734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.902278"], ["updated_at", "2018-01-14 16:03:22.902278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:22.904088"], ["updated_at", "2018-01-14 16:03:22.904088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:22.905725"], ["updated_at", "2018-01-14 16:03:22.905725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:39.928698', '2018-01-14 16:03:39.928698', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:03:39.928698', '2018-01-14 16:03:39.928698', 298486374)[0m
  [1m[35m (74.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.021406"], ["updated_at", "2018-01-14 16:03:40.021406"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.026096"], ["updated_at", "2018-01-14 16:03:40.026096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.037947"], ["updated_at", "2018-01-14 16:03:40.037947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.039925"], ["updated_at", "2018-01-14 16:03:40.039925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.046022"], ["updated_at", "2018-01-14 16:03:40.046022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.048022"], ["updated_at", "2018-01-14 16:03:40.048022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.050173"], ["updated_at", "2018-01-14 16:03:40.050173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.051937"], ["updated_at", "2018-01-14 16:03:40.051937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.058287"], ["updated_at", "2018-01-14 16:03:40.058287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.060222"], ["updated_at", "2018-01-14 16:03:40.060222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.061904"], ["updated_at", "2018-01-14 16:03:40.061904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.063506"], ["updated_at", "2018-01-14 16:03:40.063506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.065460"], ["updated_at", "2018-01-14 16:03:40.065460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.067640"], ["updated_at", "2018-01-14 16:03:40.067640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.078614"], ["updated_at", "2018-01-14 16:03:40.078614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.080605"], ["updated_at", "2018-01-14 16:03:40.080605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.082273"], ["updated_at", "2018-01-14 16:03:40.082273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.088544"], ["updated_at", "2018-01-14 16:03:40.088544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.090289"], ["updated_at", "2018-01-14 16:03:40.090289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.091936"], ["updated_at", "2018-01-14 16:03:40.091936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.095422"], ["updated_at", "2018-01-14 16:03:40.095422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.097467"], ["updated_at", "2018-01-14 16:03:40.097467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.103681"], ["updated_at", "2018-01-14 16:03:40.103681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.105652"], ["updated_at", "2018-01-14 16:03:40.105652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.111166"], ["updated_at", "2018-01-14 16:03:40.111166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.113405"], ["updated_at", "2018-01-14 16:03:40.113405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.115850"], ["updated_at", "2018-01-14 16:03:40.115850"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.117747"], ["updated_at", "2018-01-14 16:03:40.117747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.123357"], ["updated_at", "2018-01-14 16:03:40.123357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.125444"], ["updated_at", "2018-01-14 16:03:40.125444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.132943"], ["updated_at", "2018-01-14 16:03:40.132943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.135218"], ["updated_at", "2018-01-14 16:03:40.135218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:03:40.140283"], ["updated_at", "2018-01-14 16:03:40.140283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.142276"], ["updated_at", "2018-01-14 16:03:40.142276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:03:40.143984"], ["updated_at", "2018-01-14 16:03:40.143984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:03:40.145483"], ["updated_at", "2018-01-14 16:03:40.145483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:13:20.419008', '2018-01-14 16:13:20.419008', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:13:20.419008', '2018-01-14 16:13:20.419008', 298486374)[0m
  [1m[35m (65.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.504549"], ["updated_at", "2018-01-14 16:13:20.504549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.507636"], ["updated_at", "2018-01-14 16:13:20.507636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.510389"], ["updated_at", "2018-01-14 16:13:20.510389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.512781"], ["updated_at", "2018-01-14 16:13:20.512781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.522583"], ["updated_at", "2018-01-14 16:13:20.522583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.525767"], ["updated_at", "2018-01-14 16:13:20.525767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.532856"], ["updated_at", "2018-01-14 16:13:20.532856"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.535193"], ["updated_at", "2018-01-14 16:13:20.535193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.541014"], ["updated_at", "2018-01-14 16:13:20.541014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.543134"], ["updated_at", "2018-01-14 16:13:20.543134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.545054"], ["updated_at", "2018-01-14 16:13:20.545054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.551462"], ["updated_at", "2018-01-14 16:13:20.551462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.557908"], ["updated_at", "2018-01-14 16:13:20.557908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.560086"], ["updated_at", "2018-01-14 16:13:20.560086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.561859"], ["updated_at", "2018-01-14 16:13:20.561859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.563422"], ["updated_at", "2018-01-14 16:13:20.563422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.564987"], ["updated_at", "2018-01-14 16:13:20.564987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.566477"], ["updated_at", "2018-01-14 16:13:20.566477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.572536"], ["updated_at", "2018-01-14 16:13:20.572536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.574317"], ["updated_at", "2018-01-14 16:13:20.574317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.575998"], ["updated_at", "2018-01-14 16:13:20.575998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.579556"], ["updated_at", "2018-01-14 16:13:20.579556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.581652"], ["updated_at", "2018-01-14 16:13:20.581652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.587884"], ["updated_at", "2018-01-14 16:13:20.587884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.589696"], ["updated_at", "2018-01-14 16:13:20.589696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.591438"], ["updated_at", "2018-01-14 16:13:20.591438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.599276"], ["updated_at", "2018-01-14 16:13:20.599276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.601201"], ["updated_at", "2018-01-14 16:13:20.601201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.606169"], ["updated_at", "2018-01-14 16:13:20.606169"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.607912"], ["updated_at", "2018-01-14 16:13:20.607912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.614146"], ["updated_at", "2018-01-14 16:13:20.614146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:13:20.616014"], ["updated_at", "2018-01-14 16:13:20.616014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.617689"], ["updated_at", "2018-01-14 16:13:20.617689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:13:20.619181"], ["updated_at", "2018-01-14 16:13:20.619181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.625145"], ["updated_at", "2018-01-14 16:13:20.625145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:13:20.627155"], ["updated_at", "2018-01-14 16:13:20.627155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:19:13.073861', '2018-01-14 16:19:13.073861', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:19:13.073861', '2018-01-14 16:19:13.073861', 298486374)[0m
  [1m[35m (77.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.167876"], ["updated_at", "2018-01-14 16:19:13.167876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.170808"], ["updated_at", "2018-01-14 16:19:13.170808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.172855"], ["updated_at", "2018-01-14 16:19:13.172855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.179898"], ["updated_at", "2018-01-14 16:19:13.179898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.183284"], ["updated_at", "2018-01-14 16:19:13.183284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.192835"], ["updated_at", "2018-01-14 16:19:13.192835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.196231"], ["updated_at", "2018-01-14 16:19:13.196231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.198966"], ["updated_at", "2018-01-14 16:19:13.198966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.201322"], ["updated_at", "2018-01-14 16:19:13.201322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.203658"], ["updated_at", "2018-01-14 16:19:13.203658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.205966"], ["updated_at", "2018-01-14 16:19:13.205966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.217520"], ["updated_at", "2018-01-14 16:19:13.217520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.220108"], ["updated_at", "2018-01-14 16:19:13.220108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.227806"], ["updated_at", "2018-01-14 16:19:13.227806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.230485"], ["updated_at", "2018-01-14 16:19:13.230485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.237966"], ["updated_at", "2018-01-14 16:19:13.237966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.240658"], ["updated_at", "2018-01-14 16:19:13.240658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.244158"], ["updated_at", "2018-01-14 16:19:13.244158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.246564"], ["updated_at", "2018-01-14 16:19:13.246564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.253468"], ["updated_at", "2018-01-14 16:19:13.253468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.256777"], ["updated_at", "2018-01-14 16:19:13.256777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.267401"], ["updated_at", "2018-01-14 16:19:13.267401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.270574"], ["updated_at", "2018-01-14 16:19:13.270574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.279074"], ["updated_at", "2018-01-14 16:19:13.279074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.281507"], ["updated_at", "2018-01-14 16:19:13.281507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.284030"], ["updated_at", "2018-01-14 16:19:13.284030"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.293561"], ["updated_at", "2018-01-14 16:19:13.293561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.296811"], ["updated_at", "2018-01-14 16:19:13.296811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.299321"], ["updated_at", "2018-01-14 16:19:13.299321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.301516"], ["updated_at", "2018-01-14 16:19:13.301516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.311264"], ["updated_at", "2018-01-14 16:19:13.311264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.314447"], ["updated_at", "2018-01-14 16:19:13.314447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.321835"], ["updated_at", "2018-01-14 16:19:13.321835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:19:13.325059"], ["updated_at", "2018-01-14 16:19:13.325059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:19:13.327449"], ["updated_at", "2018-01-14 16:19:13.327449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:19:13.329630"], ["updated_at", "2018-01-14 16:19:13.329630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:42:06.406095', '2018-01-14 16:42:06.406095', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:42:06.406095', '2018-01-14 16:42:06.406095', 298486374)[0m
  [1m[35m (85.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.512005"], ["updated_at", "2018-01-14 16:42:06.512005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.514698"], ["updated_at", "2018-01-14 16:42:06.514698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.524818"], ["updated_at", "2018-01-14 16:42:06.524818"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.527527"], ["updated_at", "2018-01-14 16:42:06.527527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.535382"], ["updated_at", "2018-01-14 16:42:06.535382"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.537915"], ["updated_at", "2018-01-14 16:42:06.537915"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.543813"], ["updated_at", "2018-01-14 16:42:06.543813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.546233"], ["updated_at", "2018-01-14 16:42:06.546233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.552312"], ["updated_at", "2018-01-14 16:42:06.552312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.554828"], ["updated_at", "2018-01-14 16:42:06.554828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.556638"], ["updated_at", "2018-01-14 16:42:06.556638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.558125"], ["updated_at", "2018-01-14 16:42:06.558125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.564543"], ["updated_at", "2018-01-14 16:42:06.564543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.566847"], ["updated_at", "2018-01-14 16:42:06.566847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.572352"], ["updated_at", "2018-01-14 16:42:06.572352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.574654"], ["updated_at", "2018-01-14 16:42:06.574654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.579461"], ["updated_at", "2018-01-14 16:42:06.579461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.581745"], ["updated_at", "2018-01-14 16:42:06.581745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.584182"], ["updated_at", "2018-01-14 16:42:06.584182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.585916"], ["updated_at", "2018-01-14 16:42:06.585916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.587571"], ["updated_at", "2018-01-14 16:42:06.587571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.589003"], ["updated_at", "2018-01-14 16:42:06.589003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.595219"], ["updated_at", "2018-01-14 16:42:06.595219"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.597895"], ["updated_at", "2018-01-14 16:42:06.597895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.599805"], ["updated_at", "2018-01-14 16:42:06.599805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.601666"], ["updated_at", "2018-01-14 16:42:06.601666"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.608037"], ["updated_at", "2018-01-14 16:42:06.608037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.610460"], ["updated_at", "2018-01-14 16:42:06.610460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.612204"], ["updated_at", "2018-01-14 16:42:06.612204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.619833"], ["updated_at", "2018-01-14 16:42:06.619833"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.622144"], ["updated_at", "2018-01-14 16:42:06.622144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.623877"], ["updated_at", "2018-01-14 16:42:06.623877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:42:06.627791"], ["updated_at", "2018-01-14 16:42:06.627791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.630592"], ["updated_at", "2018-01-14 16:42:06.630592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:42:06.632324"], ["updated_at", "2018-01-14 16:42:06.632324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:42:06.633888"], ["updated_at", "2018-01-14 16:42:06.633888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:47:42.922562', '2018-01-14 16:47:42.922562', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:47:42.922562', '2018-01-14 16:47:42.922562', 298486374)[0m
  [1m[35m (98.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:43.042956"], ["updated_at", "2018-01-14 16:47:43.042956"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:47:43.047762"], ["updated_at", "2018-01-14 16:47:43.047762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:43.063828"], ["updated_at", "2018-01-14 16:47:43.063828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:43.067041"], ["updated_at", "2018-01-14 16:47:43.067041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:47:53.209249', '2018-01-14 16:47:53.209249', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:47:53.209249', '2018-01-14 16:47:53.209249', 298486374)[0m
  [1m[35m (100.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.328056"], ["updated_at", "2018-01-14 16:47:53.328056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.331430"], ["updated_at", "2018-01-14 16:47:53.331430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.341880"], ["updated_at", "2018-01-14 16:47:53.341880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.345091"], ["updated_at", "2018-01-14 16:47:53.345091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.351968"], ["updated_at", "2018-01-14 16:47:53.351968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:47:53.354261"], ["updated_at", "2018-01-14 16:47:53.354261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.362247"], ["updated_at", "2018-01-14 16:47:53.362247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.364754"], ["updated_at", "2018-01-14 16:47:53.364754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.370469"], ["updated_at", "2018-01-14 16:47:53.370469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:47:53.373057"], ["updated_at", "2018-01-14 16:47:53.373057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:47:53.375318"], ["updated_at", "2018-01-14 16:47:53.375318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.377141"], ["updated_at", "2018-01-14 16:47:53.377141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.383664"], ["updated_at", "2018-01-14 16:47:53.383664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:47:53.389411"], ["updated_at", "2018-01-14 16:47:53.389411"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:11.755747', '2018-01-14 16:48:11.755747', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:11.755747', '2018-01-14 16:48:11.755747', 298486374)[0m
  [1m[35m (87.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.860716"], ["updated_at", "2018-01-14 16:48:11.860716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.863586"], ["updated_at", "2018-01-14 16:48:11.863586"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.865607"], ["updated_at", "2018-01-14 16:48:11.865607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.867343"], ["updated_at", "2018-01-14 16:48:11.867343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.869046"], ["updated_at", "2018-01-14 16:48:11.869046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.870811"], ["updated_at", "2018-01-14 16:48:11.870811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.880945"], ["updated_at", "2018-01-14 16:48:11.880945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.883690"], ["updated_at", "2018-01-14 16:48:11.883690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.891267"], ["updated_at", "2018-01-14 16:48:11.891267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.894538"], ["updated_at", "2018-01-14 16:48:11.894538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.900848"], ["updated_at", "2018-01-14 16:48:11.900848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.903574"], ["updated_at", "2018-01-14 16:48:11.903574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.905480"], ["updated_at", "2018-01-14 16:48:11.905480"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.907154"], ["updated_at", "2018-01-14 16:48:11.907154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.914093"], ["updated_at", "2018-01-14 16:48:11.914093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.916327"], ["updated_at", "2018-01-14 16:48:11.916327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.921396"], ["updated_at", "2018-01-14 16:48:11.921396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.923708"], ["updated_at", "2018-01-14 16:48:11.923708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.925806"], ["updated_at", "2018-01-14 16:48:11.925806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.927348"], ["updated_at", "2018-01-14 16:48:11.927348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.933379"], ["updated_at", "2018-01-14 16:48:11.933379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.935500"], ["updated_at", "2018-01-14 16:48:11.935500"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.940322"], ["updated_at", "2018-01-14 16:48:11.940322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.943086"], ["updated_at", "2018-01-14 16:48:11.943086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.949257"], ["updated_at", "2018-01-14 16:48:11.949257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.951595"], ["updated_at", "2018-01-14 16:48:11.951595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.954361"], ["updated_at", "2018-01-14 16:48:11.954361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:11.958417"], ["updated_at", "2018-01-14 16:48:11.958417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.960862"], ["updated_at", "2018-01-14 16:48:11.960862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:11.962547"], ["updated_at", "2018-01-14 16:48:11.962547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.964271"], ["updated_at", "2018-01-14 16:48:11.964271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.970631"], ["updated_at", "2018-01-14 16:48:11.970631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:11.973229"], ["updated_at", "2018-01-14 16:48:11.973229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:27.600686', '2018-01-14 16:48:27.600686', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:27.600686', '2018-01-14 16:48:27.600686', 298486374)[0m
  [1m[35m (122.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:27.742008"], ["updated_at", "2018-01-14 16:48:27.742008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:27.745398"], ["updated_at", "2018-01-14 16:48:27.745398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:47.259721', '2018-01-14 16:48:47.259721', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:47.259721', '2018-01-14 16:48:47.259721', 298486374)[0m
  [1m[35m (97.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:47.382689"], ["updated_at", "2018-01-14 16:48:47.382689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:47.385910"], ["updated_at", "2018-01-14 16:48:47.385910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:47.387822"], ["updated_at", "2018-01-14 16:48:47.387822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:47.389390"], ["updated_at", "2018-01-14 16:48:47.389390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:47.397531"], ["updated_at", "2018-01-14 16:48:47.397531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:47.400320"], ["updated_at", "2018-01-14 16:48:47.400320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:47.406466"], ["updated_at", "2018-01-14 16:48:47.406466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:47.409062"], ["updated_at", "2018-01-14 16:48:47.409062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:47.414486"], ["updated_at", "2018-01-14 16:48:47.414486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:47.416497"], ["updated_at", "2018-01-14 16:48:47.416497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:47.422659"], ["updated_at", "2018-01-14 16:48:47.422659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:47.424772"], ["updated_at", "2018-01-14 16:48:47.424772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:47.431068"], ["updated_at", "2018-01-14 16:48:47.431068"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:47.433129"], ["updated_at", "2018-01-14 16:48:47.433129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:58.588156', '2018-01-14 16:48:58.588156', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:48:58.588156', '2018-01-14 16:48:58.588156', 298486374)[0m
  [1m[35m (92.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.695067"], ["updated_at", "2018-01-14 16:48:58.695067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.698123"], ["updated_at", "2018-01-14 16:48:58.698123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:58.700006"], ["updated_at", "2018-01-14 16:48:58.700006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.701634"], ["updated_at", "2018-01-14 16:48:58.701634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.711393"], ["updated_at", "2018-01-14 16:48:58.711393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.714606"], ["updated_at", "2018-01-14 16:48:58.714606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:58.722108"], ["updated_at", "2018-01-14 16:48:58.722108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:58.724587"], ["updated_at", "2018-01-14 16:48:58.724587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.726279"], ["updated_at", "2018-01-14 16:48:58.726279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.732532"], ["updated_at", "2018-01-14 16:48:58.732532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:48:58.734979"], ["updated_at", "2018-01-14 16:48:58.734979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.743414"], ["updated_at", "2018-01-14 16:48:58.743414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:48:58.745514"], ["updated_at", "2018-01-14 16:48:58.745514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.747158"], ["updated_at", "2018-01-14 16:48:58.747158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.748545"], ["updated_at", "2018-01-14 16:48:58.748545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.749903"], ["updated_at", "2018-01-14 16:48:58.749903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.751754"], ["updated_at", "2018-01-14 16:48:58.751754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.758589"], ["updated_at", "2018-01-14 16:48:58.758589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:48:58.760791"], ["updated_at", "2018-01-14 16:48:58.760791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:49:37.419385', '2018-01-14 16:49:37.419385', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:49:37.419385', '2018-01-14 16:49:37.419385', 298486374)[0m
  [1m[35m (85.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.523846"], ["updated_at", "2018-01-14 16:49:37.523846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.528201"], ["updated_at", "2018-01-14 16:49:37.528201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.529934"], ["updated_at", "2018-01-14 16:49:37.529934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:37.535832"], ["updated_at", "2018-01-14 16:49:37.535832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:37.538230"], ["updated_at", "2018-01-14 16:49:37.538230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:49:37.540297"], ["updated_at", "2018-01-14 16:49:37.540297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.541981"], ["updated_at", "2018-01-14 16:49:37.541981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.549346"], ["updated_at", "2018-01-14 16:49:37.549346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.555614"], ["updated_at", "2018-01-14 16:49:37.555614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:37.561089"], ["updated_at", "2018-01-14 16:49:37.561089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:49:37.563558"], ["updated_at", "2018-01-14 16:49:37.563558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:49:37.565659"], ["updated_at", "2018-01-14 16:49:37.565659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.567546"], ["updated_at", "2018-01-14 16:49:37.567546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:37.574027"], ["updated_at", "2018-01-14 16:49:37.574027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.575999"], ["updated_at", "2018-01-14 16:49:37.575999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.582139"], ["updated_at", "2018-01-14 16:49:37.582139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:37.584146"], ["updated_at", "2018-01-14 16:49:37.584146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:49:50.036115', '2018-01-14 16:49:50.036115', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:49:50.036115', '2018-01-14 16:49:50.036115', 298486374)[0m
  [1m[35m (125.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:50.179886"], ["updated_at", "2018-01-14 16:49:50.179886"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:49:50.183536"], ["updated_at", "2018-01-14 16:49:50.183536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:49:50.185792"], ["updated_at", "2018-01-14 16:49:50.185792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.187887"], ["updated_at", "2018-01-14 16:49:50.187887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.198299"], ["updated_at", "2018-01-14 16:49:50.198299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.201120"], ["updated_at", "2018-01-14 16:49:50.201120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.208798"], ["updated_at", "2018-01-14 16:49:50.208798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.211487"], ["updated_at", "2018-01-14 16:49:50.211487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.213328"], ["updated_at", "2018-01-14 16:49:50.213328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.218033"], ["updated_at", "2018-01-14 16:49:50.218033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:49:50.220446"], ["updated_at", "2018-01-14 16:49:50.220446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:08.810440', '2018-01-14 16:50:08.810440', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:08.810440', '2018-01-14 16:50:08.810440', 298486374)[0m
  [1m[35m (96.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.920848"], ["updated_at", "2018-01-14 16:50:08.920848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.923541"], ["updated_at", "2018-01-14 16:50:08.923541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:08.934630"], ["updated_at", "2018-01-14 16:50:08.934630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.937835"], ["updated_at", "2018-01-14 16:50:08.937835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.940681"], ["updated_at", "2018-01-14 16:50:08.940681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.943003"], ["updated_at", "2018-01-14 16:50:08.943003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:08.951249"], ["updated_at", "2018-01-14 16:50:08.951249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.953157"], ["updated_at", "2018-01-14 16:50:08.953157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
EventTest: test_available_time_slots_method
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.959312"], ["updated_at", "2018-01-14 16:50:08.959312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.962368"], ["updated_at", "2018-01-14 16:50:08.962368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:08.967422"], ["updated_at", "2018-01-14 16:50:08.967422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.970948"], ["updated_at", "2018-01-14 16:50:08.970948"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:08.977280"], ["updated_at", "2018-01-14 16:50:08.977280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:08.979593"], ["updated_at", "2018-01-14 16:50:08.979593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:08.981400"], ["updated_at", "2018-01-14 16:50:08.981400"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.983045"], ["updated_at", "2018-01-14 16:50:08.983045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.988898"], ["updated_at", "2018-01-14 16:50:08.988898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:08.991118"], ["updated_at", "2018-01-14 16:50:08.991118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:09.002851"], ["updated_at", "2018-01-14 16:50:09.002851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:09.005260"], ["updated_at", "2018-01-14 16:50:09.005260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.007311"], ["updated_at", "2018-01-14 16:50:09.007311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.013125"], ["updated_at", "2018-01-14 16:50:09.013125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.015270"], ["updated_at", "2018-01-14 16:50:09.015270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.017048"], ["updated_at", "2018-01-14 16:50:09.017048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.018602"], ["updated_at", "2018-01-14 16:50:09.018602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.020259"], ["updated_at", "2018-01-14 16:50:09.020259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.021834"], ["updated_at", "2018-01-14 16:50:09.021834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.031273"], ["updated_at", "2018-01-14 16:50:09.031273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:09.035052"], ["updated_at", "2018-01-14 16:50:09.035052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.041486"], ["updated_at", "2018-01-14 16:50:09.041486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.043737"], ["updated_at", "2018-01-14 16:50:09.043737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:09.045346"], ["updated_at", "2018-01-14 16:50:09.045346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.046741"], ["updated_at", "2018-01-14 16:50:09.046741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.052771"], ["updated_at", "2018-01-14 16:50:09.052771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.055117"], ["updated_at", "2018-01-14 16:50:09.055117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:09.057005"], ["updated_at", "2018-01-14 16:50:09.057005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.061266"], ["updated_at", "2018-01-14 16:50:09.061266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:09.063656"], ["updated_at", "2018-01-14 16:50:09.063656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:51.342049', '2018-01-14 16:50:51.342049', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:51.342049', '2018-01-14 16:50:51.342049', 298486374)[0m
  [1m[35m (87.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.447285"], ["updated_at", "2018-01-14 16:50:51.447285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.450155"], ["updated_at", "2018-01-14 16:50:51.450155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.452134"], ["updated_at", "2018-01-14 16:50:51.452134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.454263"], ["updated_at", "2018-01-14 16:50:51.454263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.456057"], ["updated_at", "2018-01-14 16:50:51.456057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.457646"], ["updated_at", "2018-01-14 16:50:51.457646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.467279"], ["updated_at", "2018-01-14 16:50:51.467279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.469740"], ["updated_at", "2018-01-14 16:50:51.469740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.476416"], ["updated_at", "2018-01-14 16:50:51.476416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.478833"], ["updated_at", "2018-01-14 16:50:51.478833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.480997"], ["updated_at", "2018-01-14 16:50:51.480997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.482507"], ["updated_at", "2018-01-14 16:50:51.482507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.489443"], ["updated_at", "2018-01-14 16:50:51.489443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.491297"], ["updated_at", "2018-01-14 16:50:51.491297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.497010"], ["updated_at", "2018-01-14 16:50:51.497010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.499453"], ["updated_at", "2018-01-14 16:50:51.499453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.505367"], ["updated_at", "2018-01-14 16:50:51.505367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.507576"], ["updated_at", "2018-01-14 16:50:51.507576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.509234"], ["updated_at", "2018-01-14 16:50:51.509234"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.512688"], ["updated_at", "2018-01-14 16:50:51.512688"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.514811"], ["updated_at", "2018-01-14 16:50:51.514811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.520584"], ["updated_at", "2018-01-14 16:50:51.520584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.522771"], ["updated_at", "2018-01-14 16:50:51.522771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.524547"], ["updated_at", "2018-01-14 16:50:51.524547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.526675"], ["updated_at", "2018-01-14 16:50:51.526675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.532678"], ["updated_at", "2018-01-14 16:50:51.532678"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.534931"], ["updated_at", "2018-01-14 16:50:51.534931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.536874"], ["updated_at", "2018-01-14 16:50:51.536874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.542864"], ["updated_at", "2018-01-14 16:50:51.542864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.545338"], ["updated_at", "2018-01-14 16:50:51.545338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.550181"], ["updated_at", "2018-01-14 16:50:51.550181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:51.552283"], ["updated_at", "2018-01-14 16:50:51.552283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.554551"], ["updated_at", "2018-01-14 16:50:51.554551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.556772"], ["updated_at", "2018-01-14 16:50:51.556772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.564836"], ["updated_at", "2018-01-14 16:50:51.564836"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:51.567345"], ["updated_at", "2018-01-14 16:50:51.567345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.570820"], ["updated_at", "2018-01-14 16:50:51.570820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:51.573633"], ["updated_at", "2018-01-14 16:50:51.573633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:55.407381', '2018-01-14 16:50:55.407381', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:50:55.407381', '2018-01-14 16:50:55.407381', 298486374)[0m
  [1m[35m (79.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.504305"], ["updated_at", "2018-01-14 16:50:55.504305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.507470"], ["updated_at", "2018-01-14 16:50:55.507470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.518973"], ["updated_at", "2018-01-14 16:50:55.518973"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.521723"], ["updated_at", "2018-01-14 16:50:55.521723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.528595"], ["updated_at", "2018-01-14 16:50:55.528595"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.531450"], ["updated_at", "2018-01-14 16:50:55.531450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.533388"], ["updated_at", "2018-01-14 16:50:55.533388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.535071"], ["updated_at", "2018-01-14 16:50:55.535071"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.543492"], ["updated_at", "2018-01-14 16:50:55.543492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.551348"], ["updated_at", "2018-01-14 16:50:55.551348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.558940"], ["updated_at", "2018-01-14 16:50:55.558940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.563741"], ["updated_at", "2018-01-14 16:50:55.563741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.567957"], ["updated_at", "2018-01-14 16:50:55.567957"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.570309"], ["updated_at", "2018-01-14 16:50:55.570309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.576044"], ["updated_at", "2018-01-14 16:50:55.576044"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.579193"], ["updated_at", "2018-01-14 16:50:55.579193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.581248"], ["updated_at", "2018-01-14 16:50:55.581248"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.582967"], ["updated_at", "2018-01-14 16:50:55.582967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.589747"], ["updated_at", "2018-01-14 16:50:55.589747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.592187"], ["updated_at", "2018-01-14 16:50:55.592187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.593986"], ["updated_at", "2018-01-14 16:50:55.593986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.595677"], ["updated_at", "2018-01-14 16:50:55.595677"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.602959"], ["updated_at", "2018-01-14 16:50:55.602959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.605455"], ["updated_at", "2018-01-14 16:50:55.605455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.607191"], ["updated_at", "2018-01-14 16:50:55.607191"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.608756"], ["updated_at", "2018-01-14 16:50:55.608756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.611186"], ["updated_at", "2018-01-14 16:50:55.611186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.613075"], ["updated_at", "2018-01-14 16:50:55.613075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.619804"], ["updated_at", "2018-01-14 16:50:55.619804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.622343"], ["updated_at", "2018-01-14 16:50:55.622343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:50:55.628010"], ["updated_at", "2018-01-14 16:50:55.628010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.630128"], ["updated_at", "2018-01-14 16:50:55.630128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.635980"], ["updated_at", "2018-01-14 16:50:55.635980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.638078"], ["updated_at", "2018-01-14 16:50:55.638078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.640583"], ["updated_at", "2018-01-14 16:50:55.640583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.644518"], ["updated_at", "2018-01-14 16:50:55.644518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:50:55.646812"], ["updated_at", "2018-01-14 16:50:55.646812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:50:55.648874"], ["updated_at", "2018-01-14 16:50:55.648874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:52:44.838086', '2018-01-14 16:52:44.838086', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 16:52:44.838086', '2018-01-14 16:52:44.838086', 298486374)[0m
  [1m[35m (87.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.944315"], ["updated_at", "2018-01-14 16:52:44.944315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.947281"], ["updated_at", "2018-01-14 16:52:44.947281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:44.956424"], ["updated_at", "2018-01-14 16:52:44.956424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:44.959843"], ["updated_at", "2018-01-14 16:52:44.959843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:44.962211"], ["updated_at", "2018-01-14 16:52:44.962211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.964429"], ["updated_at", "2018-01-14 16:52:44.964429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.977620"], ["updated_at", "2018-01-14 16:52:44.977620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.979990"], ["updated_at", "2018-01-14 16:52:44.979990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.983556"], ["updated_at", "2018-01-14 16:52:44.983556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.986022"], ["updated_at", "2018-01-14 16:52:44.986022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:44.989483"], ["updated_at", "2018-01-14 16:52:44.989483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:44.991852"], ["updated_at", "2018-01-14 16:52:44.991852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:44.993827"], ["updated_at", "2018-01-14 16:52:44.993827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:44.999680"], ["updated_at", "2018-01-14 16:52:44.999680"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.001695"], ["updated_at", "2018-01-14 16:52:45.001695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.007770"], ["updated_at", "2018-01-14 16:52:45.007770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.009632"], ["updated_at", "2018-01-14 16:52:45.009632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.011240"], ["updated_at", "2018-01-14 16:52:45.011240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.012832"], ["updated_at", "2018-01-14 16:52:45.012832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.014254"], ["updated_at", "2018-01-14 16:52:45.014254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.015826"], ["updated_at", "2018-01-14 16:52:45.015826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.023108"], ["updated_at", "2018-01-14 16:52:45.023108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.025328"], ["updated_at", "2018-01-14 16:52:45.025328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.027139"], ["updated_at", "2018-01-14 16:52:45.027139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.028639"], ["updated_at", "2018-01-14 16:52:45.028639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.034770"], ["updated_at", "2018-01-14 16:52:45.034770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.036780"], ["updated_at", "2018-01-14 16:52:45.036780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.041883"], ["updated_at", "2018-01-14 16:52:45.041883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.043797"], ["updated_at", "2018-01-14 16:52:45.043797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.049853"], ["updated_at", "2018-01-14 16:52:45.049853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.052050"], ["updated_at", "2018-01-14 16:52:45.052050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.054034"], ["updated_at", "2018-01-14 16:52:45.054034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.055766"], ["updated_at", "2018-01-14 16:52:45.055766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.062459"], ["updated_at", "2018-01-14 16:52:45.062459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.064782"], ["updated_at", "2018-01-14 16:52:45.064782"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 16:52:45.066489"], ["updated_at", "2018-01-14 16:52:45.066489"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.070447"], ["updated_at", "2018-01-14 16:52:45.070447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.072864"], ["updated_at", "2018-01-14 16:52:45.072864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 16:52:45.078439"], ["updated_at", "2018-01-14 16:52:45.078439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 16:52:45.081227"], ["updated_at", "2018-01-14 16:52:45.081227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.9ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:01:23.138220', '2018-01-14 17:01:23.138220', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:01:23.138220', '2018-01-14 17:01:23.138220', 298486374)[0m
  [1m[35m (104.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.262515"], ["updated_at", "2018-01-14 17:01:23.262515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:01:23.267147"], ["updated_at", "2018-01-14 17:01:23.267147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.278229"], ["updated_at", "2018-01-14 17:01:23.278229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.280743"], ["updated_at", "2018-01-14 17:01:23.280743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:01:23.282681"], ["updated_at", "2018-01-14 17:01:23.282681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.284359"], ["updated_at", "2018-01-14 17:01:23.284359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.292677"], ["updated_at", "2018-01-14 17:01:23.292677"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:01:23.299715"], ["updated_at", "2018-01-14 17:01:23.299715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:01:23.303817"], ["updated_at", "2018-01-14 17:01:23.303817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.305926"], ["updated_at", "2018-01-14 17:01:23.305926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.313585"], ["updated_at", "2018-01-14 17:01:23.313585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.316180"], ["updated_at", "2018-01-14 17:01:23.316180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.318187"], ["updated_at", "2018-01-14 17:01:23.318187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.319793"], ["updated_at", "2018-01-14 17:01:23.319793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.321271"], ["updated_at", "2018-01-14 17:01:23.321271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:01:23.322745"], ["updated_at", "2018-01-14 17:01:23.322745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.329866"], ["updated_at", "2018-01-14 17:01:23.329866"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:01:23.332360"], ["updated_at", "2018-01-14 17:01:23.332360"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:01:23.339023"], ["updated_at", "2018-01-14 17:01:23.339023"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-05 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-04"], ["starts_at", "2014-08-04"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:01.483950', '2018-01-14 17:02:01.483950', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:01.483950', '2018-01-14 17:02:01.483950', 298486374)[0m
  [1m[35m (240.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.739099"], ["updated_at", "2018-01-14 17:02:01.739099"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.742994"], ["updated_at", "2018-01-14 17:02:01.742994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.745497"], ["updated_at", "2018-01-14 17:02:01.745497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.747659"], ["updated_at", "2018-01-14 17:02:01.747659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.758004"], ["updated_at", "2018-01-14 17:02:01.758004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.760671"], ["updated_at", "2018-01-14 17:02:01.760671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.767665"], ["updated_at", "2018-01-14 17:02:01.767665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.770708"], ["updated_at", "2018-01-14 17:02:01.770708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.772978"], ["updated_at", "2018-01-14 17:02:01.772978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.778835"], ["updated_at", "2018-01-14 17:02:01.778835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.783330"], ["updated_at", "2018-01-14 17:02:01.783330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.785151"], ["updated_at", "2018-01-14 17:02:01.785151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.787655"], ["updated_at", "2018-01-14 17:02:01.787655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.790216"], ["updated_at", "2018-01-14 17:02:01.790216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.792382"], ["updated_at", "2018-01-14 17:02:01.792382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.800752"], ["updated_at", "2018-01-14 17:02:01.800752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.804054"], ["updated_at", "2018-01-14 17:02:01.804054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.806557"], ["updated_at", "2018-01-14 17:02:01.806557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.808980"], ["updated_at", "2018-01-14 17:02:01.808980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.817400"], ["updated_at", "2018-01-14 17:02:01.817400"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.820827"], ["updated_at", "2018-01-14 17:02:01.820827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.823343"], ["updated_at", "2018-01-14 17:02:01.823343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.825361"], ["updated_at", "2018-01-14 17:02:01.825361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.830789"], ["updated_at", "2018-01-14 17:02:01.830789"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.833319"], ["updated_at", "2018-01-14 17:02:01.833319"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.839863"], ["updated_at", "2018-01-14 17:02:01.839863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:01.842751"], ["updated_at", "2018-01-14 17:02:01.842751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:01.844707"], ["updated_at", "2018-01-14 17:02:01.844707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:01.851398"], ["updated_at", "2018-01-14 17:02:01.851398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-05 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-04"], ["starts_at", "2014-08-04"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:16.981961', '2018-01-14 17:02:16.981961', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:16.981961', '2018-01-14 17:02:16.981961', 298486374)[0m
  [1m[35m (99.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:17.096737"], ["updated_at", "2018-01-14 17:02:17.096737"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:17.099794"], ["updated_at", "2018-01-14 17:02:17.099794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:17.101695"], ["updated_at", "2018-01-14 17:02:17.101695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:17.109884"], ["updated_at", "2018-01-14 17:02:17.109884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:17.113175"], ["updated_at", "2018-01-14 17:02:17.113175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:17.122445"], ["updated_at", "2018-01-14 17:02:17.122445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-05 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-04"], ["starts_at", "2014-08-04"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:48.123393', '2018-01-14 17:02:48.123393', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:02:48.123393', '2018-01-14 17:02:48.123393', 298486374)[0m
  [1m[35m (92.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.233615"], ["updated_at", "2018-01-14 17:02:48.233615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.237696"], ["updated_at", "2018-01-14 17:02:48.237696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.240966"], ["updated_at", "2018-01-14 17:02:48.240966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.243539"], ["updated_at", "2018-01-14 17:02:48.243539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.246317"], ["updated_at", "2018-01-14 17:02:48.246317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.248728"], ["updated_at", "2018-01-14 17:02:48.248728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.262023"], ["updated_at", "2018-01-14 17:02:48.262023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.265105"], ["updated_at", "2018-01-14 17:02:48.265105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.274041"], ["updated_at", "2018-01-14 17:02:48.274041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.277796"], ["updated_at", "2018-01-14 17:02:48.277796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.279944"], ["updated_at", "2018-01-14 17:02:48.279944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.281861"], ["updated_at", "2018-01-14 17:02:48.281861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.293776"], ["updated_at", "2018-01-14 17:02:48.293776"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.297070"], ["updated_at", "2018-01-14 17:02:48.297070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.299542"], ["updated_at", "2018-01-14 17:02:48.299542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.307223"], ["updated_at", "2018-01-14 17:02:48.307223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.309928"], ["updated_at", "2018-01-14 17:02:48.309928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.311815"], ["updated_at", "2018-01-14 17:02:48.311815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.313514"], ["updated_at", "2018-01-14 17:02:48.313514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.320301"], ["updated_at", "2018-01-14 17:02:48.320301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.323386"], ["updated_at", "2018-01-14 17:02:48.323386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.325685"], ["updated_at", "2018-01-14 17:02:48.325685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.328144"], ["updated_at", "2018-01-14 17:02:48.328144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.335561"], ["updated_at", "2018-01-14 17:02:48.335561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.337518"], ["updated_at", "2018-01-14 17:02:48.337518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.341128"], ["updated_at", "2018-01-14 17:02:48.341128"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.343529"], ["updated_at", "2018-01-14 17:02:48.343529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.348853"], ["updated_at", "2018-01-14 17:02:48.348853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:02:48.351224"], ["updated_at", "2018-01-14 17:02:48.351224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.358473"], ["updated_at", "2018-01-14 17:02:48.358473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.360474"], ["updated_at", "2018-01-14 17:02:48.360474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.366143"], ["updated_at", "2018-01-14 17:02:48.366143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.368156"], ["updated_at", "2018-01-14 17:02:48.368156"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.369942"], ["updated_at", "2018-01-14 17:02:48.369942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.374235"], ["updated_at", "2018-01-14 17:02:48.374235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:02:48.376320"], ["updated_at", "2018-01-14 17:02:48.376320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:02:48.383617"], ["updated_at", "2018-01-14 17:02:48.383617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-05 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-04"], ["starts_at", "2014-08-04"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:05:38.345875', '2018-01-14 17:05:38.345875', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:05:38.345875', '2018-01-14 17:05:38.345875', 298486374)[0m
  [1m[35m (246.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.607840"], ["updated_at", "2018-01-14 17:05:38.607840"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.610481"], ["updated_at", "2018-01-14 17:05:38.610481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.618625"], ["updated_at", "2018-01-14 17:05:38.618625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.621364"], ["updated_at", "2018-01-14 17:05:38.621364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:05:38.623067"], ["updated_at", "2018-01-14 17:05:38.623067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:05:38.624690"], ["updated_at", "2018-01-14 17:05:38.624690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:05:38.626270"], ["updated_at", "2018-01-14 17:05:38.626270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:05:38.627844"], ["updated_at", "2018-01-14 17:05:38.627844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.635672"], ["updated_at", "2018-01-14 17:05:38.635672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.638172"], ["updated_at", "2018-01-14 17:05:38.638172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:05:38.639844"], ["updated_at", "2018-01-14 17:05:38.639844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:05:38.641349"], ["updated_at", "2018-01-14 17:05:38.641349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.649881"], ["updated_at", "2018-01-14 17:05:38.649881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:05:38.652807"], ["updated_at", "2018-01-14 17:05:38.652807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:05:38.662574"], ["updated_at", "2018-01-14 17:05:38.662574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-13 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-04"], ["starts_at", "2014-08-12"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:06:47.352269', '2018-01-14 17:06:47.352269', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:06:47.352269', '2018-01-14 17:06:47.352269', 298486374)[0m
  [1m[35m (77.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.444414"], ["updated_at", "2018-01-14 17:06:47.444414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.447983"], ["updated_at", "2018-01-14 17:06:47.447983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.452138"], ["updated_at", "2018-01-14 17:06:47.452138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.454655"], ["updated_at", "2018-01-14 17:06:47.454655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.465402"], ["updated_at", "2018-01-14 17:06:47.465402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.468754"], ["updated_at", "2018-01-14 17:06:47.468754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.471214"], ["updated_at", "2018-01-14 17:06:47.471214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.475807"], ["updated_at", "2018-01-14 17:06:47.475807"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.478872"], ["updated_at", "2018-01-14 17:06:47.478872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.487546"], ["updated_at", "2018-01-14 17:06:47.487546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.496902"], ["updated_at", "2018-01-14 17:06:47.496902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.498587"], ["updated_at", "2018-01-14 17:06:47.498587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.500049"], ["updated_at", "2018-01-14 17:06:47.500049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.501569"], ["updated_at", "2018-01-14 17:06:47.501569"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.503009"], ["updated_at", "2018-01-14 17:06:47.503009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.509589"], ["updated_at", "2018-01-14 17:06:47.509589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.512175"], ["updated_at", "2018-01-14 17:06:47.512175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.515326"], ["updated_at", "2018-01-14 17:06:47.515326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.517362"], ["updated_at", "2018-01-14 17:06:47.517362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.524342"], ["updated_at", "2018-01-14 17:06:47.524342"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.526738"], ["updated_at", "2018-01-14 17:06:47.526738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.528730"], ["updated_at", "2018-01-14 17:06:47.528730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.531193"], ["updated_at", "2018-01-14 17:06:47.531193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.537770"], ["updated_at", "2018-01-14 17:06:47.537770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.539780"], ["updated_at", "2018-01-14 17:06:47.539780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.545602"], ["updated_at", "2018-01-14 17:06:47.545602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.548503"], ["updated_at", "2018-01-14 17:06:47.548503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.553905"], ["updated_at", "2018-01-14 17:06:47.553905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.556197"], ["updated_at", "2018-01-14 17:06:47.556197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.562503"], ["updated_at", "2018-01-14 17:06:47.562503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.565334"], ["updated_at", "2018-01-14 17:06:47.565334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.567080"], ["updated_at", "2018-01-14 17:06:47.567080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.568871"], ["updated_at", "2018-01-14 17:06:47.568871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.576115"], ["updated_at", "2018-01-14 17:06:47.576115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.578496"], ["updated_at", "2018-01-14 17:06:47.578496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.581546"], ["updated_at", "2018-01-14 17:06:47.581546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.587914"], ["updated_at", "2018-01-14 17:06:47.587914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:06:47.590502"], ["updated_at", "2018-01-14 17:06:47.590502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:06:47.594036"], ["updated_at", "2018-01-14 17:06:47.594036"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:06:47.597029"], ["updated_at", "2018-01-14 17:06:47.597029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (111.6ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:31:42.934903', '2018-01-14 17:31:42.934903', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 17:31:42.934903', '2018-01-14 17:31:42.934903', 298486374)[0m
  [1m[35m (115.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.182950"], ["updated_at", "2018-01-14 17:31:43.182950"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.186705"], ["updated_at", "2018-01-14 17:31:43.186705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.189458"], ["updated_at", "2018-01-14 17:31:43.189458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.230008"], ["updated_at", "2018-01-14 17:31:43.230008"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.233106"], ["updated_at", "2018-01-14 17:31:43.233106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.235528"], ["updated_at", "2018-01-14 17:31:43.235528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.238080"], ["updated_at", "2018-01-14 17:31:43.238080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.241411"], ["updated_at", "2018-01-14 17:31:43.241411"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.243866"], ["updated_at", "2018-01-14 17:31:43.243866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.254592"], ["updated_at", "2018-01-14 17:31:43.254592"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.258087"], ["updated_at", "2018-01-14 17:31:43.258087"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.262697"], ["updated_at", "2018-01-14 17:31:43.262697"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.265462"], ["updated_at", "2018-01-14 17:31:43.265462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.268817"], ["updated_at", "2018-01-14 17:31:43.268817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.272056"], ["updated_at", "2018-01-14 17:31:43.272056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.280919"], ["updated_at", "2018-01-14 17:31:43.280919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.283211"], ["updated_at", "2018-01-14 17:31:43.283211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.285076"], ["updated_at", "2018-01-14 17:31:43.285076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.290143"], ["updated_at", "2018-01-14 17:31:43.290143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.292440"], ["updated_at", "2018-01-14 17:31:43.292440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.299944"], ["updated_at", "2018-01-14 17:31:43.299944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.302180"], ["updated_at", "2018-01-14 17:31:43.302180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.310148"], ["updated_at", "2018-01-14 17:31:43.310148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.312450"], ["updated_at", "2018-01-14 17:31:43.312450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.314497"], ["updated_at", "2018-01-14 17:31:43.314497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.316356"], ["updated_at", "2018-01-14 17:31:43.316356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.323640"], ["updated_at", "2018-01-14 17:31:43.323640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.326114"], ["updated_at", "2018-01-14 17:31:43.326114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.331956"], ["updated_at", "2018-01-14 17:31:43.331956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.334208"], ["updated_at", "2018-01-14 17:31:43.334208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.341805"], ["updated_at", "2018-01-14 17:31:43.341805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.343768"], ["updated_at", "2018-01-14 17:31:43.343768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.347228"], ["updated_at", "2018-01-14 17:31:43.347228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.349510"], ["updated_at", "2018-01-14 17:31:43.349510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 17:31:43.351875"], ["updated_at", "2018-01-14 17:31:43.351875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.354501"], ["updated_at", "2018-01-14 17:31:43.354501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 17:31:43.367174"], ["updated_at", "2018-01-14 17:31:43.367174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.369540"], ["updated_at", "2018-01-14 17:31:43.369540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.377611"], ["updated_at", "2018-01-14 17:31:43.377611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 17:31:43.380211"], ["updated_at", "2018-01-14 17:31:43.380211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:00.162263', '2018-01-14 18:07:00.162263', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:00.162263', '2018-01-14 18:07:00.162263', 298486374)[0m
  [1m[35m (98.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.273693"], ["updated_at", "2018-01-14 18:07:00.273693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.276169"], ["updated_at", "2018-01-14 18:07:00.276169"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.283020"], ["updated_at", "2018-01-14 18:07:00.283020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.284818"], ["updated_at", "2018-01-14 18:07:00.284818"]]
  [1m[35m (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.289105"], ["updated_at", "2018-01-14 18:07:00.289105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:00.290800"], ["updated_at", "2018-01-14 18:07:00.290800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.296671"], ["updated_at", "2018-01-14 18:07:00.296671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.299239"], ["updated_at", "2018-01-14 18:07:00.299239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.305039"], ["updated_at", "2018-01-14 18:07:00.305039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.307171"], ["updated_at", "2018-01-14 18:07:00.307171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.314671"], ["updated_at", "2018-01-14 18:07:00.314671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.316611"], ["updated_at", "2018-01-14 18:07:00.316611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:00.318314"], ["updated_at", "2018-01-14 18:07:00.318314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:00.319805"], ["updated_at", "2018-01-14 18:07:00.319805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:00.326397"], ["updated_at", "2018-01-14 18:07:00.326397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:16.843575', '2018-01-14 18:07:16.843575', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:16.843575', '2018-01-14 18:07:16.843575', 298486374)[0m
  [1m[35m (110.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:16.977142"], ["updated_at", "2018-01-14 18:07:16.977142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:16.981117"], ["updated_at", "2018-01-14 18:07:16.981117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:16.986518"], ["updated_at", "2018-01-14 18:07:16.986518"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:16.989853"], ["updated_at", "2018-01-14 18:07:16.989853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.001060"], ["updated_at", "2018-01-14 18:07:17.001060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.004331"], ["updated_at", "2018-01-14 18:07:17.004331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.006432"], ["updated_at", "2018-01-14 18:07:17.006432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.008151"], ["updated_at", "2018-01-14 18:07:17.008151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.015456"], ["updated_at", "2018-01-14 18:07:17.015456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.017540"], ["updated_at", "2018-01-14 18:07:17.017540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.029280"], ["updated_at", "2018-01-14 18:07:17.029280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.031164"], ["updated_at", "2018-01-14 18:07:17.031164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.032932"], ["updated_at", "2018-01-14 18:07:17.032932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.038708"], ["updated_at", "2018-01-14 18:07:17.038708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.040704"], ["updated_at", "2018-01-14 18:07:17.040704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.042621"], ["updated_at", "2018-01-14 18:07:17.042621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.046732"], ["updated_at", "2018-01-14 18:07:17.046732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.048919"], ["updated_at", "2018-01-14 18:07:17.048919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.050751"], ["updated_at", "2018-01-14 18:07:17.050751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.052458"], ["updated_at", "2018-01-14 18:07:17.052458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.054096"], ["updated_at", "2018-01-14 18:07:17.054096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.055565"], ["updated_at", "2018-01-14 18:07:17.055565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.062504"], ["updated_at", "2018-01-14 18:07:17.062504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.064406"], ["updated_at", "2018-01-14 18:07:17.064406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.069630"], ["updated_at", "2018-01-14 18:07:17.069630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.071501"], ["updated_at", "2018-01-14 18:07:17.071501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.077933"], ["updated_at", "2018-01-14 18:07:17.077933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.079919"], ["updated_at", "2018-01-14 18:07:17.079919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.081935"], ["updated_at", "2018-01-14 18:07:17.081935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.083691"], ["updated_at", "2018-01-14 18:07:17.083691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.089300"], ["updated_at", "2018-01-14 18:07:17.089300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.091483"], ["updated_at", "2018-01-14 18:07:17.091483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.093398"], ["updated_at", "2018-01-14 18:07:17.093398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.095094"], ["updated_at", "2018-01-14 18:07:17.095094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.101151"], ["updated_at", "2018-01-14 18:07:17.101151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.104226"], ["updated_at", "2018-01-14 18:07:17.104226"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:17.106161"], ["updated_at", "2018-01-14 18:07:17.106161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:17.109302"], ["updated_at", "2018-01-14 18:07:17.109302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.111264"], ["updated_at", "2018-01-14 18:07:17.111264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.116422"], ["updated_at", "2018-01-14 18:07:17.116422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:17.118271"], ["updated_at", "2018-01-14 18:07:17.118271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:52.621691', '2018-01-14 18:07:52.621691', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:52.621691', '2018-01-14 18:07:52.621691', 298486374)[0m
  [1m[35m (96.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.731553"], ["updated_at", "2018-01-14 18:07:52.731553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.734762"], ["updated_at", "2018-01-14 18:07:52.734762"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.737468"], ["updated_at", "2018-01-14 18:07:52.737468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.740454"], ["updated_at", "2018-01-14 18:07:52.740454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.751463"], ["updated_at", "2018-01-14 18:07:52.751463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.753812"], ["updated_at", "2018-01-14 18:07:52.753812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.760323"], ["updated_at", "2018-01-14 18:07:52.760323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.764241"], ["updated_at", "2018-01-14 18:07:52.764241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.766252"], ["updated_at", "2018-01-14 18:07:52.766252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.772659"], ["updated_at", "2018-01-14 18:07:52.772659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.775318"], ["updated_at", "2018-01-14 18:07:52.775318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.779346"], ["updated_at", "2018-01-14 18:07:52.779346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.781844"], ["updated_at", "2018-01-14 18:07:52.781844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.787433"], ["updated_at", "2018-01-14 18:07:52.787433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.789361"], ["updated_at", "2018-01-14 18:07:52.789361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.794711"], ["updated_at", "2018-01-14 18:07:52.794711"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.796940"], ["updated_at", "2018-01-14 18:07:52.796940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.798815"], ["updated_at", "2018-01-14 18:07:52.798815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.800505"], ["updated_at", "2018-01-14 18:07:52.800505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.809225"], ["updated_at", "2018-01-14 18:07:52.809225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.811758"], ["updated_at", "2018-01-14 18:07:52.811758"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.813938"], ["updated_at", "2018-01-14 18:07:52.813938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.818114"], ["updated_at", "2018-01-14 18:07:52.818114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.819919"], ["updated_at", "2018-01-14 18:07:52.819919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.821820"], ["updated_at", "2018-01-14 18:07:52.821820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.828379"], ["updated_at", "2018-01-14 18:07:52.828379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.830281"], ["updated_at", "2018-01-14 18:07:52.830281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.833185"], ["updated_at", "2018-01-14 18:07:52.833185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.835023"], ["updated_at", "2018-01-14 18:07:52.835023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.837279"], ["updated_at", "2018-01-14 18:07:52.837279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.839884"], ["updated_at", "2018-01-14 18:07:52.839884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.842403"], ["updated_at", "2018-01-14 18:07:52.842403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.845045"], ["updated_at", "2018-01-14 18:07:52.845045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.854827"], ["updated_at", "2018-01-14 18:07:52.854827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.857452"], ["updated_at", "2018-01-14 18:07:52.857452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.864993"], ["updated_at", "2018-01-14 18:07:52.864993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:52.867633"], ["updated_at", "2018-01-14 18:07:52.867633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:52.870105"], ["updated_at", "2018-01-14 18:07:52.870105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.872472"], ["updated_at", "2018-01-14 18:07:52.872472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.884732"], ["updated_at", "2018-01-14 18:07:52.884732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:52.886499"], ["updated_at", "2018-01-14 18:07:52.886499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:54.456260', '2018-01-14 18:07:54.456260', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:07:54.456260', '2018-01-14 18:07:54.456260', 298486374)[0m
  [1m[35m (96.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.574562"], ["updated_at", "2018-01-14 18:07:54.574562"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.578364"], ["updated_at", "2018-01-14 18:07:54.578364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.581365"], ["updated_at", "2018-01-14 18:07:54.581365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.584254"], ["updated_at", "2018-01-14 18:07:54.584254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.596718"], ["updated_at", "2018-01-14 18:07:54.596718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.601270"], ["updated_at", "2018-01-14 18:07:54.601270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.609533"], ["updated_at", "2018-01-14 18:07:54.609533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.613085"], ["updated_at", "2018-01-14 18:07:54.613085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.615279"], ["updated_at", "2018-01-14 18:07:54.615279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.617445"], ["updated_at", "2018-01-14 18:07:54.617445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.621676"], ["updated_at", "2018-01-14 18:07:54.621676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.623969"], ["updated_at", "2018-01-14 18:07:54.623969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.630226"], ["updated_at", "2018-01-14 18:07:54.630226"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.632399"], ["updated_at", "2018-01-14 18:07:54.632399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.635104"], ["updated_at", "2018-01-14 18:07:54.635104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.637208"], ["updated_at", "2018-01-14 18:07:54.637208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.638864"], ["updated_at", "2018-01-14 18:07:54.638864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.640474"], ["updated_at", "2018-01-14 18:07:54.640474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.647027"], ["updated_at", "2018-01-14 18:07:54.647027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.649048"], ["updated_at", "2018-01-14 18:07:54.649048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.650937"], ["updated_at", "2018-01-14 18:07:54.650937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.652709"], ["updated_at", "2018-01-14 18:07:54.652709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.660088"], ["updated_at", "2018-01-14 18:07:54.660088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.662723"], ["updated_at", "2018-01-14 18:07:54.662723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.669724"], ["updated_at", "2018-01-14 18:07:54.669724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.671806"], ["updated_at", "2018-01-14 18:07:54.671806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.676610"], ["updated_at", "2018-01-14 18:07:54.676610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.678389"], ["updated_at", "2018-01-14 18:07:54.678389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.680186"], ["updated_at", "2018-01-14 18:07:54.680186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.686638"], ["updated_at", "2018-01-14 18:07:54.686638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.688503"], ["updated_at", "2018-01-14 18:07:54.688503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.694759"], ["updated_at", "2018-01-14 18:07:54.694759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.696472"], ["updated_at", "2018-01-14 18:07:54.696472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.702281"], ["updated_at", "2018-01-14 18:07:54.702281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.704279"], ["updated_at", "2018-01-14 18:07:54.704279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.709487"], ["updated_at", "2018-01-14 18:07:54.709487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.711300"], ["updated_at", "2018-01-14 18:07:54.711300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.714454"], ["updated_at", "2018-01-14 18:07:54.714454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:07:54.716418"], ["updated_at", "2018-01-14 18:07:54.716418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:07:54.718634"], ["updated_at", "2018-01-14 18:07:54.718634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:07:54.720961"], ["updated_at", "2018-01-14 18:07:54.720961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:08:26.914321', '2018-01-14 18:08:26.914321', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:08:26.914321', '2018-01-14 18:08:26.914321', 298486374)[0m
  [1m[35m (91.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.025432"], ["updated_at", "2018-01-14 18:08:27.025432"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.032538"], ["updated_at", "2018-01-14 18:08:27.032538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.036913"], ["updated_at", "2018-01-14 18:08:27.036913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.040161"], ["updated_at", "2018-01-14 18:08:27.040161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.052916"], ["updated_at", "2018-01-14 18:08:27.052916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.055934"], ["updated_at", "2018-01-14 18:08:27.055934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.065478"], ["updated_at", "2018-01-14 18:08:27.065478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.068455"], ["updated_at", "2018-01-14 18:08:27.068455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.076000"], ["updated_at", "2018-01-14 18:08:27.076000"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.079085"], ["updated_at", "2018-01-14 18:08:27.079085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.081806"], ["updated_at", "2018-01-14 18:08:27.081806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.087036"], ["updated_at", "2018-01-14 18:08:27.087036"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.089889"], ["updated_at", "2018-01-14 18:08:27.089889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.092561"], ["updated_at", "2018-01-14 18:08:27.092561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.095158"], ["updated_at", "2018-01-14 18:08:27.095158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.103910"], ["updated_at", "2018-01-14 18:08:27.103910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.106507"], ["updated_at", "2018-01-14 18:08:27.106507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.110362"], ["updated_at", "2018-01-14 18:08:27.110362"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.114862"], ["updated_at", "2018-01-14 18:08:27.114862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.117462"], ["updated_at", "2018-01-14 18:08:27.117462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.119414"], ["updated_at", "2018-01-14 18:08:27.119414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.121681"], ["updated_at", "2018-01-14 18:08:27.121681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.124252"], ["updated_at", "2018-01-14 18:08:27.124252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.133430"], ["updated_at", "2018-01-14 18:08:27.133430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.135979"], ["updated_at", "2018-01-14 18:08:27.135979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.138286"], ["updated_at", "2018-01-14 18:08:27.138286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.140557"], ["updated_at", "2018-01-14 18:08:27.140557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.145620"], ["updated_at", "2018-01-14 18:08:27.145620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.147280"], ["updated_at", "2018-01-14 18:08:27.147280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.153216"], ["updated_at", "2018-01-14 18:08:27.153216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.154916"], ["updated_at", "2018-01-14 18:08:27.154916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.159826"], ["updated_at", "2018-01-14 18:08:27.159826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.161835"], ["updated_at", "2018-01-14 18:08:27.161835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.164335"], ["updated_at", "2018-01-14 18:08:27.164335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.166460"], ["updated_at", "2018-01-14 18:08:27.166460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.171942"], ["updated_at", "2018-01-14 18:08:27.171942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.173761"], ["updated_at", "2018-01-14 18:08:27.173761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.179449"], ["updated_at", "2018-01-14 18:08:27.179449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:08:27.185114"], ["updated_at", "2018-01-14 18:08:27.185114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:08:27.187008"], ["updated_at", "2018-01-14 18:08:27.187008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:08:27.188603"], ["updated_at", "2018-01-14 18:08:27.188603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (12.1ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:16:20.355818', '2018-01-14 18:16:20.355818', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:16:20.355818', '2018-01-14 18:16:20.355818', 298486374)[0m
  [1m[35m (108.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.503362"], ["updated_at", "2018-01-14 18:16:20.503362"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.512800"], ["updated_at", "2018-01-14 18:16:20.512800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.516826"], ["updated_at", "2018-01-14 18:16:20.516826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.520796"], ["updated_at", "2018-01-14 18:16:20.520796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.523631"], ["updated_at", "2018-01-14 18:16:20.523631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.560405"], ["updated_at", "2018-01-14 18:16:20.560405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.562534"], ["updated_at", "2018-01-14 18:16:20.562534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.564663"], ["updated_at", "2018-01-14 18:16:20.564663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.566706"], ["updated_at", "2018-01-14 18:16:20.566706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.575832"], ["updated_at", "2018-01-14 18:16:20.575832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.577980"], ["updated_at", "2018-01-14 18:16:20.577980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.584416"], ["updated_at", "2018-01-14 18:16:20.584416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.586461"], ["updated_at", "2018-01-14 18:16:20.586461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.592304"], ["updated_at", "2018-01-14 18:16:20.592304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.594203"], ["updated_at", "2018-01-14 18:16:20.594203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.596464"], ["updated_at", "2018-01-14 18:16:20.596464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.599072"], ["updated_at", "2018-01-14 18:16:20.599072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.609628"], ["updated_at", "2018-01-14 18:16:20.609628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.612854"], ["updated_at", "2018-01-14 18:16:20.612854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.620069"], ["updated_at", "2018-01-14 18:16:20.620069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.622432"], ["updated_at", "2018-01-14 18:16:20.622432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.635214"], ["updated_at", "2018-01-14 18:16:20.635214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.638667"], ["updated_at", "2018-01-14 18:16:20.638667"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.641426"], ["updated_at", "2018-01-14 18:16:20.641426"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.648598"], ["updated_at", "2018-01-14 18:16:20.648598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.652910"], ["updated_at", "2018-01-14 18:16:20.652910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.655802"], ["updated_at", "2018-01-14 18:16:20.655802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (1.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.670423"], ["updated_at", "2018-01-14 18:16:20.670423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.674903"], ["updated_at", "2018-01-14 18:16:20.674903"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.677676"], ["updated_at", "2018-01-14 18:16:20.677676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.680507"], ["updated_at", "2018-01-14 18:16:20.680507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.684253"], ["updated_at", "2018-01-14 18:16:20.684253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.688095"], ["updated_at", "2018-01-14 18:16:20.688095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.699078"], ["updated_at", "2018-01-14 18:16:20.699078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.702953"], ["updated_at", "2018-01-14 18:16:20.702953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.712247"], ["updated_at", "2018-01-14 18:16:20.712247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.715890"], ["updated_at", "2018-01-14 18:16:20.715890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.720331"], ["updated_at", "2018-01-14 18:16:20.720331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:16:20.726090"], ["updated_at", "2018-01-14 18:16:20.726090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:16:20.731374"], ["updated_at", "2018-01-14 18:16:20.731374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:16:20.735043"], ["updated_at", "2018-01-14 18:16:20.735043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:19:52.360633', '2018-01-14 18:19:52.360633', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:19:52.360633', '2018-01-14 18:19:52.360633', 298486374)[0m
  [1m[35m (78.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.459940"], ["updated_at", "2018-01-14 18:19:52.459940"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.464252"], ["updated_at", "2018-01-14 18:19:52.464252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.467026"], ["updated_at", "2018-01-14 18:19:52.467026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.469563"], ["updated_at", "2018-01-14 18:19:52.469563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.481083"], ["updated_at", "2018-01-14 18:19:52.481083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.483994"], ["updated_at", "2018-01-14 18:19:52.483994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.487128"], ["updated_at", "2018-01-14 18:19:52.487128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.492351"], ["updated_at", "2018-01-14 18:19:52.492351"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.495267"], ["updated_at", "2018-01-14 18:19:52.495267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.501573"], ["updated_at", "2018-01-14 18:19:52.501573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.503813"], ["updated_at", "2018-01-14 18:19:52.503813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.515339"], ["updated_at", "2018-01-14 18:19:52.515339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.517544"], ["updated_at", "2018-01-14 18:19:52.517544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.523699"], ["updated_at", "2018-01-14 18:19:52.523699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.526302"], ["updated_at", "2018-01-14 18:19:52.526302"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.534017"], ["updated_at", "2018-01-14 18:19:52.534017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.536211"], ["updated_at", "2018-01-14 18:19:52.536211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.539742"], ["updated_at", "2018-01-14 18:19:52.539742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.542653"], ["updated_at", "2018-01-14 18:19:52.542653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.550859"], ["updated_at", "2018-01-14 18:19:52.550859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.553105"], ["updated_at", "2018-01-14 18:19:52.553105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.559839"], ["updated_at", "2018-01-14 18:19:52.559839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.563786"], ["updated_at", "2018-01-14 18:19:52.563786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.566024"], ["updated_at", "2018-01-14 18:19:52.566024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.568148"], ["updated_at", "2018-01-14 18:19:52.568148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.576498"], ["updated_at", "2018-01-14 18:19:52.576498"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.579416"], ["updated_at", "2018-01-14 18:19:52.579416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.583645"], ["updated_at", "2018-01-14 18:19:52.583645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.586137"], ["updated_at", "2018-01-14 18:19:52.586137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.588276"], ["updated_at", "2018-01-14 18:19:52.588276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.590589"], ["updated_at", "2018-01-14 18:19:52.590589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.598066"], ["updated_at", "2018-01-14 18:19:52.598066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.600607"], ["updated_at", "2018-01-14 18:19:52.600607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.604468"], ["updated_at", "2018-01-14 18:19:52.604468"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.607483"], ["updated_at", "2018-01-14 18:19:52.607483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.610212"], ["updated_at", "2018-01-14 18:19:52.610212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.613788"], ["updated_at", "2018-01-14 18:19:52.613788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.626330"], ["updated_at", "2018-01-14 18:19:52.626330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:19:52.630283"], ["updated_at", "2018-01-14 18:19:52.630283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:19:52.633741"], ["updated_at", "2018-01-14 18:19:52.633741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:19:52.636733"], ["updated_at", "2018-01-14 18:19:52.636733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:35.130207', '2018-01-14 18:20:35.130207', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:35.130207', '2018-01-14 18:20:35.130207', 298486374)[0m
  [1m[35m (100.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.255088"], ["updated_at", "2018-01-14 18:20:35.255088"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.260817"], ["updated_at", "2018-01-14 18:20:35.260817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.275220"], ["updated_at", "2018-01-14 18:20:35.275220"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.282533"], ["updated_at", "2018-01-14 18:20:35.282533"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.287553"], ["updated_at", "2018-01-14 18:20:35.287553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.290715"], ["updated_at", "2018-01-14 18:20:35.290715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.293624"], ["updated_at", "2018-01-14 18:20:35.293624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.295990"], ["updated_at", "2018-01-14 18:20:35.295990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.298141"], ["updated_at", "2018-01-14 18:20:35.298141"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.311508"], ["updated_at", "2018-01-14 18:20:35.311508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.314120"], ["updated_at", "2018-01-14 18:20:35.314120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.321663"], ["updated_at", "2018-01-14 18:20:35.321663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.324097"], ["updated_at", "2018-01-14 18:20:35.324097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.334131"], ["updated_at", "2018-01-14 18:20:35.334131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.337807"], ["updated_at", "2018-01-14 18:20:35.337807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.347301"], ["updated_at", "2018-01-14 18:20:35.347301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.349473"], ["updated_at", "2018-01-14 18:20:35.349473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.352951"], ["updated_at", "2018-01-14 18:20:35.352951"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.357737"], ["updated_at", "2018-01-14 18:20:35.357737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.360418"], ["updated_at", "2018-01-14 18:20:35.360418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.362591"], ["updated_at", "2018-01-14 18:20:35.362591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.365285"], ["updated_at", "2018-01-14 18:20:35.365285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.377085"], ["updated_at", "2018-01-14 18:20:35.377085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.379229"], ["updated_at", "2018-01-14 18:20:35.379229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.382515"], ["updated_at", "2018-01-14 18:20:35.382515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.384684"], ["updated_at", "2018-01-14 18:20:35.384684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.388066"], ["updated_at", "2018-01-14 18:20:35.388066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.391245"], ["updated_at", "2018-01-14 18:20:35.391245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.400117"], ["updated_at", "2018-01-14 18:20:35.400117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.403077"], ["updated_at", "2018-01-14 18:20:35.403077"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.410577"], ["updated_at", "2018-01-14 18:20:35.410577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.412965"], ["updated_at", "2018-01-14 18:20:35.412965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.415514"], ["updated_at", "2018-01-14 18:20:35.415514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.417664"], ["updated_at", "2018-01-14 18:20:35.417664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.426469"], ["updated_at", "2018-01-14 18:20:35.426469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.428770"], ["updated_at", "2018-01-14 18:20:35.428770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.431275"], ["updated_at", "2018-01-14 18:20:35.431275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.439066"], ["updated_at", "2018-01-14 18:20:35.439066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:35.441304"], ["updated_at", "2018-01-14 18:20:35.441304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:35.443680"], ["updated_at", "2018-01-14 18:20:35.443680"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:35.445773"], ["updated_at", "2018-01-14 18:20:35.445773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:41.091092', '2018-01-14 18:20:41.091092', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:41.091092', '2018-01-14 18:20:41.091092', 298486374)[0m
  [1m[35m (75.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.191766"], ["updated_at", "2018-01-14 18:20:41.191766"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.196730"], ["updated_at", "2018-01-14 18:20:41.196730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.200351"], ["updated_at", "2018-01-14 18:20:41.200351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.203408"], ["updated_at", "2018-01-14 18:20:41.203408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.217226"], ["updated_at", "2018-01-14 18:20:41.217226"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.220595"], ["updated_at", "2018-01-14 18:20:41.220595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.229303"], ["updated_at", "2018-01-14 18:20:41.229303"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.235908"], ["updated_at", "2018-01-14 18:20:41.235908"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.239661"], ["updated_at", "2018-01-14 18:20:41.239661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.244738"], ["updated_at", "2018-01-14 18:20:41.244738"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.248631"], ["updated_at", "2018-01-14 18:20:41.248631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.257396"], ["updated_at", "2018-01-14 18:20:41.257396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.261255"], ["updated_at", "2018-01-14 18:20:41.261255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.264133"], ["updated_at", "2018-01-14 18:20:41.264133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.270701"], ["updated_at", "2018-01-14 18:20:41.270701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.273783"], ["updated_at", "2018-01-14 18:20:41.273783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.286437"], ["updated_at", "2018-01-14 18:20:41.286437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.290407"], ["updated_at", "2018-01-14 18:20:41.290407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.293346"], ["updated_at", "2018-01-14 18:20:41.293346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.295800"], ["updated_at", "2018-01-14 18:20:41.295800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.308185"], ["updated_at", "2018-01-14 18:20:41.308185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.311195"], ["updated_at", "2018-01-14 18:20:41.311195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.320864"], ["updated_at", "2018-01-14 18:20:41.320864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.323736"], ["updated_at", "2018-01-14 18:20:41.323736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.326749"], ["updated_at", "2018-01-14 18:20:41.326749"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.329161"], ["updated_at", "2018-01-14 18:20:41.329161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.338473"], ["updated_at", "2018-01-14 18:20:41.338473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.341402"], ["updated_at", "2018-01-14 18:20:41.341402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.354049"], ["updated_at", "2018-01-14 18:20:41.354049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.356958"], ["updated_at", "2018-01-14 18:20:41.356958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.362862"], ["updated_at", "2018-01-14 18:20:41.362862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.365754"], ["updated_at", "2018-01-14 18:20:41.365754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.376627"], ["updated_at", "2018-01-14 18:20:41.376627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:41.379533"], ["updated_at", "2018-01-14 18:20:41.379533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.382595"], ["updated_at", "2018-01-14 18:20:41.382595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.399486"], ["updated_at", "2018-01-14 18:20:41.399486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:41.401642"], ["updated_at", "2018-01-14 18:20:41.401642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.403741"], ["updated_at", "2018-01-14 18:20:41.403741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.405665"], ["updated_at", "2018-01-14 18:20:41.405665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.407350"], ["updated_at", "2018-01-14 18:20:41.407350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:41.409435"], ["updated_at", "2018-01-14 18:20:41.409435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:42.917941', '2018-01-14 18:20:42.917941', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:42.917941', '2018-01-14 18:20:42.917941', 298486374)[0m
  [1m[35m (83.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.021895"], ["updated_at", "2018-01-14 18:20:43.021895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.026147"], ["updated_at", "2018-01-14 18:20:43.026147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.038201"], ["updated_at", "2018-01-14 18:20:43.038201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.040882"], ["updated_at", "2018-01-14 18:20:43.040882"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.046377"], ["updated_at", "2018-01-14 18:20:43.046377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.053968"], ["updated_at", "2018-01-14 18:20:43.053968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.061976"], ["updated_at", "2018-01-14 18:20:43.061976"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.064895"], ["updated_at", "2018-01-14 18:20:43.064895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.067809"], ["updated_at", "2018-01-14 18:20:43.067809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.070471"], ["updated_at", "2018-01-14 18:20:43.070471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.079231"], ["updated_at", "2018-01-14 18:20:43.079231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.081539"], ["updated_at", "2018-01-14 18:20:43.081539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.083519"], ["updated_at", "2018-01-14 18:20:43.083519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.090215"], ["updated_at", "2018-01-14 18:20:43.090215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.092515"], ["updated_at", "2018-01-14 18:20:43.092515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.100332"], ["updated_at", "2018-01-14 18:20:43.100332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.104236"], ["updated_at", "2018-01-14 18:20:43.104236"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.107084"], ["updated_at", "2018-01-14 18:20:43.107084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.114083"], ["updated_at", "2018-01-14 18:20:43.114083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.116499"], ["updated_at", "2018-01-14 18:20:43.116499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.119913"], ["updated_at", "2018-01-14 18:20:43.119913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.122276"], ["updated_at", "2018-01-14 18:20:43.122276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.124589"], ["updated_at", "2018-01-14 18:20:43.124589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.126704"], ["updated_at", "2018-01-14 18:20:43.126704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.129581"], ["updated_at", "2018-01-14 18:20:43.129581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.131815"], ["updated_at", "2018-01-14 18:20:43.131815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.142302"], ["updated_at", "2018-01-14 18:20:43.142302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.145238"], ["updated_at", "2018-01-14 18:20:43.145238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.156888"], ["updated_at", "2018-01-14 18:20:43.156888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.161247"], ["updated_at", "2018-01-14 18:20:43.161247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.164360"], ["updated_at", "2018-01-14 18:20:43.164360"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.166944"], ["updated_at", "2018-01-14 18:20:43.166944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:43.178043"], ["updated_at", "2018-01-14 18:20:43.178043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.181032"], ["updated_at", "2018-01-14 18:20:43.181032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:43.183667"], ["updated_at", "2018-01-14 18:20:43.183667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.186189"], ["updated_at", "2018-01-14 18:20:43.186189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.199323"], ["updated_at", "2018-01-14 18:20:43.199323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.202061"], ["updated_at", "2018-01-14 18:20:43.202061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.204720"], ["updated_at", "2018-01-14 18:20:43.204720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.209829"], ["updated_at", "2018-01-14 18:20:43.209829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:43.213811"], ["updated_at", "2018-01-14 18:20:43.213811"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:45.187353', '2018-01-14 18:20:45.187353', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:45.187353', '2018-01-14 18:20:45.187353', 298486374)[0m
  [1m[35m (81.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.283192"], ["updated_at", "2018-01-14 18:20:45.283192"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.286037"], ["updated_at", "2018-01-14 18:20:45.286037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.294434"], ["updated_at", "2018-01-14 18:20:45.294434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.296659"], ["updated_at", "2018-01-14 18:20:45.296659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.303259"], ["updated_at", "2018-01-14 18:20:45.303259"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.305413"], ["updated_at", "2018-01-14 18:20:45.305413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.311656"], ["updated_at", "2018-01-14 18:20:45.311656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.313797"], ["updated_at", "2018-01-14 18:20:45.313797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.315558"], ["updated_at", "2018-01-14 18:20:45.315558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.317193"], ["updated_at", "2018-01-14 18:20:45.317193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.325048"], ["updated_at", "2018-01-14 18:20:45.325048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.330161"], ["updated_at", "2018-01-14 18:20:45.330161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.336521"], ["updated_at", "2018-01-14 18:20:45.336521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.340288"], ["updated_at", "2018-01-14 18:20:45.340288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.342335"], ["updated_at", "2018-01-14 18:20:45.342335"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.344130"], ["updated_at", "2018-01-14 18:20:45.344130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.348158"], ["updated_at", "2018-01-14 18:20:45.348158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.350232"], ["updated_at", "2018-01-14 18:20:45.350232"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.352028"], ["updated_at", "2018-01-14 18:20:45.352028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.364593"], ["updated_at", "2018-01-14 18:20:45.364593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.366793"], ["updated_at", "2018-01-14 18:20:45.366793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.370175"], ["updated_at", "2018-01-14 18:20:45.370175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.372390"], ["updated_at", "2018-01-14 18:20:45.372390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.374249"], ["updated_at", "2018-01-14 18:20:45.374249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.375992"], ["updated_at", "2018-01-14 18:20:45.375992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.377694"], ["updated_at", "2018-01-14 18:20:45.377694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.379356"], ["updated_at", "2018-01-14 18:20:45.379356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.387895"], ["updated_at", "2018-01-14 18:20:45.387895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.390160"], ["updated_at", "2018-01-14 18:20:45.390160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.398857"], ["updated_at", "2018-01-14 18:20:45.398857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.401039"], ["updated_at", "2018-01-14 18:20:45.401039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.404325"], ["updated_at", "2018-01-14 18:20:45.404325"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.406665"], ["updated_at", "2018-01-14 18:20:45.406665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.408742"], ["updated_at", "2018-01-14 18:20:45.408742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.410610"], ["updated_at", "2018-01-14 18:20:45.410610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.417935"], ["updated_at", "2018-01-14 18:20:45.417935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.420453"], ["updated_at", "2018-01-14 18:20:45.420453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:45.422511"], ["updated_at", "2018-01-14 18:20:45.422511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.424524"], ["updated_at", "2018-01-14 18:20:45.424524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:45.433927"], ["updated_at", "2018-01-14 18:20:45.433927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:45.436094"], ["updated_at", "2018-01-14 18:20:45.436094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:55.430229', '2018-01-14 18:20:55.430229', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:20:55.430229', '2018-01-14 18:20:55.430229', 298486374)[0m
  [1m[35m (97.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.544233"], ["updated_at", "2018-01-14 18:20:55.544233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.547322"], ["updated_at", "2018-01-14 18:20:55.547322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.549494"], ["updated_at", "2018-01-14 18:20:55.549494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.551376"], ["updated_at", "2018-01-14 18:20:55.551376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.562164"], ["updated_at", "2018-01-14 18:20:55.562164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.564550"], ["updated_at", "2018-01-14 18:20:55.564550"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.571657"], ["updated_at", "2018-01-14 18:20:55.571657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.576834"], ["updated_at", "2018-01-14 18:20:55.576834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.578905"], ["updated_at", "2018-01-14 18:20:55.578905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.588173"], ["updated_at", "2018-01-14 18:20:55.588173"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.592138"], ["updated_at", "2018-01-14 18:20:55.592138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.602069"], ["updated_at", "2018-01-14 18:20:55.602069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.604860"], ["updated_at", "2018-01-14 18:20:55.604860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.610152"], ["updated_at", "2018-01-14 18:20:55.610152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.613317"], ["updated_at", "2018-01-14 18:20:55.613317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.623807"], ["updated_at", "2018-01-14 18:20:55.623807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.626853"], ["updated_at", "2018-01-14 18:20:55.626853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.629727"], ["updated_at", "2018-01-14 18:20:55.629727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.636187"], ["updated_at", "2018-01-14 18:20:55.636187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.639085"], ["updated_at", "2018-01-14 18:20:55.639085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.643599"], ["updated_at", "2018-01-14 18:20:55.643599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.646554"], ["updated_at", "2018-01-14 18:20:55.646554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.658128"], ["updated_at", "2018-01-14 18:20:55.658128"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.660918"], ["updated_at", "2018-01-14 18:20:55.660918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.670481"], ["updated_at", "2018-01-14 18:20:55.670481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.673252"], ["updated_at", "2018-01-14 18:20:55.673252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.676075"], ["updated_at", "2018-01-14 18:20:55.676075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.679330"], ["updated_at", "2018-01-14 18:20:55.679330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.689915"], ["updated_at", "2018-01-14 18:20:55.689915"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.693440"], ["updated_at", "2018-01-14 18:20:55.693440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.696544"], ["updated_at", "2018-01-14 18:20:55.696544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.699177"], ["updated_at", "2018-01-14 18:20:55.699177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.710921"], ["updated_at", "2018-01-14 18:20:55.710921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:20:55.713745"], ["updated_at", "2018-01-14 18:20:55.713745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.724158"], ["updated_at", "2018-01-14 18:20:55.724158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.725934"], ["updated_at", "2018-01-14 18:20:55.725934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.727787"], ["updated_at", "2018-01-14 18:20:55.727787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.729693"], ["updated_at", "2018-01-14 18:20:55.729693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.736815"], ["updated_at", "2018-01-14 18:20:55.736815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:20:55.738847"], ["updated_at", "2018-01-14 18:20:55.738847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:20:55.740787"], ["updated_at", "2018-01-14 18:20:55.740787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:25:31.139452', '2018-01-14 18:25:31.139452', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-14 18:25:31.139452', '2018-01-14 18:25:31.139452', 298486374)[0m
  [1m[35m (74.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.232397"], ["updated_at", "2018-01-14 18:25:31.232397"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.235844"], ["updated_at", "2018-01-14 18:25:31.235844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.237859"], ["updated_at", "2018-01-14 18:25:31.237859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.244793"], ["updated_at", "2018-01-14 18:25:31.244793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.246879"], ["updated_at", "2018-01-14 18:25:31.246879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.248799"], ["updated_at", "2018-01-14 18:25:31.248799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.250718"], ["updated_at", "2018-01-14 18:25:31.250718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.258714"], ["updated_at", "2018-01-14 18:25:31.258714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.261286"], ["updated_at", "2018-01-14 18:25:31.261286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.267445"], ["updated_at", "2018-01-14 18:25:31.267445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.269573"], ["updated_at", "2018-01-14 18:25:31.269573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.274167"], ["updated_at", "2018-01-14 18:25:31.274167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.277424"], ["updated_at", "2018-01-14 18:25:31.277424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.285992"], ["updated_at", "2018-01-14 18:25:31.285992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.289369"], ["updated_at", "2018-01-14 18:25:31.289369"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.291995"], ["updated_at", "2018-01-14 18:25:31.291995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.302593"], ["updated_at", "2018-01-14 18:25:31.302593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.307296"], ["updated_at", "2018-01-14 18:25:31.307296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.318726"], ["updated_at", "2018-01-14 18:25:31.318726"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.321572"], ["updated_at", "2018-01-14 18:25:31.321572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.332037"], ["updated_at", "2018-01-14 18:25:31.332037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.335135"], ["updated_at", "2018-01-14 18:25:31.335135"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.345698"], ["updated_at", "2018-01-14 18:25:31.345698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.350210"], ["updated_at", "2018-01-14 18:25:31.350210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.353189"], ["updated_at", "2018-01-14 18:25:31.353189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.356627"], ["updated_at", "2018-01-14 18:25:31.356627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.358478"], ["updated_at", "2018-01-14 18:25:31.358478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.370050"], ["updated_at", "2018-01-14 18:25:31.370050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.373632"], ["updated_at", "2018-01-14 18:25:31.373632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.378535"], ["updated_at", "2018-01-14 18:25:31.378535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.382278"], ["updated_at", "2018-01-14 18:25:31.382278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.386984"], ["updated_at", "2018-01-14 18:25:31.386984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-14 18:25:31.389962"], ["updated_at", "2018-01-14 18:25:31.389962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.404125"], ["updated_at", "2018-01-14 18:25:31.404125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-14 18:25:31.407164"], ["updated_at", "2018-01-14 18:25:31.407164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.418406"], ["updated_at", "2018-01-14 18:25:31.418406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.420303"], ["updated_at", "2018-01-14 18:25:31.420303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.422058"], ["updated_at", "2018-01-14 18:25:31.422058"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.423807"], ["updated_at", "2018-01-14 18:25:31.423807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.433280"], ["updated_at", "2018-01-14 18:25:31.433280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-14 18:25:31.435598"], ["updated_at", "2018-01-14 18:25:31.435598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:35:26.487494', '2018-01-15 13:35:26.487494', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:35:26.487494', '2018-01-15 13:35:26.487494', 298486374)[0m
  [1m[35m (90.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (4.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.600197"], ["updated_at", "2018-01-15 13:35:26.600197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.603622"], ["updated_at", "2018-01-15 13:35:26.603622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.605994"], ["updated_at", "2018-01-15 13:35:26.605994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.608150"], ["updated_at", "2018-01-15 13:35:26.608150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.618676"], ["updated_at", "2018-01-15 13:35:26.618676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.620907"], ["updated_at", "2018-01-15 13:35:26.620907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.622990"], ["updated_at", "2018-01-15 13:35:26.622990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.624892"], ["updated_at", "2018-01-15 13:35:26.624892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.632271"], ["updated_at", "2018-01-15 13:35:26.632271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.634378"], ["updated_at", "2018-01-15 13:35:26.634378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.640906"], ["updated_at", "2018-01-15 13:35:26.640906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.642904"], ["updated_at", "2018-01-15 13:35:26.642904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.650148"], ["updated_at", "2018-01-15 13:35:26.650148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.651991"], ["updated_at", "2018-01-15 13:35:26.651991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.655386"], ["updated_at", "2018-01-15 13:35:26.655386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.657479"], ["updated_at", "2018-01-15 13:35:26.657479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.659361"], ["updated_at", "2018-01-15 13:35:26.659361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.661121"], ["updated_at", "2018-01-15 13:35:26.661121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.667113"], ["updated_at", "2018-01-15 13:35:26.667113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.669239"], ["updated_at", "2018-01-15 13:35:26.669239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.671141"], ["updated_at", "2018-01-15 13:35:26.671141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.681396"], ["updated_at", "2018-01-15 13:35:26.681396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.685147"], ["updated_at", "2018-01-15 13:35:26.685147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.696436"], ["updated_at", "2018-01-15 13:35:26.696436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.702225"], ["updated_at", "2018-01-15 13:35:26.702225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.708318"], ["updated_at", "2018-01-15 13:35:26.708318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.720299"], ["updated_at", "2018-01-15 13:35:26.720299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.724700"], ["updated_at", "2018-01-15 13:35:26.724700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.728983"], ["updated_at", "2018-01-15 13:35:26.728983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.736442"], ["updated_at", "2018-01-15 13:35:26.736442"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:26.739060"], ["updated_at", "2018-01-15 13:35:26.739060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.746540"], ["updated_at", "2018-01-15 13:35:26.746540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.749546"], ["updated_at", "2018-01-15 13:35:26.749546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.757190"], ["updated_at", "2018-01-15 13:35:26.757190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.760141"], ["updated_at", "2018-01-15 13:35:26.760141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.763460"], ["updated_at", "2018-01-15 13:35:26.763460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:26.766574"], ["updated_at", "2018-01-15 13:35:26.766574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.769448"], ["updated_at", "2018-01-15 13:35:26.769448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.772150"], ["updated_at", "2018-01-15 13:35:26.772150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.774357"], ["updated_at", "2018-01-15 13:35:26.774357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:26.777309"], ["updated_at", "2018-01-15 13:35:26.777309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:35:50.439173', '2018-01-15 13:35:50.439173', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:35:50.439173', '2018-01-15 13:35:50.439173', 298486374)[0m
  [1m[35m (71.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.525516"], ["updated_at", "2018-01-15 13:35:50.525516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.528069"], ["updated_at", "2018-01-15 13:35:50.528069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.529988"], ["updated_at", "2018-01-15 13:35:50.529988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.536739"], ["updated_at", "2018-01-15 13:35:50.536739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.539025"], ["updated_at", "2018-01-15 13:35:50.539025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.540862"], ["updated_at", "2018-01-15 13:35:50.540862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.549144"], ["updated_at", "2018-01-15 13:35:50.549144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.554173"], ["updated_at", "2018-01-15 13:35:50.554173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.556855"], ["updated_at", "2018-01-15 13:35:50.556855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.560825"], ["updated_at", "2018-01-15 13:35:50.560825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.563658"], ["updated_at", "2018-01-15 13:35:50.563658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.571880"], ["updated_at", "2018-01-15 13:35:50.571880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.574244"], ["updated_at", "2018-01-15 13:35:50.574244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.578199"], ["updated_at", "2018-01-15 13:35:50.578199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.580810"], ["updated_at", "2018-01-15 13:35:50.580810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.583445"], ["updated_at", "2018-01-15 13:35:50.583445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.585614"], ["updated_at", "2018-01-15 13:35:50.585614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.587565"], ["updated_at", "2018-01-15 13:35:50.587565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.593290"], ["updated_at", "2018-01-15 13:35:50.593290"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.603275"], ["updated_at", "2018-01-15 13:35:50.603275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.606024"], ["updated_at", "2018-01-15 13:35:50.606024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.613298"], ["updated_at", "2018-01-15 13:35:50.613298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.615975"], ["updated_at", "2018-01-15 13:35:50.615975"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.618555"], ["updated_at", "2018-01-15 13:35:50.618555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.620893"], ["updated_at", "2018-01-15 13:35:50.620893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.629600"], ["updated_at", "2018-01-15 13:35:50.629600"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.632652"], ["updated_at", "2018-01-15 13:35:50.632652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.641324"], ["updated_at", "2018-01-15 13:35:50.641324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.644004"], ["updated_at", "2018-01-15 13:35:50.644004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.646631"], ["updated_at", "2018-01-15 13:35:50.646631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.648867"], ["updated_at", "2018-01-15 13:35:50.648867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.658367"], ["updated_at", "2018-01-15 13:35:50.658367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.661288"], ["updated_at", "2018-01-15 13:35:50.661288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.669798"], ["updated_at", "2018-01-15 13:35:50.669798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.672303"], ["updated_at", "2018-01-15 13:35:50.672303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.678512"], ["updated_at", "2018-01-15 13:35:50.678512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.680423"], ["updated_at", "2018-01-15 13:35:50.680423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:35:50.691926"], ["updated_at", "2018-01-15 13:35:50.691926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.695517"], ["updated_at", "2018-01-15 13:35:50.695517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:35:50.699276"], ["updated_at", "2018-01-15 13:35:50.699276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:35:50.703403"], ["updated_at", "2018-01-15 13:35:50.703403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:37:53.512594', '2018-01-15 13:37:53.512594', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:37:53.512594', '2018-01-15 13:37:53.512594', 298486374)[0m
  [1m[35m (93.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.623841"], ["updated_at", "2018-01-15 13:37:53.623841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.626354"], ["updated_at", "2018-01-15 13:37:53.626354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.629670"], ["updated_at", "2018-01-15 13:37:53.629670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.631663"], ["updated_at", "2018-01-15 13:37:53.631663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.642063"], ["updated_at", "2018-01-15 13:37:53.642063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.644235"], ["updated_at", "2018-01-15 13:37:53.644235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.647387"], ["updated_at", "2018-01-15 13:37:53.647387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.649617"], ["updated_at", "2018-01-15 13:37:53.649617"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.651368"], ["updated_at", "2018-01-15 13:37:53.651368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.653019"], ["updated_at", "2018-01-15 13:37:53.653019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.662479"], ["updated_at", "2018-01-15 13:37:53.662479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.664865"], ["updated_at", "2018-01-15 13:37:53.664865"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.670667"], ["updated_at", "2018-01-15 13:37:53.670667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.672767"], ["updated_at", "2018-01-15 13:37:53.672767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.674463"], ["updated_at", "2018-01-15 13:37:53.674463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.676017"], ["updated_at", "2018-01-15 13:37:53.676017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.677731"], ["updated_at", "2018-01-15 13:37:53.677731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.679579"], ["updated_at", "2018-01-15 13:37:53.679579"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.687188"], ["updated_at", "2018-01-15 13:37:53.687188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.689397"], ["updated_at", "2018-01-15 13:37:53.689397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.694819"], ["updated_at", "2018-01-15 13:37:53.694819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.696751"], ["updated_at", "2018-01-15 13:37:53.696751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.702690"], ["updated_at", "2018-01-15 13:37:53.702690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.705380"], ["updated_at", "2018-01-15 13:37:53.705380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.708745"], ["updated_at", "2018-01-15 13:37:53.708745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.722913"], ["updated_at", "2018-01-15 13:37:53.722913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.725650"], ["updated_at", "2018-01-15 13:37:53.725650"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.734647"], ["updated_at", "2018-01-15 13:37:53.734647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.737778"], ["updated_at", "2018-01-15 13:37:53.737778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.740773"], ["updated_at", "2018-01-15 13:37:53.740773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.742567"], ["updated_at", "2018-01-15 13:37:53.742567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.749496"], ["updated_at", "2018-01-15 13:37:53.749496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.754225"], ["updated_at", "2018-01-15 13:37:53.754225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.757227"], ["updated_at", "2018-01-15 13:37:53.757227"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.760196"], ["updated_at", "2018-01-15 13:37:53.760196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.765760"], ["updated_at", "2018-01-15 13:37:53.765760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.768941"], ["updated_at", "2018-01-15 13:37:53.768941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:37:53.771744"], ["updated_at", "2018-01-15 13:37:53.771744"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.774505"], ["updated_at", "2018-01-15 13:37:53.774505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:37:53.785276"], ["updated_at", "2018-01-15 13:37:53.785276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:37:53.788180"], ["updated_at", "2018-01-15 13:37:53.788180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:38:44.625289', '2018-01-15 13:38:44.625289', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:38:44.625289', '2018-01-15 13:38:44.625289', 298486374)[0m
  [1m[35m (211.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.857212"], ["updated_at", "2018-01-15 13:38:44.857212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.860734"], ["updated_at", "2018-01-15 13:38:44.860734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.865094"], ["updated_at", "2018-01-15 13:38:44.865094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.867700"], ["updated_at", "2018-01-15 13:38:44.867700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.870533"], ["updated_at", "2018-01-15 13:38:44.870533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.873026"], ["updated_at", "2018-01-15 13:38:44.873026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.884685"], ["updated_at", "2018-01-15 13:38:44.884685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.887122"], ["updated_at", "2018-01-15 13:38:44.887122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.889539"], ["updated_at", "2018-01-15 13:38:44.889539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.891661"], ["updated_at", "2018-01-15 13:38:44.891661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.900844"], ["updated_at", "2018-01-15 13:38:44.900844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.902883"], ["updated_at", "2018-01-15 13:38:44.902883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.909010"], ["updated_at", "2018-01-15 13:38:44.909010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.911078"], ["updated_at", "2018-01-15 13:38:44.911078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.913111"], ["updated_at", "2018-01-15 13:38:44.913111"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.7ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.924052"], ["updated_at", "2018-01-15 13:38:44.924052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.926757"], ["updated_at", "2018-01-15 13:38:44.926757"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.937368"], ["updated_at", "2018-01-15 13:38:44.937368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.939933"], ["updated_at", "2018-01-15 13:38:44.939933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.942864"], ["updated_at", "2018-01-15 13:38:44.942864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.949145"], ["updated_at", "2018-01-15 13:38:44.949145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.952705"], ["updated_at", "2018-01-15 13:38:44.952705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.958486"], ["updated_at", "2018-01-15 13:38:44.958486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.961645"], ["updated_at", "2018-01-15 13:38:44.961645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.969701"], ["updated_at", "2018-01-15 13:38:44.969701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.972742"], ["updated_at", "2018-01-15 13:38:44.972742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:44.975145"], ["updated_at", "2018-01-15 13:38:44.975145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.977710"], ["updated_at", "2018-01-15 13:38:44.977710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.986996"], ["updated_at", "2018-01-15 13:38:44.986996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:44.990396"], ["updated_at", "2018-01-15 13:38:44.990396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.992773"], ["updated_at", "2018-01-15 13:38:44.992773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.995735"], ["updated_at", "2018-01-15 13:38:44.995735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:44.998213"], ["updated_at", "2018-01-15 13:38:44.998213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:45.000493"], ["updated_at", "2018-01-15 13:38:45.000493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:45.011151"], ["updated_at", "2018-01-15 13:38:45.011151"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:38:45.013991"], ["updated_at", "2018-01-15 13:38:45.013991"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:45.023634"], ["updated_at", "2018-01-15 13:38:45.023634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:45.026063"], ["updated_at", "2018-01-15 13:38:45.026063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:45.038477"], ["updated_at", "2018-01-15 13:38:45.038477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:38:45.041501"], ["updated_at", "2018-01-15 13:38:45.041501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:38:45.043154"], ["updated_at", "2018-01-15 13:38:45.043154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "events"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:40:12.705347', '2018-01-15 13:40:12.705347', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at", "id") VALUES ('2018-01-13 13:11:23', '2018-01-13 13:11:23', 'MyString', 'f', '2018-01-15 13:40:12.705347', '2018-01-15 13:40:12.705347', 298486374)[0m
  [1m[35m (106.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
EventTest: test_separated_openings
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.832434"], ["updated_at", "2018-01-15 13:40:12.832434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 10:30:00"], ["ends_at", "2014-08-05 12:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.836443"], ["updated_at", "2018-01-15 13:40:12.836443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.839004"], ["updated_at", "2018-01-15 13:40:12.839004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-12 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-05"], ["starts_at", "2014-08-11"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-05 00:00:00"], ["starts_at", "2014-08-11 00:00:00"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
EventTest: test_appointments_method
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.851695"], ["updated_at", "2018-01-15 13:40:12.851695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.855558"], ["updated_at", "2018-01-15 13:40:12.855558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:00:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.863311"], ["updated_at", "2018-01-15 13:40:12.863311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-06 00:00:00"], ["starts_at", "2014-08-14 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
EventTest: test_available_slots_method
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 09:30:00"], ["ends_at", "2014-08-08 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.867685"], ["updated_at", "2018-01-15 13:40:12.867685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 11:30:00"], ["ends_at", "2014-08-08 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.869655"], ["updated_at", "2018-01-15 13:40:12.869655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
EventTest: test_day_opening_slots_method
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.873177"], ["updated_at", "2018-01-15 13:40:12.873177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 10:00:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.875311"], ["updated_at", "2018-01-15 13:40:12.875311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-10 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-03 00:00:00"], ["starts_at", "2014-08-09 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
EventTest: test_multiple_weekly_recurring_and_not_weekly_recurring_openings
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 10:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.883006"], ["updated_at", "2018-01-15 13:40:12.883006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 11:30:00"], ["ends_at", "2014-08-04 14:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.885737"], ["updated_at", "2018-01-15 13:40:12.885737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 15:00:00"], ["ends_at", "2014-08-11 18:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.888358"], ["updated_at", "2018-01-15 13:40:12.888358"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 12:00:00"], ["ends_at", "2014-08-11 13:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.890761"], ["updated_at", "2018-01-15 13:40:12.890761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_multiplte_appointements_without_an_opening
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-01 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.898591"], ["updated_at", "2018-01-15 13:40:12.898591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-08 15:00:00"], ["ends_at", "2014-08-11 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.900745"], ["updated_at", "2018-01-15 13:40:12.900745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_available_slots_method_with_no_appointment
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 09:30:00"], ["ends_at", "2014-08-09 10:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.907155"], ["updated_at", "2018-01-15 13:40:12.907155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-09 11:30:00"], ["ends_at", "2014-08-09 12:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.909393"], ["updated_at", "2018-01-15 13:40:12.909393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.912851"], ["updated_at", "2018-01-15 13:40:12.912851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.914944"], ["updated_at", "2018-01-15 13:40:12.914944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
EventTest: test_overlapping_openings
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 08:00:00"], ["ends_at", "2014-08-05 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.923308"], ["updated_at", "2018-01-15 13:40:12.923308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 11:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.925924"], ["updated_at", "2018-01-15 13:40:12.925924"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 10:00:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.927961"], ["updated_at", "2018-01-15 13:40:12.927961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 09:00:00"], ["ends_at", "2014-08-12 09:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.929842"], ["updated_at", "2018-01-15 13:40:12.929842"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-19 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-12"], ["starts_at", "2014-08-18"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-12 00:00:00"], ["starts_at", "2014-08-18 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
EventTest: test_dupilcated_opening_with_a_booked_day
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-05 14:00:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.937498"], ["updated_at", "2018-01-15 13:40:12.937498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-05 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.939660"], ["updated_at", "2018-01-15 13:40:12.939660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 14:30:00"], ["ends_at", "2014-08-12 15:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.941909"], ["updated_at", "2018-01-15 13:40:12.941909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 15:30:00"], ["ends_at", "2014-08-12 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.943998"], ["updated_at", "2018-01-15 13:40:12.943998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 16:00:00"], ["ends_at", "2014-08-12 17:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.946022"], ["updated_at", "2018-01-15 13:40:12.946022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-12 17:00:00"], ["ends_at", "2014-08-12 18:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.949151"], ["updated_at", "2018-01-15 13:40:12.949151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
EventTest: test_example_for_future_opening_events_creation
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 09:30:00"], ["ends_at", "2014-08-10 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.961248"], ["updated_at", "2018-01-15 13:40:12.961248"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-10 14:30:00"], ["ends_at", "2014-08-10 18:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.964750"], ["updated_at", "2018-01-15 13:40:12.964750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 14:30:00"], ["ends_at", "2014-08-03 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.967353"], ["updated_at", "2018-01-15 13:40:12.967353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-03 15:00:00"], ["ends_at", "2014-08-03 16:00:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:12.970618"], ["updated_at", "2018-01-15 13:40:12.970618"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-08 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-01"], ["starts_at", "2014-08-07"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-01 00:00:00"], ["starts_at", "2014-08-07 00:00:00"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
EventTest: test_openings_method
-------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.982972"], ["updated_at", "2018-01-15 13:40:12.982972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 09:30:00"], ["ends_at", "2014-08-11 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:12.986791"], ["updated_at", "2018-01-15 13:40:12.986791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
EventTest: test_multiple_opening_events_without_appointements_and_weekly_recurring_openings
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:00:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:12.997032"], ["updated_at", "2018-01-15 13:40:12.997032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 14:30:00"], ["ends_at", "2014-08-11 18:30:00"], ["kind", "opening"], ["weekly_recurring", "f"], ["created_at", "2018-01-15 13:40:13.001385"], ["updated_at", "2018-01-15 13:40:13.001385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-14 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-07"], ["starts_at", "2014-08-13"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-07 00:00:00"], ["starts_at", "2014-08-13 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
EventTest: test_one_simple_test_example
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 09:30:00"], ["ends_at", "2014-08-04 12:30:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:13.013088"], ["updated_at", "2018-01-15 13:40:13.013088"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-11 10:30:00"], ["ends_at", "2014-08-11 11:30:00"], ["kind", "appointment"], ["created_at", "2018-01-15 13:40:13.016453"], ["updated_at", "2018-01-15 13:40:13.016453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND (starts_at < '2014-08-17 00:00:00')[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "t"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND "events"."kind" = ? AND "events"."weekly_recurring" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "opening"], ["kind", "opening"], ["weekly_recurring", "f"], ["starts_at", "2014-08-10"], ["starts_at", "2014-08-16"]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."kind" = ? AND ("events"."starts_at" BETWEEN ? AND ?)[0m  [["kind", "appointment"], ["starts_at", "2014-08-10 00:00:00"], ["starts_at", "2014-08-16 00:00:00"]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
EventTest: test_weekly_opening_to_fixed_opening_method
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "events" ("starts_at", "ends_at", "kind", "weekly_recurring", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["starts_at", "2014-08-04 08:30:00"], ["ends_at", "2014-08-04 10:00:00"], ["kind", "opening"], ["weekly_recurring", "t"], ["created_at", "2018-01-15 13:40:13.025934"], ["updated_at", "2018-01-15 13:40:13.025934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
